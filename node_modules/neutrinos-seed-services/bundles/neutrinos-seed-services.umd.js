(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('platform'), require('@angular/core'), require('ngforage'), require('rxjs/Subject'), require('firebase'), require('@angular/common/http'), require('rxjs/add/operator/map'), require('@angular/router'), require('rxjs/Observable'), require('rxjs/Rx'), require('@angular/common'), require('@angular/http')) :
    typeof define === 'function' && define.amd ? define('neutrinos-seed-services', ['exports', 'platform', '@angular/core', 'ngforage', 'rxjs/Subject', 'firebase', '@angular/common/http', 'rxjs/add/operator/map', '@angular/router', 'rxjs/Observable', 'rxjs/Rx', '@angular/common', '@angular/http'], factory) :
    (factory((global['neutrinos-seed-services'] = {}),null,global.ng.core,global.ngforage,global.rxjs.Subject,global.firebase,global.ng.common.http,global.rxjs['add/operator/map'],global.ng.router,global.rxjs.Observable,global.rxjs.Rx,global.ng.common,global.ng.http));
}(this, (function (exports,platform,core,ngforage,Subject,firebase,http,map,router,Observable,Rx,common,http$1) { 'use strict';

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NSystemService = (function () {
        function NSystemService() {
            this._deviceType = this.checkDevice();
        }
        /**
         * @return {?}
         */
        NSystemService.getInstance = /**
         * @return {?}
         */
            function () {
                if (!this.instance) {
                    this.instance = new NSystemService();
                }
                return this.instance;
            };
        /**
         * Seter and getter for the environments
         */
        // set environments(properties) {
        //   console.log(properties);
        //   NSystemService.envProperties = properties;
        //   this.properties = this.getVal('properties');
        // }
        // get environments() {
        //   return NSystemService.envProperties;
        // }
        /**
         * Returna 'mobile' or 'browser' based on the platform
         */
        /**
         * Returna 'mobile' or 'browser' based on the platform
         * @return {?}
         */
        NSystemService.prototype.checkDevice = /**
         * Returna 'mobile' or 'browser' based on the platform
         * @return {?}
         */
            function () {
                if (window['device'] && (window['device']['platform'] != 'browser' || window['device']['platform'] != 'Browser')) {
                    return 'mobile';
                }
                else if (window['device'] && (window['device']['platform'] == 'browser' || window['device']['platform'] == 'Browser')) {
                    return 'cordova_browser';
                }
                else {
                    return 'browser';
                }
            };
        Object.defineProperty(NSystemService.prototype, "deviceType", {
            get: /**
             * @return {?}
             */ function () {
                return this._deviceType;
            },
            enumerable: true,
            configurable: true
        });
        /**
         * @param {?} key
         * @return {?}
         */
        NSystemService.prototype.getVal = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                if (!NSystemService.envProperties) {
                    NSystemService.envProperties = window['neutrinos']['environments'];
                    this.properties = NSystemService.envProperties.properties;
                }
                if (key == 'properties') {
                    if (NSystemService.envProperties) {
                        return NSystemService.envProperties.properties;
                    }
                    else {
                        return undefined;
                    }
                }
                else {
                    if (NSystemService.envProperties && NSystemService.envProperties.properties) {
                        return NSystemService.envProperties.properties[key];
                    }
                    else {
                        return undefined;
                    }
                }
            };
        /**
         * @return {?}
         */
        NSystemService.prototype.isAndroid = /**
         * @return {?}
         */
            function () {
                if (window['device'] && window['device']['platform'] == 'Android') {
                    return true;
                }
                else {
                    return false;
                }
            };
        /**
         * @return {?}
         */
        NSystemService.prototype.isIOS = /**
         * @return {?}
         */
            function () {
                if (window['device'] && window['device']['platform'] == 'iOS') {
                    return true;
                }
                else {
                    return false;
                }
            };
        /**
         * @return {?}
         */
        NSystemService.prototype.getAndroidVersion = /**
         * @return {?}
         */
            function () {
                if (this.isAndroid()) {
                    return window['device']['version'];
                }
                else {
                    return '';
                }
            };
        /**
         * @return {?}
         */
        NSystemService.prototype.getAuthUrl = /**
         * @return {?}
         */
            function () {
                // this.properties = this.getVal('properties');
                return this.properties.baseUrl + this.properties.tenantName + '/auth/';
            };
        /**
         * @return {?}
         */
        NSystemService.prototype.getTenantUrl = /**
         * @return {?}
         */
            function () {
                return this.properties.baseUrl + this.properties.tenantName + '/';
            };
        /**
         * @return {?}
         */
        NSystemService.prototype.getAppUrl = /**
         * @return {?}
         */
            function () {
                return this.properties.baseUrl + this.properties.tenantName + '/proxy/' + this.properties.appName + '/';
            };
        /**
         * @return {?}
         */
        NSystemService.prototype.getProxyUrl = /**
         * @return {?}
         */
            function () {
                return this.properties.baseUrl + this.properties.tenantName + '/proxy/';
            };
        /**
         * @return {?}
         */
        NSystemService.prototype.getDataModelUrl = /**
         * @return {?}
         */
            function () {
                return this.properties.baseUrl + this.properties.tenantName + '/datamodel/' + this.properties.appDataSource + '/' + this.properties.appName + '/';
            };
        /**
         * @return {?}
         */
        NSystemService.prototype.getFileIOUrl = /**
         * @return {?}
         */
            function () {
                return this.properties.baseUrl + this.properties.tenantName + '/fileio/' +
                    this.properties.appDataSource + '/' + this.properties.appName + '/';
            };
        /**
         * @param {?} type
         * @return {?}
         */
        NSystemService.prototype.getPlatformDetails = /**
         * @param {?} type
         * @return {?}
         */
            function (type) {
                var /** @type {?} */ pDetails = {
                    platform: platform.os.family,
                    platformVersion: platform.os.version,
                };
                if (type === 'browser') {
                    return Object.assign(pDetails, {
                        type: 'browser',
                        browser: platform.name,
                        browserVersion: platform.version,
                    });
                }
                else if (type === 'mobile' || type === 'cordova_browser') {
                    return Object.assign(pDetails, {
                        type: 'mobile',
                        model: window['device'].model,
                        manufacturer: window['device'].manufacturer,
                        isVirtual: window['device'].isVirtual
                    });
                }
            };
        return NSystemService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NSessionStorageService = (function () {
        function NSessionStorageService() {
            NSessionStorageService.sessionStorageCache = sessionStorage;
        }
        /**
         * @return {?}
         */
        NSessionStorageService.prototype.getSessionStorage = /**
         * @return {?}
         */
            function () {
                return NSessionStorageService.sessionStorageCache;
            };
        /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        NSessionStorageService.prototype.setValue = /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
            function (key, value) {
                NSessionStorageService.sessionStorageCache[key] = value;
                sessionStorage.setItem(key, value);
            };
        /**
         * @param {?} key
         * @return {?}
         */
        NSessionStorageService.prototype.getValue = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                if (!NSessionStorageService.sessionStorageCache[key]) {
                    return null;
                }
                try {
                    var /** @type {?} */ obj = NSessionStorageService.sessionStorageCache[key];
                    return JSON.parse(obj);
                }
                catch (error) {
                    return NSessionStorageService.sessionStorageCache[key];
                }
            };
        /**
         * @param {?} key
         * @return {?}
         */
        NSessionStorageService.prototype.remove = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                if (NSessionStorageService.sessionStorageCache.hasOwnProperty(key)) {
                    delete NSessionStorageService.sessionStorageCache[key];
                    sessionStorage.removeItem(key);
                }
            };
        /**
         * @return {?}
         */
        NSessionStorageService.prototype.clearSessionStorage = /**
         * @return {?}
         */
            function () {
                NSessionStorageService.sessionStorageCache = {};
                sessionStorage.clear();
            };
        NSessionStorageService.sessionStorageCache = {};
        NSessionStorageService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        NSessionStorageService.ctorParameters = function () { return []; };
        return NSessionStorageService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NUtility = (function () {
        function NUtility() {
        }
        /**
         * @return {?}
         */
        NUtility.prototype.generateUUID = /**
         * @return {?}
         */
            function () {
                return this.__s4() + this.__s4() + '-' + this.__s4() + '-' + this.__s4() + '-' + this.__s4() + '-' + this.__s4() + this.__s4() + this.__s4();
            };
        /**
         * @return {?}
         */
        NUtility.prototype.__s4 = /**
         * @return {?}
         */
            function () {
                return Math.floor((1 + Math.random()) * 0x10000)
                    .toString(16)
                    .substring(1);
            };
        return NUtility;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NLocalStorageService = (function () {
        function NLocalStorageService(ngfConfig, ngf, ngfCache) {
            this.ngfConfig = ngfConfig;
            this.ngf = ngf;
            this.ngfCache = ngfCache;
            this.storageCache = {};
        }
        /**
         * @return {?}
         */
        NLocalStorageService.prototype.initStorage = /**
         * @return {?}
         */
            function () {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    if (window['cordova']) {
                        _this.initNgForage();
                    }
                    _this.ngf.iterate(function (value, key, iteratonNumber) {
                        _this.storageCache[key] = value;
                    }).then(function (result) {
                        _this.checkDeviceId();
                        return resolve('iteration is completed');
                    }).catch(function (error) {
                        return reject(error);
                    });
                });
            };
        /**
         * @return {?}
         */
        NLocalStorageService.prototype.getStorage = /**
         * @return {?}
         */
            function () {
                return this.storageCache;
            };
        /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        NLocalStorageService.prototype.setValue = /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
            function (key, value) {
                if (window['cordova']) {
                    this.initNgForage();
                }
                this.storageCache[key] = value;
                return this.ngf.setItem(key, value).then(function (result) {
                    return result;
                }, function (error) {
                    console.log(error);
                });
            };
        /**
         * @param {?} key
         * @return {?}
         */
        NLocalStorageService.prototype.getValue = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                if (!this.storageCache[key]) {
                    return null;
                }
                try {
                    var /** @type {?} */ obj = this.storageCache[key];
                    return JSON.parse(obj);
                }
                catch (error) {
                    return this.storageCache[key];
                }
            };
        /**
         * @param {?} key
         * @return {?}
         */
        NLocalStorageService.prototype.remove = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                var _this = this;
                delete this.storageCache[key];
                if (window['cordova']) {
                    this.initNgForage();
                }
                this.ngf.removeItem(key).then(function (fulfilled) {
                    delete _this.ngf[key];
                }).catch(function (error) {
                    console.error('Could not remove', key);
                });
            };
        /**
         * @return {?}
         */
        NLocalStorageService.prototype.clear = /**
         * @return {?}
         */
            function () {
                this.storageCache = {};
                this.ngf.clear();
            };
        /**
         * @return {?}
         */
        NLocalStorageService.prototype.pluginCheck = /**
         * @return {?}
         */
            function () {
                if (window['cordova'] && window['NativeStorage']) {
                    this.nativeStorageI = window['NativeStorage'];
                    // return true;
                }
                // this.initStorage();
            };
        /**
         * @param {?} key
         * @return {?}
         */
        NLocalStorageService.prototype.getItemNs = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    if (window['cordova'] && window['NativeStorage']) {
                        _this.nativeStorageI.getItem(key, function (result) {
                            resolve(result);
                        }, function (error) {
                            reject(error);
                        });
                    }
                });
            };
        /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
        NLocalStorageService.prototype.setItemNs = /**
         * @param {?} key
         * @param {?} value
         * @return {?}
         */
            function (key, value) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    if (window['cordova'] && window['NativeStorage']) {
                        _this.nativeStorageI.setItem(key, value, function (result) {
                            resolve(result);
                        }, function (error) {
                            reject(error);
                        });
                    }
                });
            };
        /**
         * @param {?} key
         * @return {?}
         */
        NLocalStorageService.prototype.removeItemNs = /**
         * @param {?} key
         * @return {?}
         */
            function (key) {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    if (window['cordova'] && window['NativeStorage']) {
                        _this.nativeStorageI.remove(key, function (result) {
                            resolve(result);
                        }, function (error) {
                            reject(error);
                        });
                    }
                });
            };
        /**
         * @return {?}
         */
        NLocalStorageService.prototype.clearNs = /**
         * @return {?}
         */
            function () {
                var _this = this;
                return new Promise(function (resolve, reject) {
                    if (window['cordova'] && window['NativeStorage']) {
                        _this.nativeStorageI.clear(function (result) {
                            resolve(result);
                        }, function (error) {
                            reject(error);
                        });
                    }
                });
            };
        /**
         * @return {?}
         */
        NLocalStorageService.prototype.initNgForage = /**
         * @return {?}
         */
            function () {
                this.ngfConfig.configure({
                    name: 'MyApp',
                    driver: [
                        ngforage.NgForageConfig.DRIVER_WEBSQL,
                    ]
                });
            };
        /**
         * @param {?} promise
         * @return {?}
         */
        NLocalStorageService.prototype.promiseReflect = /**
         * @param {?} promise
         * @return {?}
         */
            function (promise) {
                return promise.then(function (resolved) { return { v: resolved, status: 'resolved' }; }, function (error) { return { e: error, status: 'rejected' }; });
            };
        /**
         * @return {?}
         */
        NLocalStorageService.prototype.clearLocalStorage = /**
         * @return {?}
         */
            function () {
                this.remove('userObj');
                this.remove('accessToken');
                this.remove('refreshToken');
                this.remove('registrationId');
            };
        /**
         * Due to timing issues and circular dependency checkDeviceId is moved from NSystemService
        */
        /**
         * Due to timing issues and circular dependency checkDeviceId is moved from NSystemService
         * @return {?}
         */
        NLocalStorageService.prototype.checkDeviceId = /**
         * Due to timing issues and circular dependency checkDeviceId is moved from NSystemService
         * @return {?}
         */
            function () {
                var _this = this;
                if (NSystemService.getInstance().checkDevice() === 'browser') {
                    this._deviceUUID = this.getValue('uuid');
                    if (!this._deviceUUID) {
                        this._deviceUUID = new NUtility().generateUUID();
                        this.setValue('uuid', this._deviceUUID);
                    }
                }
                else {
                    window['plugins'].uniqueDeviceID.get(function (uuid) {
                        _this._deviceUUID = uuid;
                        _this.setValue('uuid', _this._deviceUUID);
                    });
                }
                return this._deviceUUID;
            };
        Object.defineProperty(NLocalStorageService.prototype, "deviceUUID", {
            get: /**
             * @return {?}
             */ function () {
                return this._deviceUUID;
            },
            enumerable: true,
            configurable: true
        });
        NLocalStorageService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        NLocalStorageService.ctorParameters = function () {
            return [
                { type: ngforage.NgForageConfig, },
                { type: ngforage.NgForage, },
                { type: ngforage.NgForageCache, },
            ];
        };
        return NLocalStorageService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NTokenService = (function () {
        // nLocalStorageService: NLocalStorageService;
        function NTokenService(nLocalStorageService) {
            this.nLocalStorageService = nLocalStorageService;
            this.nSessionStorage = new NSessionStorageService();
            // this.nLocalStorageService = new NLocalStorageService();
        }
        /**
         * @param {?} tokensObj
         * @param {?=} isRemember
         * @return {?}
         */
        NTokenService.prototype.updateTokens = /**
         * @param {?} tokensObj
         * @param {?=} isRemember
         * @return {?}
         */
            function (tokensObj, isRemember) {
                var /** @type {?} */ userObj = this.decodeToken(tokensObj['accessToken']);
                this.nSessionStorage.setValue('accessToken', tokensObj['accessToken']);
                this.nSessionStorage.setValue('refreshToken', tokensObj['refreshToken']);
                this.nSessionStorage.setValue('userObj', JSON.stringify(userObj));
                if ((isRemember || this.nLocalStorageService.getValue('accessToken'))) {
                    this.nLocalStorageService.setValue('accessToken', tokensObj['accessToken']);
                    this.nLocalStorageService.setValue('refreshToken', tokensObj['refreshToken']);
                    this.nLocalStorageService.setValue('userObj', JSON.stringify(userObj));
                }
            };
        /**
         * @return {?}
         */
        NTokenService.prototype.updateSessionStorage = /**
         * @return {?}
         */
            function () {
                this.updateTokens(this.nLocalStorageService.getStorage(), true);
            };
        /**
         * @param {?} str
         * @return {?}
         */
        NTokenService.prototype.urlBase64Decode = /**
         * @param {?} str
         * @return {?}
         */
            function (str) {
                var /** @type {?} */ output = str.replace(/-/g, '+').replace(/_/g, '/');
                switch (output.length % 4) {
                    case 0: {
                        break;
                    }
                    case 2: {
                        output += '==';
                        break;
                    }
                    case 3: {
                        output += '=';
                        break;
                    }
                    default: {
                        throw 'Illegal base64url string!';
                    }
                }
                return this.b64DecodeUnicode(output);
            };
        /**
         * @param {?} str
         * @return {?}
         */
        NTokenService.prototype.b64decode = /**
         * @param {?} str
         * @return {?}
         */
            function (str) {
                var /** @type {?} */ chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
                var /** @type {?} */ output = '';
                str = String(str).replace(/=+$/, '');
                if (str.length % 4 == 1) {
                    throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");
                }
                for (
                // initialize result and counters
                var /** @type {?} */ bc = 0, /** @type {?} */ bs = void 0, /** @type {?} */ buffer = void 0, /** @type {?} */ idx = 0; 
                // get next character
                buffer = str.charAt(idx++); 
                // character found in table? initialize bit storage and add its ascii value;
                ~buffer && (bs = bc % 4 ? bs * 64 + buffer : buffer,
                    // and if not first of each 4 characters,
                    // convert the first 8 bits to one ascii character
                    bc++ % 4) ? output += String.fromCharCode(255 & bs >> (-2 * bc & 6)) : 0) {
                    // try to find character in table (0-63, not found => -1)
                    buffer = chars.indexOf(buffer);
                }
                return output;
            };
        /**
         * @param {?} str
         * @return {?}
         */
        NTokenService.prototype.b64DecodeUnicode = /**
         * @param {?} str
         * @return {?}
         */
            function (str) {
                return decodeURIComponent(Array.prototype.map.call(this.b64decode(str), function (c) {
                    return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
                }).join(''));
            };
        /**
         * @param {?} token
         * @return {?}
         */
        NTokenService.prototype.decodeToken = /**
         * @param {?} token
         * @return {?}
         */
            function (token) {
                var /** @type {?} */ parts = token.split('.');
                if (parts.length !== 3) {
                    throw new Error('JWT must have 3 parts');
                }
                var /** @type {?} */ decoded = this.urlBase64Decode(parts[1]);
                if (!decoded) {
                    throw new Error('Cannot decode the token');
                }
                return JSON.parse(decoded);
            };
        /**
         * @param {?} token
         * @return {?}
         */
        NTokenService.prototype.getTokenExpirationDate = /**
         * @param {?} token
         * @return {?}
         */
            function (token) {
                var /** @type {?} */ decoded;
                decoded = this.decodeToken(token);
                if (!decoded.hasOwnProperty('exp')) {
                    return null;
                }
                var /** @type {?} */ date = new Date(0); // The 0 here is the key, which sets the date to the epoch
                date.setUTCSeconds(decoded.exp);
                return date;
            };
        /**
         * @param {?} token
         * @param {?=} offsetSeconds
         * @return {?}
         */
        NTokenService.prototype.isTokenExpired = /**
         * @param {?} token
         * @param {?=} offsetSeconds
         * @return {?}
         */
            function (token, offsetSeconds) {
                var /** @type {?} */ date = this.getTokenExpirationDate(token);
                offsetSeconds = offsetSeconds || 0;
                if (date == null) {
                    return false;
                }
                // Token expired?
                return !(date.valueOf() > (new Date().valueOf() + (offsetSeconds * 1000)));
            };
        NTokenService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        NTokenService.ctorParameters = function () {
            return [
                { type: NLocalStorageService, },
            ];
        };
        return NTokenService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var /** @type {?} */ ServiceName = "PubSub Service";
    var NPubSubService = (function () {
        function NPubSubService() {
            this.events = {};
        }
        /**
         * @param {?} event
         * @param {?=} callback
         * @param {?=} error
         * @param {?=} complete
         * @return {?}
         */
        NPubSubService.prototype.$sub = /**
         * @param {?} event
         * @param {?=} callback
         * @param {?=} error
         * @param {?=} complete
         * @return {?}
         */
            function (event, callback, error, complete) {
                if (!event) {
                    throw new Error("[" + ServiceName + "] => Subscription method must get event name.");
                }
                if (this.events[event] === undefined) {
                    this.events[event] = new Subject.Subject();
                }
                if (typeof callback !== 'function') {
                    return this.events[event].asObservable();
                }
                else {
                    return this.events[event].asObservable().subscribe(callback, error, complete);
                }
            };
        /**
         * @param {?} event
         * @param {?=} eventObject
         * @return {?}
         */
        NPubSubService.prototype.$pub = /**
         * @param {?} event
         * @param {?=} eventObject
         * @return {?}
         */
            function (event, eventObject) {
                if (!event) {
                    throw new Error("[" + ServiceName + "] => Publish method must get event name.");
                }
                else if (!this.events[event]) {
                    return;
                }
                this.events[event].next(eventObject);
            };
        NPubSubService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        NPubSubService.ctorParameters = function () { return []; };
        return NPubSubService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NLogoutService = (function () {
        // nLocalStorageService = new NLocalStorageService();
        function NLogoutService(nLocalStorageService) {
            this.nLocalStorageService = nLocalStorageService;
            this.nSessionStorage = new NSessionStorageService();
        }
        /**
         * @return {?}
         */
        NLogoutService.prototype.logout = /**
         * @return {?}
         */
            function () {
                this.nSessionStorage.clearSessionStorage();
                this.nLocalStorageService.clearLocalStorage();
                return true;
            };
        NLogoutService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        NLogoutService.ctorParameters = function () {
            return [
                { type: NLocalStorageService, },
            ];
        };
        return NLogoutService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NHTTPLoaderService = (function () {
        function NHTTPLoaderService(nLogoutService, nPubSubService) {
            this.nLogoutService = nLogoutService;
            this.nPubSubService = nPubSubService;
            this.pendingRequests = 0;
            this.showLoading = false;
            this._isHTTPRequestInProgress = new Subject.Subject();
            this._isHTTPRequestInProgress$ = this._isHTTPRequestInProgress.asObservable();
        }
        /**
         * @param {?} bool
         * @return {?}
         */
        NHTTPLoaderService.prototype.isHTTPRequestInProgress = /**
         * @param {?} bool
         * @return {?}
         */
            function (bool) {
                if (bool) {
                    this.pendingRequests++;
                    if (!this.showLoading) {
                        this._isHTTPRequestInProgress.next(bool);
                    }
                    this.showLoading = true;
                }
                else {
                    this.pendingRequests--;
                    if (this.pendingRequests <= 0) {
                        if (this.showLoading) {
                            this._isHTTPRequestInProgress.next(bool);
                        }
                        this.showLoading = false;
                    }
                }
            };
        /**
         * @param {?} error
         * @return {?}
         */
        NHTTPLoaderService.prototype.alertError = /**
         * @param {?} error
         * @return {?}
         */
            function (error) {
                if (error.status < 200 || error.status > 500) {
                    if (error.status === 0) {
                        this.nPubSubService.$pub('openSnackBar', 'Connectivity issue');
                    }
                    else {
                        this.nPubSubService.$pub('openSnackBar', 'Response failure');
                    }
                }
                else if (error.status === 401) {
                    this.nLogoutService.logout();
                    if (error.error) {
                        this.nPubSubService.$pub('openSnackBar', error.error);
                    }
                    else {
                        this.nPubSubService.$pub('openSnackBar', error);
                    }
                }
                else if (error.error) {
                    if (error.error instanceof Object) {
                        this.nPubSubService.$pub('openSnackBar', error.error.message);
                    }
                    else {
                        this.nPubSubService.$pub('openSnackBar', error.error);
                    }
                }
                else {
                    this.nPubSubService.$pub('openSnackBar', 'Response failure');
                }
            };
        NHTTPLoaderService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        NHTTPLoaderService.ctorParameters = function () {
            return [
                { type: NLogoutService, },
                { type: NPubSubService, },
            ];
        };
        return NHTTPLoaderService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NNotificationService = (function () {
        function NNotificationService(localStorageService, pubSubService, http$$1, bHttpLoader) {
            var _this = this;
            this.localStorageService = localStorageService;
            this.pubSubService = pubSubService;
            this.http = http$$1;
            this.bHttpLoader = bHttpLoader;
            this.systemService = NSystemService.getInstance();
            this.possiblePushTypes = ['APNS', 'FCM'];
            this.firebaseSenderId = this.systemService.getVal('firebaseSenderId');
            this.isNotificationEnabled = this.systemService.getVal('isNotificationEnabled');
            this.appName = this.systemService.getVal('appName');
            this.deviceType = this.systemService.deviceType;
            this.sessionStorage = new NSessionStorageService();
            this.loginSubscribe = this.pubSubService.$sub('firebaseRegister', function () {
                _this.enableNotification();
            });
        }
        /**
         * @return {?}
         */
        NNotificationService.prototype.ngOnInit = /**
         * @return {?}
         */
            function () {
            };
        /**
         * @return {?}
         */
        NNotificationService.prototype.enableNotification = /**
         * @return {?}
         */
            function () {
                var _this = this;
                var /** @type {?} */ pushType = this.getPushType(this.systemService.getVal('pushType'));
                document.addEventListener('deviceready', function (event) {
                    if (_this.isNotificationEnabled) {
                        if (_this.deviceType && _this.deviceType != 'browser') {
                            _this.deviceType = _this.systemService.deviceType;
                            _this.checkPermission(pushType).then(function (res) {
                                if (res) {
                                    _this.initializeNotifications(pushType);
                                }
                            });
                        }
                    }
                });
                if (this.isNotificationEnabled && pushType !== 'APNS') {
                    if (this.deviceType && this.deviceType == 'browser' && window['Notification']) {
                        this.initialiseWebPush();
                    }
                }
            };
        /**
         * @return {?}
         */
        NNotificationService.prototype.initialiseWebPush = /**
         * @return {?}
         */
            function () {
                var /** @type {?} */ __this = this;
                var /** @type {?} */ messaging = firebase.messaging();
                messaging.requestPermission()
                    .then(function () {
                    return messaging.getToken();
                })
                    .then(function (token) {
                    if (token) {
                        __this.sendRegDetails(token);
                    }
                })
                    .catch(function (err) {
                    __this.bHttpLoader.alertError(err);
                });
                messaging.onMessage(function (payload) {
                    if (payload['notification']) {
                        var /** @type {?} */ notificationObj = payload['notification'];
                        var /** @type {?} */ options = {
                            body: notificationObj.body,
                            icon: notificationObj.icon
                        };
                        // creating a native browser message
                        var /** @type {?} */ notificationUI = new Notification(notificationObj.title, options);
                        notificationUI.onclick = function () {
                            window.focus(); // window is focused when the user clicks the notification using this
                        };
                    }
                });
            };
        /**
         * @param {?=} pushType
         * @return {?}
         */
        NNotificationService.prototype.checkPermission = /**
         * @param {?=} pushType
         * @return {?}
         */
            function (pushType) {
                var _this = this;
                // Android & iOS only
                // Checks whether the push notification permission has been granted.
                return new Promise(function (resolve) {
                    pushType = _this.getPushType(pushType);
                    if ((_this.deviceType === 'Android' || _this.deviceType === 'iOS') && (pushType === 'FCM')) {
                        PushNotification.hasPermission(function (data) {
                            return resolve(data.isEnabled);
                        });
                    }
                    else if (_this.deviceType === 'iOS' && pushType === 'APNS') {
                        APNSPushNotification.hasPermission(function (data) {
                            return resolve(data.isEnabled);
                        });
                    }
                    else {
                        return resolve(true);
                    }
                });
            };
        /**
         * @param {?=} pushType
         * @return {?}
         */
        NNotificationService.prototype.initializeNotifications = /**
         * @param {?=} pushType
         * @return {?}
         */
            function (pushType) {
                var _this = this;
                //pushType = pushType ? pushType : 'FCM';
                pushType = this.getPushType(pushType);
                var /** @type {?} */ push;
                // Default if for FCM
                if (pushType === 'FCM') {
                    push = window['PushNotification'].init({
                        android: {
                            senderID: this.firebaseSenderId
                        },
                        ios: {
                            alert: "true",
                            badge: "true",
                            sound: "true",
                            senderID: this.firebaseSenderId
                        },
                    });
                }
                else if (pushType === 'APNS') {
                    push = window['APNSPushNotification'].init({
                        ios: {
                            alert: "true",
                            badge: "true",
                            sound: "true"
                        }
                    });
                }
                push.on('registration', function (data) {
                    // data.registrationId
                    // data.registrationId
                    _this.sendRegDetails(data.registrationId);
                });
                // ToDo Christy get call back function from app user to change what happens once a notification arrives
                push.on('notification', function (data) {
                    window['cordova'].plugins.notification.local.schedule({
                        title: data.title,
                        text: data.message,
                        sound: data.sound,
                        at: new Date().getTime()
                    });
                });
                push.on('error', function (e) {
                    // e.message
                    console.error(e);
                });
            };
        /**
         * @param {?} registrationId
         * @return {?}
         */
        NNotificationService.prototype.sendRegDetails = /**
         * @param {?} registrationId
         * @return {?}
         */
            function (registrationId) {
                this.localStorageService.setValue('registrationId', registrationId);
                var /** @type {?} */ url = this.systemService.getTenantUrl() + 'notification/' + this.systemService.getVal('appName') + '/register';
                var /** @type {?} */ pushType = this.getPushType(this.systemService.getVal('pushType'));
                this.http.post(url, {
                    'key': this.sessionStorage.getValue('userObj')['userKey'],
                    'uuid': this.localStorageService.getValue('uuid'),
                    'fbregid': registrationId,
                    'pushType': pushType
                }).subscribe(function (result) {
                    // this.pubSubService.$pub('FBRegComp');
                }, function (error) {
                    console.log(error);
                });
            };
        /**
         * @param {?} currPushType
         * @return {?}
         */
        NNotificationService.prototype.getPushType = /**
         * @param {?} currPushType
         * @return {?}
         */
            function (currPushType) {
                var /** @type {?} */ isValidPush = typeof currPushType !== 'undefined' && this.possiblePushTypes.includes(currPushType.toUpperCase());
                var /** @type {?} */ pushType = isValidPush ? currPushType.toUpperCase() : 'FCM';
                return pushType;
            };
        /**
         * @return {?}
         */
        NNotificationService.prototype.ngOnDestroy = /**
         * @return {?}
         */
            function () {
                this.loginSubscribe.unSubscribe();
            };
        NNotificationService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        NNotificationService.ctorParameters = function () {
            return [
                { type: NLocalStorageService, },
                { type: NPubSubService, },
                { type: http.HttpClient, },
                { type: NHTTPLoaderService, },
            ];
        };
        return NNotificationService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NLoginService = (function () {
        function NLoginService(http$$1, pubSubService, notificationService, nLocalStorageService, nTokenService) {
            this.http = http$$1;
            this.pubSubService = pubSubService;
            this.notificationService = notificationService;
            this.nLocalStorageService = nLocalStorageService;
            this.nTokenService = nTokenService;
            this.loginCompleted = new core.EventEmitter();
            this.systemService = NSystemService.getInstance();
            // this.nTokenService = new NTokenService();
            this.nSessionStorage = new NSessionStorageService();
            // this.nLocalStorageService = new NLocalStorageService();
        }
        /**
         * @param {?} userName
         * @param {?} password
         * @param {?=} isRemember
         * @return {?}
         */
        NLoginService.prototype.login = /**
         * @param {?} userName
         * @param {?} password
         * @param {?=} isRemember
         * @return {?}
         */
            function (userName, password, isRemember) {
                var _this = this;
                this.appProperties = this.systemService.getVal('properties');
                this.loginUrl = this.systemService.getAuthUrl() + this.appProperties.appName;
                this.uuid = this.nLocalStorageService.getValue('uuid');
                if (!this.uuid) {
                    this.uuid = this.nLocalStorageService.checkDeviceId();
                }
                this.details = {
                    username: userName,
                    password: password,
                };
                this.details.platformDetails = this.systemService.getPlatformDetails(this.systemService.checkDevice());
                this.details.platformDetails['uuid'] = this.uuid;
                return this.http.post(this.loginUrl, JSON.stringify(this.details)).map(function (result) {
                    var /** @type {?} */ tokensObj = result;
                    if (tokensObj) {
                        _this.nTokenService.updateTokens(tokensObj, isRemember);
                    }
                    // TODO chris array of supported pushes currently only support APNS and Firebase
                    if ((_this.systemService.getVal('firebaseSenderId') != 'FIREBASE_SENDER_ID' && _this.systemService.getVal('firebaseAuthKey') != 'FIREBASE_AUTH_KEY')
                        || (_this.systemService.getVal('pushType') === 'APNS' && _this.systemService.isIOS())) {
                        _this.pubSubService.$pub('firebaseRegister');
                    }
                    _this.pubSubService.$pub('loginComplete');
                    return (result);
                }, function (error) {
                    return (error);
                });
            };
        /**
         * @return {?}
         */
        NLoginService.prototype.isLoggedIn = /**
         * @return {?}
         */
            function () {
                var _this = this;
                return this.nLocalStorageService.initStorage().then(function (result) {
                    if (_this.nSessionStorage.getValue('accessToken') && _this.nSessionStorage.getValue('refreshToken') &&
                        _this.nSessionStorage.getValue('accessToken') != 'null' && _this.nSessionStorage.getValue('refreshToken') != 'null') {
                        return true;
                    }
                    return false;
                }).catch(function (error) {
                    return false;
                });
            };
        NLoginService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        NLoginService.ctorParameters = function () {
            return [
                { type: http.HttpClient, },
                { type: NPubSubService, },
                { type: NNotificationService, },
                { type: NLocalStorageService, },
                { type: NTokenService, },
            ];
        };
        NLoginService.propDecorators = {
            "loginCompleted": [{ type: core.Output },],
        };
        return NLoginService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NAuthGuardService = (function () {
        function NAuthGuardService(nLoginService, router$$1) {
            this.nLoginService = nLoginService;
            this.router = router$$1;
        }
        /**
         * @return {?}
         */
        NAuthGuardService.prototype.canActivate = /**
         * @return {?}
         */
            function () {
                var _this = this;
                return this.nLoginService.isLoggedIn().then(function (result) {
                    if (result) {
                        return true;
                    }
                    else {
                        _this.router.navigate(['unauthorized']);
                        return false;
                    }
                });
            };
        NAuthGuardService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        NAuthGuardService.ctorParameters = function () {
            return [
                { type: NLoginService, },
                { type: router.Router, },
            ];
        };
        return NAuthGuardService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NDataModelService = (function () {
        function NDataModelService(http$$1) {
            this.http = http$$1;
            this.invalidDataModelName = 'Invalid data model name.';
            this.invalidDataModelId = 'Invalid data model id.';
            this.invalidDataModelObj = 'Invalid data model object.';
            this.systemService = NSystemService.getInstance();
        }
        // GET /{tenantName}/datamodel/{datasource}/{appName}/{dataModelName}
        /**
         *
         * @param dataModelName
         * @param filter The filter query parameter allows to specify conditions on the documents to return.
         * The filter qparam value is any mongodb query… Defaults to {}
         * @param keys Projections to be applited on mongo db.
         * @param sort sort to be applied on the query results. Defaults to {}
         * @param pagenumber Page number for paginated queries. Defaults to 1
         * @param pagesize Size of each page to be returned. Defaults to 100.
         */
        /**
         *
         * @param {?} dataModelName
         * @param {?=} filter The filter query parameter allows to specify conditions on the documents to return.
         * The filter qparam value is any mongodb query… Defaults to {}
         * @param {?=} keys Projections to be applited on mongo db.
         * @param {?=} sort sort to be applied on the query results. Defaults to {}
         * @param {?=} pagenumber Page number for paginated queries. Defaults to 1
         * @param {?=} pagesize Size of each page to be returned. Defaults to 100.
         * @return {?}
         */
        NDataModelService.prototype.get = /**
         *
         * @param {?} dataModelName
         * @param {?=} filter The filter query parameter allows to specify conditions on the documents to return.
         * The filter qparam value is any mongodb query… Defaults to {}
         * @param {?=} keys Projections to be applited on mongo db.
         * @param {?=} sort sort to be applied on the query results. Defaults to {}
         * @param {?=} pagenumber Page number for paginated queries. Defaults to 1
         * @param {?=} pagesize Size of each page to be returned. Defaults to 100.
         * @return {?}
         */
            function (dataModelName, filter, keys, sort, pagenumber, pagesize) {
                if (dataModelName) {
                    // let modelNameUrl = `${this.getDataSourceURL(dataModelName)}${dataModelName}`;
                    var /** @type {?} */ modelNameUrl = this.getDataSourceURL(dataModelName) + dataModelName;
                    if (this.checkIfValid(filter) || this.checkIfValid(keys) || this.checkIfValid(sort) ||
                        this.checkIfValid(pagenumber) || this.checkIfValid(pagesize)) {
                        var /** @type {?} */ queryString = "" + this.toQueryString({
                            'filter': filter,
                            'keys': keys,
                            'sort': sort,
                            'pagenumber': pagenumber,
                            'pagesize': pagesize
                        });
                        if (queryString === '') {
                            queryString += '?filter={}';
                        }
                        else {
                            queryString = '?'.concat(queryString);
                        }
                        modelNameUrl += queryString;
                    }
                    return this.http.get(modelNameUrl).map(function (value, index) {
                        return value;
                    }).catch(function (error) {
                        return Observable.Observable.throw(error);
                    });
                }
                else {
                    return Observable.Observable.throw(new Error("Could not get " + dataModelName + ". " + this.invalidDataModelName));
                }
            };
        // PUT /{tenantName}/datamodel/{datasource}/{appName}/{dataModelName}
        /**
         *
         * @param dataModelName Data model name of the app
         * @param dataModelObj Data Model object which is to be inserted
         */
        /**
         *
         * @param {?} dataModelName Data model name of the app
         * @param {?} dataModelObj Data Model object which is to be inserted
         * @return {?}
         */
        NDataModelService.prototype.put = /**
         *
         * @param {?} dataModelName Data model name of the app
         * @param {?} dataModelObj Data Model object which is to be inserted
         * @return {?}
         */
            function (dataModelName, dataModelObj) {
                if (dataModelName) {
                    if (dataModelObj) {
                        // const modelNameUrl = `${this.getDataSourceURL(dataModelName)}${dataModelName}`;
                        var /** @type {?} */ modelNameUrl = this.getDataSourceURL(dataModelName) + dataModelName;
                        return this.http.put(modelNameUrl, dataModelObj).map(function (value, index) {
                            return value;
                        }).catch(function (error) {
                            return Observable.Observable.throw(error);
                        });
                    }
                    else {
                        return Observable.Observable.throw(new Error("Could not put " + dataModelObj + " in " + dataModelName + ". " + this.invalidDataModelObj));
                    }
                }
                else {
                    return Observable.Observable.throw(new Error("Could not put " + dataModelObj + " in " + dataModelName + ". " + this.invalidDataModelName));
                }
            };
        // DELETE /{tenantName}/datamodel/{datasource}/{appName}/{dataModelName}
        /**
         *
         * @param dataModelName
         * @param filter
         */
        /**
         *
         * @param {?} dataModelName
         * @param {?} filter
         * @return {?}
         */
        NDataModelService.prototype.delete = /**
         *
         * @param {?} dataModelName
         * @param {?} filter
         * @return {?}
         */
            function (dataModelName, filter) {
                var /** @type {?} */ modelNameUrl;
                if (dataModelName) {
                    // modelNameUrl = `${this.getDataSourceURL(dataModelName)}${dataModelName}`;
                    modelNameUrl = this.getDataSourceURL(dataModelName) + dataModelName;
                    if (this.checkIfValid(filter) && filter != '') {
                        modelNameUrl += "?filter=" + filter;
                    }
                    else {
                        modelNameUrl += '?filter={}';
                    }
                    return this.http.delete(modelNameUrl).map(function (value, index) {
                        return value;
                    }).catch(function (error) {
                        return Observable.Observable.throw(error);
                    });
                }
                else {
                    return Observable.Observable.throw(new Error("Could not delete " + dataModelName + ". " + this.invalidDataModelName));
                }
            };
        // PATCH /{tenantName}/datamodel/{datasource}/{appName}/{dataModelName}
        /**
         *
         * @param dataModelName Data model name which is to be updated
         * @param dataModelObj New data model object
         */
        /**
         *
         * @param {?} dataModelName Data model name which is to be updated
         * @param {?} updateObject
         * @return {?}
         */
        NDataModelService.prototype.update = /**
         *
         * @param {?} dataModelName Data model name which is to be updated
         * @param {?} updateObject
         * @return {?}
         */
            function (dataModelName, updateObject) {
                if (dataModelName && updateObject) {
                    // const modelNameUrl = `${this.getDataSourceURL(dataModelName)}${dataModelName}`;
                    var /** @type {?} */ modelNameUrl = this.getDataSourceURL(dataModelName) + dataModelName;
                    return this.http.patch(modelNameUrl, updateObject).map(function (value, index) {
                        return value;
                    }).catch(function (error) {
                        return Observable.Observable.throw(error);
                    });
                }
                else {
                    return Observable.Observable.throw(new Error("Could not update " + dataModelName + ". " + this.invalidDataModelName));
                }
            };
        // GET /{tenantName}/datamodel/{datasource}/{appName}/{dataModelName}/{dataModelId}
        /**
         *
         * @param dataModelName Data model name which is to be updated
         * @param dataModelId Data model id which is to be updated
         */
        /**
         *
         * @param {?} dataModelName Data model name which is to be updated
         * @param {?} dataModelId Data model id which is to be updated
         * @return {?}
         */
        NDataModelService.prototype.getById = /**
         *
         * @param {?} dataModelName Data model name which is to be updated
         * @param {?} dataModelId Data model id which is to be updated
         * @return {?}
         */
            function (dataModelName, dataModelId) {
                if (dataModelName) {
                    if (dataModelId) {
                        // const modelNameUrl = `${this.getDataSourceURL(dataModelName)}${dataModelName}/${dataModelId}`;
                        var /** @type {?} */ modelNameUrl = this.getDataSourceURL(dataModelName) + dataModelName + "/" + dataModelId;
                        return this.http.get(modelNameUrl).map(function (value, index) {
                            return value;
                        }).catch(function (error) {
                            return Observable.Observable.throw(error);
                        });
                    }
                    else {
                        Observable.Observable.throw(new Error("Could not get " + dataModelName + " by id " + dataModelId + ". " + this.invalidDataModelId));
                    }
                }
                else {
                    Observable.Observable.throw(new Error("Could not get " + dataModelName + " by id " + dataModelId + ". " + this.invalidDataModelName));
                }
            };
        // DELETE /{tenantName}/datamodel/{datasource}/{appName}/{dataModelName}/{dataModelId}
        /**
         *
         * @param dataModelName Data model name which is to be deleted
         * @param dataModelId Data model id which is to be deleted
         */
        /**
         *
         * @param {?} dataModelName Data model name which is to be deleted
         * @param {?} dataModelId Data model id which is to be deleted
         * @return {?}
         */
        NDataModelService.prototype.deleteById = /**
         *
         * @param {?} dataModelName Data model name which is to be deleted
         * @param {?} dataModelId Data model id which is to be deleted
         * @return {?}
         */
            function (dataModelName, dataModelId) {
                if (dataModelName) {
                    if (dataModelId) {
                        // const modelNameUrl = `${this.getDataSourceURL(dataModelName)}${dataModelName}/${dataModelId}`;
                        var /** @type {?} */ modelNameUrl = this.getDataSourceURL(dataModelName) + dataModelName + "/" + dataModelId;
                        return this.http.delete(modelNameUrl).map(function (value, index) {
                            return value;
                        }).catch(function (error) {
                            return Observable.Observable.throw(error);
                        });
                    }
                    else {
                        Observable.Observable.throw(new Error("Could not get " + dataModelName + " by id " + dataModelId + ". " + this.invalidDataModelId));
                    }
                }
                else {
                    return Observable.Observable.throw(new Error("Could not delete " + dataModelName + " by id " + dataModelId + ". " + this.invalidDataModelName));
                }
            };
        //PATCH /{tenantName}/datamodel/{datasource}/{appName}/{dataModelName}/{dataModelId}
        /**
         *
         * @param dataModelName Data model name which is to be update
         * @param dataModelId Data model id which is to be updated
         * @param dataModelObj Data Model object which is to be inserted
         */
        /**
         *
         * @param {?} dataModelName Data model name which is to be update
         * @param {?} dataModelId Data model id which is to be updated
         * @param {?} dataModelObj Data Model object which is to be inserted
         * @return {?}
         */
        NDataModelService.prototype.updateById = /**
         *
         * @param {?} dataModelName Data model name which is to be update
         * @param {?} dataModelId Data model id which is to be updated
         * @param {?} dataModelObj Data Model object which is to be inserted
         * @return {?}
         */
            function (dataModelName, dataModelId, dataModelObj) {
                if (dataModelName) {
                    if (dataModelId) {
                        // const modelNameUrl = `${this.getDataSourceURL(dataModelName)}${dataModelName}/${dataModelId}`;
                        var /** @type {?} */ modelNameUrl = this.getDataSourceURL(dataModelName) + dataModelName + "/" + dataModelId;
                        var /** @type {?} */ dmObj = Object.assign({}, dataModelObj);
                        delete dmObj['_id'];
                        return this.http.patch(modelNameUrl, dmObj).map(function (value, index) {
                            return value;
                        }).catch(function (error) {
                            return Observable.Observable.throw(error);
                        });
                    }
                    else {
                        Observable.Observable.throw(new Error("Could not get " + dataModelName + " by id " + dataModelId + ". " + this.invalidDataModelId));
                    }
                }
                else {
                    return Observable.Observable.throw(new Error("Could not delete " + dataModelName + " by id " + dataModelId + ". " + this.invalidDataModelName));
                }
            };
        /**
         * @param {?} obj
         * @return {?}
         */
        NDataModelService.prototype.toQueryString = /**
         * @param {?} obj
         * @return {?}
         */
            function (obj) {
                var /** @type {?} */ parts = [];
                for (var /** @type {?} */ i in obj) {
                    if (obj.hasOwnProperty(i) && this.checkIfValid(obj[i])) {
                        parts.push((i) + '=' + JSON.stringify(obj[i]));
                    }
                }
                return parts.join('&');
            };
        /**
         * @param {?} value
         * @return {?}
         */
        NDataModelService.prototype.checkIfValid = /**
         * @param {?} value
         * @return {?}
         */
            function (value) {
                if (value === undefined || value == null) {
                    return false;
                }
                else {
                    return true;
                }
            };
        /**
         * @param {?} dataModelName
         * @return {?}
         */
        NDataModelService.prototype.getDataSourceURL = /**
         * @param {?} dataModelName
         * @return {?}
         */
            function (dataModelName) {
                if (!this.dmDs) {
                    this.dmDs = window['neutrinos']['dataSource'];
                }
                var /** @type {?} */ dsDm = this.dmDs[dataModelName];
                var /** @type {?} */ properties = this.systemService.properties;
                if (dsDm) {
                    return properties.baseUrl + properties.tenantName + '/datamodel/' + dsDm + '/' + properties.appName + '/';
                }
                else {
                    return this.systemService.getDataModelUrl();
                }
            };
        NDataModelService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        NDataModelService.ctorParameters = function () {
            return [
                { type: http.HttpClient, },
            ];
        };
        return NDataModelService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NHttpService = (function () {
        function NHttpService(nHTTPLoader, inj, nLocalStorageService, nTokenService) {
            this.nHTTPLoader = nHTTPLoader;
            this.inj = inj;
            this.nLocalStorageService = nLocalStorageService;
            this.nTokenService = nTokenService;
            this.timeout = 90000;
            this.isRefreshingToken = false;
            this.tokenSubject = new Rx.BehaviorSubject(null);
            this.systemService = NSystemService.getInstance();
            this.nSessionStorage = new NSessionStorageService();
            this.appProperties = this.systemService.getVal('properties');
            this.nPubSubService = new NPubSubService();
        }
        /**
         * @param {?} req
         * @param {?} next
         * @return {?}
         */
        NHttpService.prototype.intercept = /**
         * @param {?} req
         * @param {?} next
         * @return {?}
         */
            function (req, next) {
                var _this = this;
                this.requestInterceptor();
                // Pass on the cloned request instead of the original request.
                return next.handle(this.requestOptions(req))
                    .timeout(this.timeout)
                    .catch(function (error) { return _this.onCatch(error, req, next); })
                    .finally(function () {
                    _this.onFinally();
                });
            };
        /**
         * @param {?} error
         * @param {?} req
         * @param {?} next
         * @return {?}
         */
        NHttpService.prototype.updateToken = /**
         * @param {?} error
         * @param {?} req
         * @param {?} next
         * @return {?}
         */
            function (error, req, next) {
                var _this = this;
                if (this.appProperties.appAuthenticationStrategy === 'activeDirectory' ||
                    this.appProperties.appAuthenticationStrategy === 'localAuth') {
                    if (!this.isRefreshingToken) {
                        this.isRefreshingToken = true;
                        // Reset here so that the following requests wait until the token
                        // comes back from the refreshToken call.
                        this.tokenSubject.next(null);
                        return this.refreshToken()
                            .switchMap(function (tokensObj) {
                            if (tokensObj) {
                                _this.nTokenService.updateTokens(tokensObj);
                                var /** @type {?} */ newToken = tokensObj['accessToken'];
                                _this.tokenSubject.next(newToken);
                                return next.handle(_this.requestOptions(req));
                            }
                            return Rx.Observable.throw(new Error('Can\'t refresh the token'));
                        })
                            .catch(function (err) { return _this.onCatchError(err); })
                            .finally(function () { return _this.isRefreshingToken = false; });
                    }
                    else {
                        return this.tokenSubject
                            .filter(function (token) { return token != null; })
                            .take(1)
                            .switchMap(function (token) { return next.handle(_this.requestOptions(req)); });
                    }
                }
                else {
                    return this.onCatchError(error);
                }
            };
        /**
         * @return {?}
         */
        NHttpService.prototype.refreshToken = /**
         * @return {?}
         */
            function () {
                var /** @type {?} */ http$$1 = this.inj.get(http.HttpClient);
                var /** @type {?} */ appProperties = this.systemService.getVal('properties');
                var /** @type {?} */ refreshUrl = this.systemService.getAuthUrl() + appProperties.appName + '/refresh';
                var /** @type {?} */ body = {
                    'platformDetails': this.systemService.getPlatformDetails(this.systemService.checkDevice()),
                    'userKey': this.nSessionStorage.getValue('userObj')['userKey'],
                    'refreshToken': this.nSessionStorage.getValue('refreshToken')
                };
                body.platformDetails['uuid'] = this.nLocalStorageService.getValue('uuid');
                return http$$1.post(refreshUrl, body);
            };
        /**
         * Request options.
         * @param {?=} req
         * @return {?} HttpRequest
         */
        NHttpService.prototype.requestOptions = /**
         * Request options.
         * @param {?=} req
         * @return {?} HttpRequest
         */
            function (req) {
                var /** @type {?} */ headers = req.headers;
                if (req.headers == null) {
                    headers = new http.HttpHeaders();
                }
                req = req.clone({
                    url: this.getFullUrl(req.url),
                    headers: headers
                });
                var /** @type {?} */ baseUrl = NSystemService.getInstance().getVal('baseUrl');
                var /** @type {?} */ isArt = (baseUrl !== '' && req.url.includes(baseUrl));
                return isArt ? this.addDefaultHeaders(req) : req;
            };
        /**
         * Default options.
         * @param {?} req
         * @return {?} HttpHeadedrs
         */
        NHttpService.prototype.addDefaultHeaders = /**
         * Default options.
         * @param {?} req
         * @return {?} HttpHeadedrs
         */
            function (req) {
                /**
                     * TODO: Add all default Headers over here
                     */
                if (!req.headers.has('Access-Control-Allow-Origin')) {
                    req.headers = req.headers.set('Access-Control-Allow-Origin', '*');
                }
                if (!req.headers.has('Content-Type')) {
                    req.headers = req.headers.set('Content-Type', 'application/json');
                }
                else if (req.headers.has('Content-Type') && (req.headers.get('Content-Type') === 'no-content')) {
                    req.headers = req.headers.delete('Content-Type');
                }
                if (!req.headers.has('Accept')) {
                    req.headers = req.headers.set('Accept', 'application/json');
                }
                if (!req.headers.has('Authorization')) {
                    this.appProperties = this.systemService.getVal('properties');
                    if (this.appProperties && this.appProperties.appAuthenticationStrategy === 'basicAuth') {
                        var /** @type {?} */ username = void 0, /** @type {?} */ password = void 0;
                        if (this.appProperties.basicAuthUser && this.appProperties.basicAuthPassword) {
                            username = this.appProperties.basicAuthUser;
                            password = this.appProperties.basicAuthPassword;
                        }
                        else {
                            username = "bhive-art-proxyuser";
                            password = "password";
                            console.warn("Authentication strategy: Basic Auth. basicAuthUser and basicAuthPassword are not configured in environment. Setting default values.");
                        }
                        req.headers = req.headers.set('Authorization', 'Basic ' + btoa(username + ":" + password));
                    }
                    else if (this.appProperties && (this.appProperties.appAuthenticationStrategy === 'activeDirectory' ||
                        this.appProperties.appAuthenticationStrategy === 'localAuth')) {
                        if (this.nSessionStorage.getValue('accessToken')) {
                            req.headers = req.headers.set('Authorization', 'Bearer ' + this.nSessionStorage.getValue('accessToken'));
                        }
                    }
                }
                return req;
            };
        /**
         * Build API url.
         * @param {?} url
         * @return {?} string
         */
        NHttpService.prototype.getFullUrl = /**
         * Build API url.
         * @param {?} url
         * @return {?} string
         */
            function (url) {
                // return full URL to API here
                return url;
            };
        /**
         * Request interceptor.
         * @return {?}
         */
        NHttpService.prototype.requestInterceptor = /**
         * Request interceptor.
         * @return {?}
         */
            function () {
                this.nHTTPLoader.isHTTPRequestInProgress(true);
            };
        /**
         * Response interceptor.
         * @return {?}
         */
        NHttpService.prototype.responseInterceptor = /**
         * Response interceptor.
         * @return {?}
         */
            function () {
                this.nHTTPLoader.isHTTPRequestInProgress(false);
            };
        /**
         * Error handler.
         * @param {?} error
         * @param {?} req
         * @param {?} next
         * @return {?} ErrorObservable
         */
        NHttpService.prototype.onCatch = /**
         * Error handler.
         * @param {?} error
         * @param {?} req
         * @param {?} next
         * @return {?} ErrorObservable
         */
            function (error, req, next) {
                if (error instanceof http.HttpErrorResponse) {
                    if (((error)).status === 403 && ((error)).error.message === 'jwt expired') {
                        return this.updateToken(error, req, next);
                    }
                    else {
                        return this.onSubscribeError(error);
                    }
                }
                else {
                    return this.onSubscribeError(error);
                }
            };
        /**
         * onSubscribeError
         * @param {?} err
         * @return {?}
         */
        NHttpService.prototype.onSubscribeError = /**
         * onSubscribeError
         * @param {?} err
         * @return {?}
         */
            function (err) {
                this.nHTTPLoader.alertError(err);
                return this.onCatchError(err);
            };
        /**
         * onFinally
         * @return {?}
         */
        NHttpService.prototype.onFinally = /**
         * onFinally
         * @return {?}
         */
            function () {
                this.responseInterceptor();
            };
        /**
         * @param {?} error
         * @return {?}
         */
        NHttpService.prototype.onCatchError = /**
         * @param {?} error
         * @return {?}
         */
            function (error) {
                return Rx.Observable.throw(error);
            };
        NHttpService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        NHttpService.ctorParameters = function () {
            return [
                { type: NHTTPLoaderService, },
                { type: core.Injector, },
                { type: NLocalStorageService, },
                { type: NTokenService, },
            ];
        };
        return NHttpService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var NSnackbarService = (function () {
        function NSnackbarService(nPubSubService) {
            var _this = this;
            this.nPubSubService = nPubSubService;
            this.snackService = new Subject.Subject();
            if (NSystemService.getInstance().getVal('useDefaultExceptionUI')) {
                this.snackBarListner = this.nPubSubService.$sub('openSnackBar', function (msg) {
                    _this.openSnackBar(msg);
                });
            }
        }
        /**
         * @return {?}
         */
        NSnackbarService.prototype.get = /**
         * @return {?}
         */
            function () {
                return this.snackService.asObservable();
            };
        /**
         * @param {?} data
         * @return {?}
         */
        NSnackbarService.prototype.add = /**
         * @param {?} data
         * @return {?}
         */
            function (data) {
                this.snackService.next({
                    action: 'add',
                    data: data
                });
            };
        /**
         * @param {?} id
         * @return {?}
         */
        NSnackbarService.prototype.remove = /**
         * @param {?} id
         * @return {?}
         */
            function (id) {
                this.snackService.next({ action: 'remove', id: id });
            };
        /**
         * @return {?}
         */
        NSnackbarService.prototype.clear = /**
         * @return {?}
         */
            function () {
                this.snackService.next({ action: 'clear' });
            };
        /**
         * @param {?} message
         * @param {?=} timeout
         * @return {?}
         */
        NSnackbarService.prototype.openSnackBar = /**
         * @param {?} message
         * @param {?=} timeout
         * @return {?}
         */
            function (message, timeout) {
                this.add({
                    msg: message,
                    timeout: timeout || 5000,
                    action: {
                        text: 'Close',
                        onClick: function (snack) {
                        },
                    },
                    onAdd: function (snack) {
                    },
                    onRemove: function (snack) {
                    }
                });
            };
        NSnackbarService.decorators = [
            { type: core.Injectable },
        ];
        /** @nocollapse */
        NSnackbarService.ctorParameters = function () {
            return [
                { type: NPubSubService, },
            ];
        };
        return NSnackbarService;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var SnackComponent = (function () {
        function SnackComponent() {
        }
        SnackComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'n-snack',
                        template: "\n     <div class=\"snack\" [ngStyle]=\"{background: background ? background : '#323232' , color: color ? color : '#fff'}\" [ngClass]=\" ['snackbar-layout', 'customClass' ]\">\n          <ng-content></ng-content>\n       </div> \n  ",
                        styles: [".snack-action{cursor:pointer;color:#2196f3;font-weight:700}.container{display:flex;flex-direction:row;flex-wrap:wrap}.child{width:60%;flex:1 0;margin-right:.5em}.snackbars.bottom-center{align-items:middle;left:50%;-webkit-transform:translate(-50%,0);transform:translate(-50%,0);bottom:1px;align-items:center}.snackbars{position:fixed;z-index:99999;max-width:100%;word-wrap:break-word;display:inline;font-family:Roboto;letter-spacing:1px}.snack{padding:1em;border-radius:.3em;max-height:50vh;overflow:auto}"]
                    },] },
        ];
        /** @nocollapse */
        SnackComponent.propDecorators = {
            "background": [{ type: core.Input },],
            "color": [{ type: core.Input },],
            "customClass": [{ type: core.Input },],
        };
        return SnackComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    var SnackbarComponent = (function () {
        function SnackbarComponent(snackbarService) {
            var _this = this;
            this.snackbarService = snackbarService;
            this.max = 1;
            this.onAdd = new core.EventEmitter();
            this.onRemove = new core.EventEmitter();
            this.onClear = new core.EventEmitter();
            this.snacks = [];
            this.snackbarService.get()
                .subscribe(function (snack) {
                if (snack.action === 'add') {
                    _this.add(snack.data);
                }
                else if (snack.action === 'remove') {
                    _this.remove(snack.id);
                }
                else if (snack.action === 'clear') {
                    _this.clear();
                }
            });
        }
        /**
         * @param {?} snack
         * @return {?}
         */
        SnackbarComponent.prototype.add = /**
         * @param {?} snack
         * @return {?}
         */
            function (snack) {
                var _this = this;
                var /** @type {?} */ timeout;
                var /** @type {?} */ id = this.uuid();
                if (this.max && this.max > 0 && this.snacks.length === this.max) {
                    this.remove(this.snacks[0].id);
                }
                if (snack.timeout || this.timeout) {
                    timeout = setTimeout(function () {
                        _this.remove(id);
                    }, snack.timeout || this.timeout);
                }
                var /** @type {?} */ data = Object.assign({ id: id, timeoutObj: timeout }, snack);
                if (snack.action) {
                    var /** @type {?} */ that_1 = this;
                    var /** @type {?} */ fcn_1 = snack.action.onClick || new Function();
                    snack.action.onClick = function () {
                        fcn_1(data);
                        that_1.remove(id);
                    };
                }
                if (snack.onAdd) {
                    snack.onAdd(data);
                }
                if (this.onAdd) {
                    this.onAdd.emit(data);
                }
                this.snacks.push(data);
            };
        /**
         * @param {?} id
         * @return {?}
         */
        SnackbarComponent.prototype.remove = /**
         * @param {?} id
         * @return {?}
         */
            function (id) {
                var /** @type {?} */ snack = this.snacks.find(function (obj) { return obj.id === id; });
                if (snack) {
                    if (snack.onRemove) {
                        snack.onRemove(snack);
                    }
                    if (this.onRemove) {
                        this.onRemove.emit(snack);
                    }
                    if (snack.timeoutObj) {
                        clearTimeout(snack.timeoutObj);
                    }
                }
                this.snacks = this.snacks.filter(function (obj) { return obj.id !== id; });
            };
        /**
         * @return {?}
         */
        SnackbarComponent.prototype.clear = /**
         * @return {?}
         */
            function () {
                // this.snacks.forEach(snack => {
                //   this.remove(snack.id);
                // });
                this.snacks = [];
                if (this.onClear) {
                    this.onClear.emit(true);
                }
            };
        /**
         * @return {?}
         */
        SnackbarComponent.prototype.uuid = /**
         * @return {?}
         */
            function () {
                // tslint:disable:no-bitwise
                return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {
                    var /** @type {?} */ r = Math.random() * 16 | 0, /** @type {?} */ v = c === 'x' ? r : (r & 0x3 | 0x8);
                    return v.toString(16);
                });
                // tslint:enable:no-bitwise
            };
        /**
         * @param {?} background
         * @return {?}
         */
        SnackbarComponent.prototype.calcTextColor = /**
         * @param {?} background
         * @return {?}
         */
            function (background) {
                if (!background) {
                    return null;
                }
                /**
                 * @param {?} hex
                 * @return {?}
                 */
                function hexToRgb(hex) {
                    var /** @type {?} */ shorthandRegex = /^#?([a-f\d])([a-f\d])([a-f\d])$/i;
                    hex = hex.replace(shorthandRegex, function (m, r, g, b) {
                        return r + r + g + g + b + b;
                    });
                    var /** @type {?} */ result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
                    return result ? {
                        r: parseInt(result[1], 16),
                        g: parseInt(result[2], 16),
                        b: parseInt(result[3], 16)
                    } : null;
                }
                var /** @type {?} */ rgb = hexToRgb(background);
                if (!rgb) {
                    return null;
                }
                var /** @type {?} */ color = [rgb.r / 255, rgb.g / 255, rgb.b / 255];
                for (var /** @type {?} */ i = 0; i < color.length; ++i) {
                    if (color[i] <= 0.03928) {
                        color[i] = color[i] / 12.92;
                    }
                    else {
                        color[i] = Math.pow((color[i] + 0.055) / 1.055, 2.4);
                    }
                }
                var /** @type {?} */ l = 0.2126 * color[0] + 0.7152 * color[1] + 0.0722 * color[2];
                if (l > 0.179) {
                    return '#000';
                }
                else {
                    return '#fff';
                }
            };
        SnackbarComponent.decorators = [
            { type: core.Component, args: [{
                        selector: 'n-snackbar',
                        template: "\n      <div class=\"snackbars\" [ngClass]=\"position || 'bottom-center'\">\n          <n-snack   *ngFor=\"let snackbar of snacks\" [background]=\"snackbar.background || background\"\n                        [customClass]=\"snackbar.customClass || customClass\"\n                        [color]=\"snackbar.color || color || calcTextColor(snackbar.background || background)\">\n              <div class=\"container\">\n              <div class=\"snack-text child\" >\n                  {{snackbar.msg}}\n              </div>\n              <div *ngIf=\"snackbar.action.text\" class=\"snack-action\" (click)=\"snackbar.action.onClick()\"\n                   [ngStyle]=\"{color: snackbar.action.color || accent}\">\n                  {{snackbar.action.text}}\n              </div>\n              </div>\n          </n-snack>\n      </div>\n  ",
                        styles: [".snack-action{cursor:pointer;color:#2196f3;font-weight:700}.container{display:flex;flex-direction:row;flex-wrap:wrap}.child{width:60%;flex:1 0;margin-right:.5em}.snackbars.bottom-center{align-items:middle;left:50%;-webkit-transform:translate(-50%,0);transform:translate(-50%,0);bottom:1px;align-items:center}.snackbars{position:fixed;z-index:99999;max-width:100%;word-wrap:break-word;display:inline;font-family:Roboto;letter-spacing:1px}.snack{padding:1em;border-radius:.3em;max-height:50vh;overflow:auto}"]
                    },] },
        ];
        /** @nocollapse */
        SnackbarComponent.ctorParameters = function () {
            return [
                { type: NSnackbarService, },
            ];
        };
        SnackbarComponent.propDecorators = {
            "position": [{ type: core.Input },],
            "max": [{ type: core.Input },],
            "background": [{ type: core.Input },],
            "accent": [{ type: core.Input },],
            "color": [{ type: core.Input },],
            "customClass": [{ type: core.Input },],
            "timeout": [{ type: core.Input },],
            "onAdd": [{ type: core.Output },],
            "onRemove": [{ type: core.Output },],
            "onClear": [{ type: core.Output },],
        };
        return SnackbarComponent;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */
    /**
     * @param {?} startupService
     * @return {?}
     */
    function startupServiceFactory(startupService) {
        var /** @type {?} */ res = function () {
            // console.log('module before initstorage call');
            return startupService.initStorage();
        };
        return res;
    }
    var NeutrinosSeedServicesModule = (function () {
        function NeutrinosSeedServicesModule() {
        }
        NeutrinosSeedServicesModule.decorators = [
            { type: core.NgModule, args: [{
                        imports: [
                            common.CommonModule,
                            http.HttpClientModule,
                            router.RouterModule,
                            http$1.HttpModule,
                            ngforage.NgForageModule.forRoot()
                        ],
                        providers: [
                            {
                                provide: http.HTTP_INTERCEPTORS,
                                useClass: NHttpService,
                                multi: true
                            },
                            {
                                // Provider for APP_INITIALIZER
                                provide: core.APP_INITIALIZER,
                                useFactory: startupServiceFactory,
                                deps: [NLocalStorageService],
                                multi: true
                            },
                            NAuthGuardService,
                            NDataModelService,
                            NHttpService,
                            NHTTPLoaderService,
                            NLocalStorageService,
                            NLoginService,
                            NLogoutService,
                            NNotificationService,
                            NSnackbarService,
                            NPubSubService,
                            NSessionStorageService,
                            NTokenService
                        ],
                        declarations: [
                            SnackComponent,
                            SnackbarComponent
                        ],
                        exports: [
                            SnackComponent,
                            SnackbarComponent
                        ]
                    },] },
        ];
        return NeutrinosSeedServicesModule;
    }());

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    /**
     * @fileoverview added by tsickle
     * @suppress {checkTypes} checked by tsc
     */

    exports.NAuthGuardService = NAuthGuardService;
    exports.NDataModelService = NDataModelService;
    exports.NHttpService = NHttpService;
    exports.NHTTPLoaderService = NHTTPLoaderService;
    exports.NLocalStorageService = NLocalStorageService;
    exports.NLoginService = NLoginService;
    exports.NLogoutService = NLogoutService;
    exports.NNotificationService = NNotificationService;
    exports.NSnackbarService = NSnackbarService;
    exports.NSystemService = NSystemService;
    exports.NTokenService = NTokenService;
    exports.NUtility = NUtility;
    exports.NPubSubService = NPubSubService;
    exports.NSessionStorageService = NSessionStorageService;
    exports.SnackbarComponent = SnackbarComponent;
    exports.startupServiceFactory = startupServiceFactory;
    exports.NeutrinosSeedServicesModule = NeutrinosSeedServicesModule;
    exports.ɵa = SnackComponent;

    Object.defineProperty(exports, '__esModule', { value: true });

})));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmV1dHJpbm9zLXNlZWQtc2VydmljZXMudW1kLmpzLm1hcCIsInNvdXJjZXMiOlsibmc6Ly9uZXV0cmlub3Mtc2VlZC1zZXJ2aWNlcy9zcmMvYXBwL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL24tc3lzdGVtLnNlcnZpY2UudHMiLCJuZzovL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL3NyYy9hcHAvbmV1dHJpbm9zLXNlZWQtc2VydmljZXMvbi1zZXNzaW9uU3RvcmFnZS5zZXJ2aWNlLnRzIiwibmc6Ly9uZXV0cmlub3Mtc2VlZC1zZXJ2aWNlcy9zcmMvYXBwL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL24tdXRpbC5zZXJ2aWNlLnRzIiwibmc6Ly9uZXV0cmlub3Mtc2VlZC1zZXJ2aWNlcy9zcmMvYXBwL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL24tbG9jYWxTdG9yYWdlLnNlcnZpY2UudHMiLCJuZzovL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL3NyYy9hcHAvbmV1dHJpbm9zLXNlZWQtc2VydmljZXMvbi10b2tlbi5zZXJ2aWNlLnRzIiwibmc6Ly9uZXV0cmlub3Mtc2VlZC1zZXJ2aWNlcy9zcmMvYXBwL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL24tcHViU3ViLnNlcnZpY2UudHMiLCJuZzovL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL3NyYy9hcHAvbmV1dHJpbm9zLXNlZWQtc2VydmljZXMvbi1sb2dvdXQuc2VydmljZS50cyIsIm5nOi8vbmV1dHJpbm9zLXNlZWQtc2VydmljZXMvc3JjL2FwcC9uZXV0cmlub3Mtc2VlZC1zZXJ2aWNlcy9uLUhUVFBMb2FkZXIuc2VydmljZS50cyIsIm5nOi8vbmV1dHJpbm9zLXNlZWQtc2VydmljZXMvc3JjL2FwcC9uZXV0cmlub3Mtc2VlZC1zZXJ2aWNlcy9uLW5vdGlmaWNhdGlvbi5zZXJ2aWNlLnRzIiwibmc6Ly9uZXV0cmlub3Mtc2VlZC1zZXJ2aWNlcy9zcmMvYXBwL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL24tbG9naW4uc2VydmljZS50cyIsIm5nOi8vbmV1dHJpbm9zLXNlZWQtc2VydmljZXMvc3JjL2FwcC9uZXV0cmlub3Mtc2VlZC1zZXJ2aWNlcy9uLWF1dGhHYXVyZC5zZXJ2aWNlLnRzIiwibmc6Ly9uZXV0cmlub3Mtc2VlZC1zZXJ2aWNlcy9zcmMvYXBwL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL24tZGF0YU1vZGVsLnNlcnZpY2UudHMiLCJuZzovL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL3NyYy9hcHAvbmV1dHJpbm9zLXNlZWQtc2VydmljZXMvbi1IVFRQLnNlcnZpY2UudHMiLCJuZzovL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL3NyYy9hcHAvbmV1dHJpbm9zLXNlZWQtc2VydmljZXMvbi1zbmFja2Jhci5zZXJ2aWNlLnRzIiwibmc6Ly9uZXV0cmlub3Mtc2VlZC1zZXJ2aWNlcy9zcmMvYXBwL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL3NuYWNrYmFyL3NuYWNrL3NuYWNrLmNvbXBvbmVudC50cyIsIm5nOi8vbmV1dHJpbm9zLXNlZWQtc2VydmljZXMvc3JjL2FwcC9uZXV0cmlub3Mtc2VlZC1zZXJ2aWNlcy9zbmFja2Jhci9zbmFja2Jhci9zbmFja2Jhci5jb21wb25lbnQudHMiLCJuZzovL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzL3NyYy9hcHAvbmV1dHJpbm9zLXNlZWQtc2VydmljZXMvbmV1dHJpbm9zLXNlZWQtc2VydmljZXMubW9kdWxlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGltcG9ydCB7IGVudmlyb25tZW50IH0gZnJvbSAnLi4vLi4vZW52aXJvbm1lbnRzL2Vudmlyb25tZW50JztcbmltcG9ydCB7IE5VdGlsaXR5IH0gZnJvbSAnLi9uLXV0aWwuc2VydmljZSc7XG5pbXBvcnQgeyBOTG9jYWxTdG9yYWdlU2VydmljZSB9IGZyb20gJy4vbi1sb2NhbFN0b3JhZ2Uuc2VydmljZSc7XG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgKiBhcyBwbGF0Zm9ybSBmcm9tICdwbGF0Zm9ybSc7XG5cbi8vIEBkeW5hbWljXG5leHBvcnQgY2xhc3MgTlN5c3RlbVNlcnZpY2Uge1xuICBwcml2YXRlIHN0YXRpYyBpbnN0YW5jZTogTlN5c3RlbVNlcnZpY2U7XG5cbiAgcHJpdmF0ZSBfZGV2aWNlVHlwZTogc3RyaW5nO1xuICAvLyBwcml2YXRlIF9kZXZpY2VVVUlEO1xuICB1dWlkO1xuICBwcm9wZXJ0aWVzO1xuICBzdGF0aWMgZW52UHJvcGVydGllcztcbiAgc3RhdGljIGdldEluc3RhbmNlKCkge1xuICAgIGlmICghdGhpcy5pbnN0YW5jZSkge1xuICAgICAgdGhpcy5pbnN0YW5jZSA9IG5ldyBOU3lzdGVtU2VydmljZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5pbnN0YW5jZTtcbiAgfVxuXG4gIHByaXZhdGUgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fZGV2aWNlVHlwZSA9IHRoaXMuY2hlY2tEZXZpY2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRlciBhbmQgZ2V0dGVyIGZvciB0aGUgZW52aXJvbm1lbnRzXG4gICAqL1xuXG4gIC8vIHNldCBlbnZpcm9ubWVudHMocHJvcGVydGllcykge1xuICAvLyAgIGNvbnNvbGUubG9nKHByb3BlcnRpZXMpO1xuICAvLyAgIE5TeXN0ZW1TZXJ2aWNlLmVudlByb3BlcnRpZXMgPSBwcm9wZXJ0aWVzO1xuICAvLyAgIHRoaXMucHJvcGVydGllcyA9IHRoaXMuZ2V0VmFsKCdwcm9wZXJ0aWVzJyk7XG4gIC8vIH1cblxuICAvLyBnZXQgZW52aXJvbm1lbnRzKCkge1xuICAvLyAgIHJldHVybiBOU3lzdGVtU2VydmljZS5lbnZQcm9wZXJ0aWVzO1xuICAvLyB9XG5cbiAgLyoqXG4gICAqIFJldHVybmEgJ21vYmlsZScgb3IgJ2Jyb3dzZXInIGJhc2VkIG9uIHRoZSBwbGF0Zm9ybVxuICAgKi9cbiAgY2hlY2tEZXZpY2UoKTogc3RyaW5nIHtcbiAgICBpZiAod2luZG93WydkZXZpY2UnXSAmJiAod2luZG93WydkZXZpY2UnXVsncGxhdGZvcm0nXSAhPSAnYnJvd3NlcicgfHwgd2luZG93WydkZXZpY2UnXVsncGxhdGZvcm0nXSAhPSAnQnJvd3NlcicpKSB7XG4gICAgICByZXR1cm4gJ21vYmlsZSc7XG4gICAgfSBlbHNlIGlmICh3aW5kb3dbJ2RldmljZSddICYmICh3aW5kb3dbJ2RldmljZSddWydwbGF0Zm9ybSddID09ICdicm93c2VyJyB8fCB3aW5kb3dbJ2RldmljZSddWydwbGF0Zm9ybSddID09ICdCcm93c2VyJykpIHtcbiAgICAgIHJldHVybiAnY29yZG92YV9icm93c2VyJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICdicm93c2VyJztcbiAgICB9XG4gIH1cblxuXG4gIHB1YmxpYyBnZXQgZGV2aWNlVHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGV2aWNlVHlwZTtcbiAgfVxuXG5cblxuICBwdWJsaWMgZ2V0VmFsKGtleSkge1xuICAgIGlmICghTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcykge1xuICAgICAgTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcyA9IHdpbmRvd1snbmV1dHJpbm9zJ11bJ2Vudmlyb25tZW50cyddO1xuICAgICAgdGhpcy5wcm9wZXJ0aWVzID0gTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcy5wcm9wZXJ0aWVzO1xuICAgIH1cblxuICAgIGlmIChrZXkgPT0gJ3Byb3BlcnRpZXMnKSB7XG4gICAgICBpZiAoTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4gTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcy5wcm9wZXJ0aWVzO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKE5TeXN0ZW1TZXJ2aWNlLmVudlByb3BlcnRpZXMgJiYgTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcy5wcm9wZXJ0aWVzKSB7XG4gICAgICAgIHJldHVybiBOU3lzdGVtU2VydmljZS5lbnZQcm9wZXJ0aWVzLnByb3BlcnRpZXNba2V5XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICB9XG5cbiAgfVxuXG4gIHB1YmxpYyBpc0FuZHJvaWQoKSB7XG4gICAgaWYgKHdpbmRvd1snZGV2aWNlJ10gJiYgd2luZG93WydkZXZpY2UnXVsncGxhdGZvcm0nXSA9PSAnQW5kcm9pZCcpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGlzSU9TKCkge1xuICAgIGlmICh3aW5kb3dbJ2RldmljZSddICYmIHdpbmRvd1snZGV2aWNlJ11bJ3BsYXRmb3JtJ10gPT0gJ2lPUycpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldEFuZHJvaWRWZXJzaW9uKCkge1xuICAgIGlmICh0aGlzLmlzQW5kcm9pZCgpKSB7XG4gICAgICByZXR1cm4gd2luZG93WydkZXZpY2UnXVsndmVyc2lvbiddO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldEF1dGhVcmwoKSB7XG4gICAgLy8gdGhpcy5wcm9wZXJ0aWVzID0gdGhpcy5nZXRWYWwoJ3Byb3BlcnRpZXMnKTtcbiAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmJhc2VVcmwgKyB0aGlzLnByb3BlcnRpZXMudGVuYW50TmFtZSArICcvYXV0aC8nO1xuICB9XG4gIHB1YmxpYyBnZXRUZW5hbnRVcmwoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5iYXNlVXJsICsgdGhpcy5wcm9wZXJ0aWVzLnRlbmFudE5hbWUgKyAnLyc7XG4gIH1cblxuICBwdWJsaWMgZ2V0QXBwVXJsKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuYmFzZVVybCArIHRoaXMucHJvcGVydGllcy50ZW5hbnROYW1lICsgJy9wcm94eS8nICsgdGhpcy5wcm9wZXJ0aWVzLmFwcE5hbWUgKyAnLyc7XG4gIH1cblxuICBwdWJsaWMgZ2V0UHJveHlVcmwoKSB7XG4gICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5iYXNlVXJsICsgdGhpcy5wcm9wZXJ0aWVzLnRlbmFudE5hbWUgKyAnL3Byb3h5Lyc7XG4gIH1cblxuICBwdWJsaWMgZ2V0RGF0YU1vZGVsVXJsKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuYmFzZVVybCArIHRoaXMucHJvcGVydGllcy50ZW5hbnROYW1lICsgJy9kYXRhbW9kZWwvJyArIHRoaXMucHJvcGVydGllcy5hcHBEYXRhU291cmNlICsgJy8nICsgdGhpcy5wcm9wZXJ0aWVzLmFwcE5hbWUgKyAnLyc7XG4gIH1cblxuICBwdWJsaWMgZ2V0RmlsZUlPVXJsKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuYmFzZVVybCArIHRoaXMucHJvcGVydGllcy50ZW5hbnROYW1lICsgJy9maWxlaW8vJyArXG4gICAgICB0aGlzLnByb3BlcnRpZXMuYXBwRGF0YVNvdXJjZSArICcvJyArIHRoaXMucHJvcGVydGllcy5hcHBOYW1lICsgJy8nO1xuICB9XG5cbiAgcHVibGljIGdldFBsYXRmb3JtRGV0YWlscyh0eXBlKSB7XG4gICAgY29uc3QgcERldGFpbHMgPSB7XG4gICAgICBwbGF0Zm9ybTogcGxhdGZvcm0ub3MuZmFtaWx5LFxuICAgICAgcGxhdGZvcm1WZXJzaW9uOiBwbGF0Zm9ybS5vcy52ZXJzaW9uLFxuICAgIH07XG4gICAgaWYgKHR5cGUgPT09ICdicm93c2VyJykge1xuICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24ocERldGFpbHMsIHtcbiAgICAgICAgdHlwZTogJ2Jyb3dzZXInLFxuICAgICAgICBicm93c2VyOiBwbGF0Zm9ybS5uYW1lLFxuICAgICAgICBicm93c2VyVmVyc2lvbjogcGxhdGZvcm0udmVyc2lvbixcbiAgICAgIH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ21vYmlsZScgfHwgdHlwZSA9PT0gJ2NvcmRvdmFfYnJvd3NlcicpIHtcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHBEZXRhaWxzLCB7XG4gICAgICAgIHR5cGU6ICdtb2JpbGUnLFxuICAgICAgICBtb2RlbDogd2luZG93WydkZXZpY2UnXS5tb2RlbCxcbiAgICAgICAgbWFudWZhY3R1cmVyOiB3aW5kb3dbJ2RldmljZSddLm1hbnVmYWN0dXJlcixcbiAgICAgICAgaXNWaXJ0dWFsOiB3aW5kb3dbJ2RldmljZSddLmlzVmlydHVhbFxuICAgICAgfSk7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBOU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlIHtcbiAgc3RhdGljIHNlc3Npb25TdG9yYWdlQ2FjaGU6IGFueSA9IHt9O1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBOU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlLnNlc3Npb25TdG9yYWdlQ2FjaGUgPSBzZXNzaW9uU3RvcmFnZTtcbiAgfVxuXG4gIGdldFNlc3Npb25TdG9yYWdlKCkge1xuICAgIHJldHVybiBOU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlLnNlc3Npb25TdG9yYWdlQ2FjaGU7XG4gIH1cblxuICBzZXRWYWx1ZShrZXksIHZhbHVlKSB7XG4gICAgTlNlc3Npb25TdG9yYWdlU2VydmljZS5zZXNzaW9uU3RvcmFnZUNhY2hlW2tleV0gPSB2YWx1ZTtcbiAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpXG4gIH1cblxuICBnZXRWYWx1ZShrZXkpIHtcbiAgICBpZiAoIU5TZXNzaW9uU3RvcmFnZVNlcnZpY2Uuc2Vzc2lvblN0b3JhZ2VDYWNoZVtrZXldKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IG9iaiA9IE5TZXNzaW9uU3RvcmFnZVNlcnZpY2Uuc2Vzc2lvblN0b3JhZ2VDYWNoZVtrZXldO1xuICAgICAgcmV0dXJuIEpTT04ucGFyc2Uob2JqKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcmV0dXJuIE5TZXNzaW9uU3RvcmFnZVNlcnZpY2Uuc2Vzc2lvblN0b3JhZ2VDYWNoZVtrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJlbW92ZShrZXkpIHtcbiAgICBpZiAoTlNlc3Npb25TdG9yYWdlU2VydmljZS5zZXNzaW9uU3RvcmFnZUNhY2hlLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgIGRlbGV0ZSBOU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlLnNlc3Npb25TdG9yYWdlQ2FjaGVba2V5XTtcbiAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICB9XG4gIH1cblxuICBjbGVhclNlc3Npb25TdG9yYWdlKCkge1xuICAgIE5TZXNzaW9uU3RvcmFnZVNlcnZpY2Uuc2Vzc2lvblN0b3JhZ2VDYWNoZSA9IHt9O1xuICAgIHNlc3Npb25TdG9yYWdlLmNsZWFyKCk7XG4gIH1cblxufVxuIiwiZXhwb3J0IGNsYXNzIE5VdGlsaXR5IHtcbiAgXG4gICAgY29uc3RydWN0b3IoKSB7IH1cbiAgXG4gICAgZ2VuZXJhdGVVVUlEKCkge1xuICAgICAgcmV0dXJuIHRoaXMuX19zNCgpICsgdGhpcy5fX3M0KCkgKyAnLScgKyB0aGlzLl9fczQoKSArICctJyArIHRoaXMuX19zNCgpICsgJy0nICsgdGhpcy5fX3M0KCkgKyAnLScgKyB0aGlzLl9fczQoKSArIHRoaXMuX19zNCgpICsgdGhpcy5fX3M0KCk7XG4gICAgfVxuICBcbiAgICBfX3M0KCkge1xuICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApXG4gICAgICAgIC50b1N0cmluZygxNilcbiAgICAgICAgLnN1YnN0cmluZygxKTtcbiAgICB9XG4gIH0iLCJpbXBvcnQgeyBOU3lzdGVtU2VydmljZSB9IGZyb20gJy4vbi1zeXN0ZW0uc2VydmljZSc7XG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgKiBhcyBsb2NhbGZvcmFnZSBmcm9tICdsb2NhbGZvcmFnZSc7XG5pbXBvcnQgeyBOZ0ZvcmFnZSwgTmdGb3JhZ2VDYWNoZSwgTmdGb3JhZ2VDb25maWcsIENhY2hlZEl0ZW0gfSBmcm9tICduZ2ZvcmFnZSc7XG5pbXBvcnQgeyBOVXRpbGl0eSB9IGZyb20gJy4vbi11dGlsLnNlcnZpY2UnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgTkxvY2FsU3RvcmFnZVNlcnZpY2Uge1xuXG4gIHN0b3JhZ2VDYWNoZTogYW55ID0ge307XG4gIHByaXZhdGUgX2RldmljZVVVSUQ7XG4gIHByaXZhdGUgbmF0aXZlU3RvcmFnZUk7XG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbmdmQ29uZmlnPzogTmdGb3JhZ2VDb25maWcsIHByaXZhdGUgcmVhZG9ubHkgbmdmPzogTmdGb3JhZ2UsIHByaXZhdGUgcmVhZG9ubHkgbmdmQ2FjaGU/OiBOZ0ZvcmFnZUNhY2hlKSB7XG4gIH1cblxuXG5cbiAgaW5pdFN0b3JhZ2UoKSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmICh3aW5kb3dbJ2NvcmRvdmEnXSkge1xuICAgICAgICB0aGlzLmluaXROZ0ZvcmFnZSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5uZ2YuaXRlcmF0ZSgodmFsdWUsIGtleSwgaXRlcmF0b25OdW1iZXIpID0+IHtcbiAgICAgICAgdGhpcy5zdG9yYWdlQ2FjaGVba2V5XSA9IHZhbHVlO1xuICAgICAgfSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgICB0aGlzLmNoZWNrRGV2aWNlSWQoKTtcbiAgICAgICAgcmV0dXJuIHJlc29sdmUoJ2l0ZXJhdGlvbiBpcyBjb21wbGV0ZWQnKVxuICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICByZXR1cm4gcmVqZWN0KGVycm9yKTtcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIGdldFN0b3JhZ2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RvcmFnZUNhY2hlO1xuICB9XG5cblxuICBzZXRWYWx1ZShrZXksIHZhbHVlKSB7XG4gICAgaWYgKHdpbmRvd1snY29yZG92YSddKSB7XG4gICAgICB0aGlzLmluaXROZ0ZvcmFnZSgpO1xuICAgIH1cbiAgICB0aGlzLnN0b3JhZ2VDYWNoZVtrZXldID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXMubmdmLnNldEl0ZW0oa2V5LCB2YWx1ZSkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LCBlcnJvciA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfSlcbiAgfVxuXG4gIGdldFZhbHVlKGtleSk6IGFueSB8IFByb21pc2U8YW55PiB7XG4gICAgaWYgKCF0aGlzLnN0b3JhZ2VDYWNoZVtrZXldKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9IHRyeSB7XG4gICAgICBjb25zdCBvYmogPSB0aGlzLnN0b3JhZ2VDYWNoZVtrZXldXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShvYmopO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdG9yYWdlQ2FjaGVba2V5XTtcbiAgICB9XG4gIH1cblxuICByZW1vdmUoa2V5KSB7XG4gICAgZGVsZXRlIHRoaXMuc3RvcmFnZUNhY2hlW2tleV07XG4gICAgaWYgKHdpbmRvd1snY29yZG92YSddKSB7XG4gICAgICB0aGlzLmluaXROZ0ZvcmFnZSgpO1xuICAgIH1cbiAgICB0aGlzLm5nZi5yZW1vdmVJdGVtKGtleSkudGhlbihmdWxmaWxsZWQgPT4ge1xuICAgICAgZGVsZXRlIHRoaXMubmdmW2tleV07XG4gICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignQ291bGQgbm90IHJlbW92ZScsIGtleSk7XG4gICAgfSlcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuc3RvcmFnZUNhY2hlID0ge307XG4gICAgdGhpcy5uZ2YuY2xlYXIoKTtcbiAgfVxuXG4gIHByaXZhdGUgcGx1Z2luQ2hlY2soKSB7XG4gICAgaWYgKHdpbmRvd1snY29yZG92YSddICYmIHdpbmRvd1snTmF0aXZlU3RvcmFnZSddKSB7XG4gICAgICB0aGlzLm5hdGl2ZVN0b3JhZ2VJID0gd2luZG93WydOYXRpdmVTdG9yYWdlJ107XG4gICAgICAvLyByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gdGhpcy5pbml0U3RvcmFnZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXRJdGVtTnMoa2V5KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGlmICh3aW5kb3dbJ2NvcmRvdmEnXSAmJiB3aW5kb3dbJ05hdGl2ZVN0b3JhZ2UnXSkge1xuICAgICAgICB0aGlzLm5hdGl2ZVN0b3JhZ2VJLmdldEl0ZW0oa2V5LCByZXN1bHQgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgc2V0SXRlbU5zKGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKHdpbmRvd1snY29yZG92YSddICYmIHdpbmRvd1snTmF0aXZlU3RvcmFnZSddKSB7XG4gICAgICAgIHRoaXMubmF0aXZlU3RvcmFnZUkuc2V0SXRlbShrZXksIHZhbHVlLCByZXN1bHQgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgcmVtb3ZlSXRlbU5zKGtleSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAod2luZG93Wydjb3Jkb3ZhJ10gJiYgd2luZG93WydOYXRpdmVTdG9yYWdlJ10pIHtcbiAgICAgICAgdGhpcy5uYXRpdmVTdG9yYWdlSS5yZW1vdmUoa2V5LCAocmVzdWx0KSA9PiB7XG4gICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgICB9LCAoZXJyb3IpID0+IHtcbiAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgcHJpdmF0ZSBjbGVhck5zKCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICBpZiAod2luZG93Wydjb3Jkb3ZhJ10gJiYgd2luZG93WydOYXRpdmVTdG9yYWdlJ10pIHtcbiAgICAgICAgdGhpcy5uYXRpdmVTdG9yYWdlSS5jbGVhcihyZXN1bHQgPT4ge1xuICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcbiAgICAgICAgfSwgZXJyb3IgPT4ge1xuICAgICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIH0pXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIHByaXZhdGUgaW5pdE5nRm9yYWdlKCkge1xuICAgIHRoaXMubmdmQ29uZmlnLmNvbmZpZ3VyZSh7XG4gICAgICBuYW1lOiAnTXlBcHAnLFxuICAgICAgZHJpdmVyOiBbXG4gICAgICAgIE5nRm9yYWdlQ29uZmlnLkRSSVZFUl9XRUJTUUwsXG4gICAgICBdXG4gICAgfSk7XG5cbiAgfVxuXG4gIHByaXZhdGUgcHJvbWlzZVJlZmxlY3QocHJvbWlzZSkge1xuICAgIHJldHVybiBwcm9taXNlLnRoZW4ocmVzb2x2ZWQgPT4geyByZXR1cm4geyB2OiByZXNvbHZlZCwgc3RhdHVzOiAncmVzb2x2ZWQnIH0gfSwgZXJyb3IgPT4geyByZXR1cm4geyBlOiBlcnJvciwgc3RhdHVzOiAncmVqZWN0ZWQnIH0gfSlcbiAgfVxuXG4gIGNsZWFyTG9jYWxTdG9yYWdlKCkge1xuICAgIHRoaXMucmVtb3ZlKCd1c2VyT2JqJyk7XG4gICAgdGhpcy5yZW1vdmUoJ2FjY2Vzc1Rva2VuJyk7XG4gICAgdGhpcy5yZW1vdmUoJ3JlZnJlc2hUb2tlbicpO1xuICAgIHRoaXMucmVtb3ZlKCdyZWdpc3RyYXRpb25JZCcpO1xuICB9XG5cbiAgLyoqXG4gICAqIER1ZSB0byB0aW1pbmcgaXNzdWVzIGFuZCBjaXJjdWxhciBkZXBlbmRlbmN5IGNoZWNrRGV2aWNlSWQgaXMgbW92ZWQgZnJvbSBOU3lzdGVtU2VydmljZVxuICAqL1xuXG4gIGNoZWNrRGV2aWNlSWQoKSB7XG4gICAgaWYgKE5TeXN0ZW1TZXJ2aWNlLmdldEluc3RhbmNlKCkuY2hlY2tEZXZpY2UoKSA9PT0gJ2Jyb3dzZXInKSB7XG4gICAgICB0aGlzLl9kZXZpY2VVVUlEID0gdGhpcy5nZXRWYWx1ZSgndXVpZCcpO1xuXG4gICAgICBpZiAoIXRoaXMuX2RldmljZVVVSUQpIHtcbiAgICAgICAgdGhpcy5fZGV2aWNlVVVJRCA9IG5ldyBOVXRpbGl0eSgpLmdlbmVyYXRlVVVJRCgpO1xuICAgICAgICB0aGlzLnNldFZhbHVlKCd1dWlkJywgdGhpcy5fZGV2aWNlVVVJRCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHdpbmRvd1sncGx1Z2lucyddLnVuaXF1ZURldmljZUlELmdldCgodXVpZCkgPT4ge1xuICAgICAgICB0aGlzLl9kZXZpY2VVVUlEID0gdXVpZDtcbiAgICAgICAgdGhpcy5zZXRWYWx1ZSgndXVpZCcsIHRoaXMuX2RldmljZVVVSUQpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9kZXZpY2VVVUlEO1xuICB9XG5cbiAgcHVibGljIGdldCBkZXZpY2VVVUlEKCkge1xuICAgIHJldHVybiB0aGlzLl9kZXZpY2VVVUlEO1xuICB9XG59XG4iLCJpbXBvcnQgeyBOU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnLi9uLXNlc3Npb25TdG9yYWdlLnNlcnZpY2UnO1xuaW1wb3J0IHsgTkxvY2FsU3RvcmFnZVNlcnZpY2UgfSBmcm9tICcuL24tbG9jYWxTdG9yYWdlLnNlcnZpY2UnO1xuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgTlRva2VuU2VydmljZSB7XG5cbiAgblNlc3Npb25TdG9yYWdlO1xuICAvLyBuTG9jYWxTdG9yYWdlU2VydmljZTogTkxvY2FsU3RvcmFnZVNlcnZpY2U7XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBuTG9jYWxTdG9yYWdlU2VydmljZTogTkxvY2FsU3RvcmFnZVNlcnZpY2UpIHtcbiAgICB0aGlzLm5TZXNzaW9uU3RvcmFnZSA9IG5ldyBOU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlKCk7XG4gICAgLy8gdGhpcy5uTG9jYWxTdG9yYWdlU2VydmljZSA9IG5ldyBOTG9jYWxTdG9yYWdlU2VydmljZSgpO1xuICB9XG5cbiAgdXBkYXRlVG9rZW5zKHRva2Vuc09iaiwgaXNSZW1lbWJlcj86IEJvb2xlYW4pIHtcbiAgICBsZXQgdXNlck9iaiA9IHRoaXMuZGVjb2RlVG9rZW4odG9rZW5zT2JqWydhY2Nlc3NUb2tlbiddKVxuICAgIHRoaXMublNlc3Npb25TdG9yYWdlLnNldFZhbHVlKCdhY2Nlc3NUb2tlbicsIHRva2Vuc09ialsnYWNjZXNzVG9rZW4nXSk7XG4gICAgdGhpcy5uU2Vzc2lvblN0b3JhZ2Uuc2V0VmFsdWUoJ3JlZnJlc2hUb2tlbicsIHRva2Vuc09ialsncmVmcmVzaFRva2VuJ10pO1xuICAgIHRoaXMublNlc3Npb25TdG9yYWdlLnNldFZhbHVlKCd1c2VyT2JqJywgSlNPTi5zdHJpbmdpZnkodXNlck9iaikpO1xuXG4gICAgaWYgKChpc1JlbWVtYmVyIHx8IHRoaXMubkxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0VmFsdWUoJ2FjY2Vzc1Rva2VuJykpKSB7XG4gICAgICB0aGlzLm5Mb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldFZhbHVlKCdhY2Nlc3NUb2tlbicsIHRva2Vuc09ialsnYWNjZXNzVG9rZW4nXSk7XG4gICAgICB0aGlzLm5Mb2NhbFN0b3JhZ2VTZXJ2aWNlLnNldFZhbHVlKCdyZWZyZXNoVG9rZW4nLCB0b2tlbnNPYmpbJ3JlZnJlc2hUb2tlbiddKTtcbiAgICAgIHRoaXMubkxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0VmFsdWUoJ3VzZXJPYmonLCBKU09OLnN0cmluZ2lmeSh1c2VyT2JqKSk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlU2Vzc2lvblN0b3JhZ2UoKSB7XG4gICAgdGhpcy51cGRhdGVUb2tlbnModGhpcy5uTG9jYWxTdG9yYWdlU2VydmljZS5nZXRTdG9yYWdlKCksIHRydWUpO1xuICB9XG5cbiAgcHVibGljIHVybEJhc2U2NERlY29kZShzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgbGV0IG91dHB1dCA9IHN0ci5yZXBsYWNlKC8tL2csICcrJykucmVwbGFjZSgvXy9nLCAnLycpO1xuICAgIHN3aXRjaCAob3V0cHV0Lmxlbmd0aCAlIDQpIHtcbiAgICAgIGNhc2UgMDogeyBicmVhazsgfVxuICAgICAgY2FzZSAyOiB7IG91dHB1dCArPSAnPT0nOyBicmVhazsgfVxuICAgICAgY2FzZSAzOiB7IG91dHB1dCArPSAnPSc7IGJyZWFrOyB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIHRocm93ICdJbGxlZ2FsIGJhc2U2NHVybCBzdHJpbmchJztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuYjY0RGVjb2RlVW5pY29kZShvdXRwdXQpO1xuICB9XG5cbiAgLy8gY3JlZGl0cyBmb3IgZGVjb2RlciBnb2VzIHRvIGh0dHBzOi8vZ2l0aHViLmNvbS9hdGtcbiAgcHJpdmF0ZSBiNjRkZWNvZGUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGxldCBjaGFycyA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPSc7XG4gICAgbGV0IG91dHB1dDogc3RyaW5nID0gJyc7XG5cbiAgICBzdHIgPSBTdHJpbmcoc3RyKS5yZXBsYWNlKC89KyQvLCAnJyk7XG5cbiAgICBpZiAoc3RyLmxlbmd0aCAlIDQgPT0gMSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiJ2F0b2InIGZhaWxlZDogVGhlIHN0cmluZyB0byBiZSBkZWNvZGVkIGlzIG5vdCBjb3JyZWN0bHkgZW5jb2RlZC5cIik7XG4gICAgfVxuXG4gICAgZm9yIChcbiAgICAgIC8vIGluaXRpYWxpemUgcmVzdWx0IGFuZCBjb3VudGVyc1xuICAgICAgbGV0IGJjOiBudW1iZXIgPSAwLCBiczogYW55LCBidWZmZXI6IGFueSwgaWR4OiBudW1iZXIgPSAwO1xuICAgICAgLy8gZ2V0IG5leHQgY2hhcmFjdGVyXG4gICAgICBidWZmZXIgPSBzdHIuY2hhckF0KGlkeCsrKTtcbiAgICAgIC8vIGNoYXJhY3RlciBmb3VuZCBpbiB0YWJsZT8gaW5pdGlhbGl6ZSBiaXQgc3RvcmFnZSBhbmQgYWRkIGl0cyBhc2NpaSB2YWx1ZTtcbiAgICAgIH5idWZmZXIgJiYgKGJzID0gYmMgJSA0ID8gYnMgKiA2NCArIGJ1ZmZlciA6IGJ1ZmZlcixcbiAgICAgICAgLy8gYW5kIGlmIG5vdCBmaXJzdCBvZiBlYWNoIDQgY2hhcmFjdGVycyxcbiAgICAgICAgLy8gY29udmVydCB0aGUgZmlyc3QgOCBiaXRzIHRvIG9uZSBhc2NpaSBjaGFyYWN0ZXJcbiAgICAgICAgYmMrKyAlIDQpID8gb3V0cHV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoMjU1ICYgYnMgPj4gKC0yICogYmMgJiA2KSkgOiAwXG4gICAgKSB7XG4gICAgICAvLyB0cnkgdG8gZmluZCBjaGFyYWN0ZXIgaW4gdGFibGUgKDAtNjMsIG5vdCBmb3VuZCA9PiAtMSlcbiAgICAgIGJ1ZmZlciA9IGNoYXJzLmluZGV4T2YoYnVmZmVyKTtcbiAgICB9XG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfVxuXG4gIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuL2RvY3MvV2ViL0FQSS9XaW5kb3dCYXNlNjQvQmFzZTY0X2VuY29kaW5nX2FuZF9kZWNvZGluZyNUaGVfVW5pY29kZV9Qcm9ibGVtXG4gIHByaXZhdGUgYjY0RGVjb2RlVW5pY29kZShzdHI6IGFueSkge1xuICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoQXJyYXkucHJvdG90eXBlLm1hcC5jYWxsKHRoaXMuYjY0ZGVjb2RlKHN0ciksIChjOiBhbnkpID0+IHtcbiAgICAgIHJldHVybiAnJScgKyAoJzAwJyArIGMuY2hhckNvZGVBdCgwKS50b1N0cmluZygxNikpLnNsaWNlKC0yKTtcbiAgICB9KS5qb2luKCcnKSk7XG4gIH1cblxuICBwdWJsaWMgZGVjb2RlVG9rZW4odG9rZW46IHN0cmluZyk6IGFueSB7XG4gICAgbGV0IHBhcnRzID0gdG9rZW4uc3BsaXQoJy4nKTtcblxuICAgIGlmIChwYXJ0cy5sZW5ndGggIT09IDMpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSldUIG11c3QgaGF2ZSAzIHBhcnRzJyk7XG4gICAgfVxuXG4gICAgbGV0IGRlY29kZWQgPSB0aGlzLnVybEJhc2U2NERlY29kZShwYXJ0c1sxXSk7XG4gICAgaWYgKCFkZWNvZGVkKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBkZWNvZGUgdGhlIHRva2VuJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIEpTT04ucGFyc2UoZGVjb2RlZCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0VG9rZW5FeHBpcmF0aW9uRGF0ZSh0b2tlbjogc3RyaW5nKTogRGF0ZSB7XG4gICAgbGV0IGRlY29kZWQ6IGFueTtcbiAgICBkZWNvZGVkID0gdGhpcy5kZWNvZGVUb2tlbih0b2tlbik7XG5cbiAgICBpZiAoIWRlY29kZWQuaGFzT3duUHJvcGVydHkoJ2V4cCcpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKDApOyAvLyBUaGUgMCBoZXJlIGlzIHRoZSBrZXksIHdoaWNoIHNldHMgdGhlIGRhdGUgdG8gdGhlIGVwb2NoXG4gICAgZGF0ZS5zZXRVVENTZWNvbmRzKGRlY29kZWQuZXhwKTtcblxuICAgIHJldHVybiBkYXRlO1xuICB9XG5cbiAgcHVibGljIGlzVG9rZW5FeHBpcmVkKHRva2VuOiBzdHJpbmcsIG9mZnNldFNlY29uZHM/OiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBsZXQgZGF0ZSA9IHRoaXMuZ2V0VG9rZW5FeHBpcmF0aW9uRGF0ZSh0b2tlbik7XG4gICAgb2Zmc2V0U2Vjb25kcyA9IG9mZnNldFNlY29uZHMgfHwgMDtcblxuICAgIGlmIChkYXRlID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBUb2tlbiBleHBpcmVkP1xuICAgIHJldHVybiAhKGRhdGUudmFsdWVPZigpID4gKG5ldyBEYXRlKCkudmFsdWVPZigpICsgKG9mZnNldFNlY29uZHMgKiAxMDAwKSkpO1xuICB9XG5cbn1cbiIsImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzL1N1YmplY3QnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBTdWJzY3JpcHRpb24gfSBmcm9tICdyeGpzL1N1YnNjcmlwdGlvbic7XG5cbmNvbnN0IFNlcnZpY2VOYW1lOiBzdHJpbmcgPSBcIlB1YlN1YiBTZXJ2aWNlXCI7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBOUHViU3ViU2VydmljZSB7XG4gIHByaXZhdGUgZXZlbnRzID0ge307XG5cbiAgY29uc3RydWN0b3IoKSB7IH1cblxuICBwdWJsaWMgJHN1YihldmVudDogc3RyaW5nKTogT2JzZXJ2YWJsZTxhbnk+O1xuICBwdWJsaWMgJHN1YihldmVudDogc3RyaW5nLCBjYWxsYmFjazogKHZhbHVlOiBhbnkpID0+IHZvaWQpOiBTdWJzY3JpcHRpb247XG4gIHB1YmxpYyAkc3ViKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrOiAodmFsdWU6IGFueSkgPT4gdm9pZCwgZXJyb3I6IChlcnJvcjogYW55KSA9PiB2b2lkKTogU3Vic2NyaXB0aW9uO1xuICBwdWJsaWMgJHN1YihldmVudDogc3RyaW5nLCBjYWxsYmFjazogKHZhbHVlOiBhbnkpID0+IHZvaWQsIGVycm9yOiAoZXJyb3I6IGFueSkgPT4gdm9pZCwgY29tcGxldGU6ICgpID0+IHZvaWQpOiBTdWJzY3JpcHRpb247XG4gIHB1YmxpYyAkc3ViKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrPzogKHZhbHVlOiBhbnkpID0+IHZvaWQsIGVycm9yPzogKGVycm9yOiBhbnkpID0+IHZvaWQsIGNvbXBsZXRlPzogKCkgPT4gdm9pZCkge1xuICAgICAgaWYgKCFldmVudCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWyR7U2VydmljZU5hbWV9XSA9PiBTdWJzY3JpcHRpb24gbWV0aG9kIG11c3QgZ2V0IGV2ZW50IG5hbWUuYCk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLmV2ZW50c1tldmVudF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IG5ldyBTdWJqZWN0PGFueT4oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50c1tldmVudF0uYXNPYnNlcnZhYmxlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiB0aGlzLmV2ZW50c1tldmVudF0uYXNPYnNlcnZhYmxlKCkuc3Vic2NyaWJlKGNhbGxiYWNrLCBlcnJvciwgY29tcGxldGUpO1xuICAgICAgfVxuICB9XG5cbiAgcHVibGljICRwdWIoZXZlbnQ6IHN0cmluZywgZXZlbnRPYmplY3Q/OiBhbnkpIHtcbiAgICAgIGlmICghZXZlbnQpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFske1NlcnZpY2VOYW1lfV0gPT4gUHVibGlzaCBtZXRob2QgbXVzdCBnZXQgZXZlbnQgbmFtZS5gKTtcbiAgICAgIH0gZWxzZSBpZiAoIXRoaXMuZXZlbnRzW2V2ZW50XSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XS5uZXh0KGV2ZW50T2JqZWN0KTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIElQdWJTdWJTZXJ2aWNlIHtcbiAgJHB1YihldmVudDogc3RyaW5nLCBldmVudE9iamVjdD86IGFueSk7XG4gICRzdWIoZXZlbnQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PjtcbiAgJHN1YihldmVudDogc3RyaW5nLCBjYWxsYmFjazogKHZhbHVlOiBhbnkpID0+IHZvaWQpOiBTdWJzY3JpcHRpb247XG4gICRzdWIoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6ICh2YWx1ZTogYW55KSA9PiB2b2lkLCBlcnJvcjogKGVycm9yOiBhbnkpID0+IHZvaWQpOiBTdWJzY3JpcHRpb247XG4gICRzdWIoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6ICh2YWx1ZTogYW55KSA9PiB2b2lkLCBlcnJvcjogKGVycm9yOiBhbnkpID0+IHZvaWQsIGNvbXBsZXRlOiAoKSA9PiB2b2lkKTogU3Vic2NyaXB0aW9uO1xufVxuXG5pbnRlcmZhY2UgSSRzdWIge1xuICAoZXZlbnQ6IHN0cmluZyk6IE9ic2VydmFibGU8YW55PjtcbiAgKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrOiAodmFsdWU6IGFueSkgPT4gdm9pZCk6IFN1YnNjcmlwdGlvbjtcbiAgKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrOiAodmFsdWU6IGFueSkgPT4gdm9pZCwgZXJyb3I6IChlcnJvcjogYW55KSA9PiB2b2lkKTogU3Vic2NyaXB0aW9uO1xuICAoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6ICh2YWx1ZTogYW55KSA9PiB2b2lkLCBlcnJvcjogKGVycm9yOiBhbnkpID0+IHZvaWQsIGNvbXBsZXRlOiAoKSA9PiB2b2lkKTogU3Vic2NyaXB0aW9uO1xufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgTlNlc3Npb25TdG9yYWdlU2VydmljZSB9IGZyb20gJy4vbi1zZXNzaW9uU3RvcmFnZS5zZXJ2aWNlJztcbmltcG9ydCB7IE5Mb2NhbFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnLi9uLWxvY2FsU3RvcmFnZS5zZXJ2aWNlJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIE5Mb2dvdXRTZXJ2aWNlIHtcblxuICBuU2Vzc2lvblN0b3JhZ2UgPSBuZXcgTlNlc3Npb25TdG9yYWdlU2VydmljZSgpO1xuICAvLyBuTG9jYWxTdG9yYWdlU2VydmljZSA9IG5ldyBOTG9jYWxTdG9yYWdlU2VydmljZSgpO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG5Mb2NhbFN0b3JhZ2VTZXJ2aWNlOiBOTG9jYWxTdG9yYWdlU2VydmljZSkgeyB9XG5cbiAgbG9nb3V0KCkge1xuICAgIHRoaXMublNlc3Npb25TdG9yYWdlLmNsZWFyU2Vzc2lvblN0b3JhZ2UoKTtcbiAgICB0aGlzLm5Mb2NhbFN0b3JhZ2VTZXJ2aWNlLmNsZWFyTG9jYWxTdG9yYWdlKCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMvU3ViamVjdCc7XG4vLyBpbXBvcnQgeyBOU25hY2tiYXJTZXJ2aWNlIH0gZnJvbSAnLi9uLXNuYWNrYmFyLnNlcnZpY2UnO1xuaW1wb3J0IHsgTkxvZ291dFNlcnZpY2UgfSBmcm9tICcuL24tbG9nb3V0LnNlcnZpY2UnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gXCJyeGpzL09ic2VydmFibGVcIjtcbmltcG9ydCB7IE5TeXN0ZW1TZXJ2aWNlIH0gZnJvbSAnLi9uLXN5c3RlbS5zZXJ2aWNlJztcbmltcG9ydCB7IE5QdWJTdWJTZXJ2aWNlIH0gZnJvbSAnLi9uLXB1YlN1Yi5zZXJ2aWNlJztcbi8vIGltcG9ydCB7IE5TbmFja2JhclNlcnZpY2UgfSBmcm9tICcuL3NuYWNrYmFyL3NlcnZpY2Uvc25hY2tiYXIuc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBOSFRUUExvYWRlclNlcnZpY2Uge1xuICBwdWJsaWMgcGVuZGluZ1JlcXVlc3RzID0gMDtcbiAgcHVibGljIHNob3dMb2FkaW5nID0gZmFsc2U7XG4gIHByaXZhdGUgX2lzSFRUUFJlcXVlc3RJblByb2dyZXNzID0gbmV3IFN1YmplY3Q8Ym9vbGVhbj4oKTtcbiAgX2lzSFRUUFJlcXVlc3RJblByb2dyZXNzJCA9IHRoaXMuX2lzSFRUUFJlcXVlc3RJblByb2dyZXNzLmFzT2JzZXJ2YWJsZSgpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbkxvZ291dFNlcnZpY2U6IE5Mb2dvdXRTZXJ2aWNlLCBwcml2YXRlIG5QdWJTdWJTZXJ2aWNlOiBOUHViU3ViU2VydmljZSkge1xuXG4gIH1cblxuICBpc0hUVFBSZXF1ZXN0SW5Qcm9ncmVzcyhib29sKSB7XG4gICAgaWYgKGJvb2wpIHtcbiAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzKys7XG4gICAgICBpZiAoIXRoaXMuc2hvd0xvYWRpbmcpIHtcbiAgICAgICAgdGhpcy5faXNIVFRQUmVxdWVzdEluUHJvZ3Jlc3MubmV4dChib29sKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc2hvd0xvYWRpbmcgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRoaXMucGVuZGluZ1JlcXVlc3RzLS07XG4gICAgICBpZiAodGhpcy5wZW5kaW5nUmVxdWVzdHMgPD0gMCkge1xuICAgICAgICBpZiAodGhpcy5zaG93TG9hZGluZykge1xuICAgICAgICAgIHRoaXMuX2lzSFRUUFJlcXVlc3RJblByb2dyZXNzLm5leHQoYm9vbCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaG93TG9hZGluZyA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGFsZXJ0RXJyb3IoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3Iuc3RhdHVzIDwgMjAwIHx8IGVycm9yLnN0YXR1cyA+IDUwMCkge1xuICAgICAgaWYgKGVycm9yLnN0YXR1cyA9PT0gMCkge1xuICAgICAgICB0aGlzLm5QdWJTdWJTZXJ2aWNlLiRwdWIoJ29wZW5TbmFja0JhcicsICdDb25uZWN0aXZpdHkgaXNzdWUnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMublB1YlN1YlNlcnZpY2UuJHB1Yignb3BlblNuYWNrQmFyJywgJ1Jlc3BvbnNlIGZhaWx1cmUnKVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoZXJyb3Iuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgIHRoaXMubkxvZ291dFNlcnZpY2UubG9nb3V0KCk7XG4gICAgICBpZiAoZXJyb3IuZXJyb3IpIHtcbiAgICAgICAgdGhpcy5uUHViU3ViU2VydmljZS4kcHViKCdvcGVuU25hY2tCYXInLCBlcnJvci5lcnJvcilcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMublB1YlN1YlNlcnZpY2UuJHB1Yignb3BlblNuYWNrQmFyJywgZXJyb3IpXG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChlcnJvci5lcnJvcikge1xuICAgICAgaWYgKGVycm9yLmVycm9yIGluc3RhbmNlb2YgT2JqZWN0KSB7XG4gICAgICAgIHRoaXMublB1YlN1YlNlcnZpY2UuJHB1Yignb3BlblNuYWNrQmFyJywgZXJyb3IuZXJyb3IubWVzc2FnZSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMublB1YlN1YlNlcnZpY2UuJHB1Yignb3BlblNuYWNrQmFyJywgZXJyb3IuZXJyb3IpXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMublB1YlN1YlNlcnZpY2UuJHB1Yignb3BlblNuYWNrQmFyJywgJ1Jlc3BvbnNlIGZhaWx1cmUnKVxuICAgIH1cbiAgfVxuXG59XG5cblxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSwgT25Jbml0LCBPbkRlc3Ryb3kgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IE5TeXN0ZW1TZXJ2aWNlIH0gZnJvbSAnLi9uLXN5c3RlbS5zZXJ2aWNlJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tICdyeGpzL09ic2VydmFibGUnO1xuZGVjbGFyZSB2YXIgUHVzaE5vdGlmaWNhdGlvbjogYW55O1xuZGVjbGFyZSB2YXIgQVBOU1B1c2hOb3RpZmljYXRpb246IGFueTtcbmltcG9ydCB7IE5Mb2NhbFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnLi9uLWxvY2FsU3RvcmFnZS5zZXJ2aWNlJztcbmltcG9ydCAqIGFzIGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlJztcbmltcG9ydCB7IE5QdWJTdWJTZXJ2aWNlIH0gZnJvbSAnLi9uLXB1YlN1Yi5zZXJ2aWNlJztcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBOU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnLi9uLXNlc3Npb25TdG9yYWdlLnNlcnZpY2UnO1xuLy8gaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IE5IVFRQTG9hZGVyU2VydmljZSB9IGZyb20gJy4vbi1IVFRQTG9hZGVyLnNlcnZpY2UnO1xuaW1wb3J0IHsgZW52aXJvbm1lbnQgfSBmcm9tICcuLi8uLi9lbnZpcm9ubWVudHMvZW52aXJvbm1lbnQucHJvZCc7XG5cblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIE5Ob3RpZmljYXRpb25TZXJ2aWNlIHtcbiAgLy8gcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IE5Ob3RpZmljYXRpb25TZXJ2aWNlO1xuICBwcml2YXRlIHN5c3RlbVNlcnZpY2U6IE5TeXN0ZW1TZXJ2aWNlID0gTlN5c3RlbVNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcbiAgcHJpdmF0ZSBmaXJlYmFzZVNlbmRlcklkOiBzdHJpbmc7XG4gIHByaXZhdGUgaXNOb3RpZmljYXRpb25FbmFibGVkOiBib29sZWFuO1xuICBwcml2YXRlIGRldmljZVR5cGU7IHN0cmluZztcbiAgcHJpdmF0ZSByZXNEZXRhaWxzO1xuICBwcml2YXRlIGRldmljZVVVSUQ6IHN0cmluZztcbiAgcHJpdmF0ZSBwb3NzaWJsZVB1c2hUeXBlczogc3RyaW5nW10gPSBbJ0FQTlMnLCdGQ00nXTtcbiAgbG9naW5TdWJzY3JpYmU7XG4gIHNlc3Npb25TdG9yYWdlOiBOU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlO1xuICBhcHBOYW1lO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGxvY2FsU3RvcmFnZVNlcnZpY2U6IE5Mb2NhbFN0b3JhZ2VTZXJ2aWNlLCBwcml2YXRlIHB1YlN1YlNlcnZpY2U6IE5QdWJTdWJTZXJ2aWNlLFxuICAgIHByaXZhdGUgaHR0cDogSHR0cENsaWVudCwgcHJpdmF0ZSBiSHR0cExvYWRlcjogTkhUVFBMb2FkZXJTZXJ2aWNlKSB7XG4gICAgdGhpcy5maXJlYmFzZVNlbmRlcklkID0gdGhpcy5zeXN0ZW1TZXJ2aWNlLmdldFZhbCgnZmlyZWJhc2VTZW5kZXJJZCcpO1xuICAgIHRoaXMuaXNOb3RpZmljYXRpb25FbmFibGVkID0gdGhpcy5zeXN0ZW1TZXJ2aWNlLmdldFZhbCgnaXNOb3RpZmljYXRpb25FbmFibGVkJyk7XG4gICAgdGhpcy5hcHBOYW1lID0gdGhpcy5zeXN0ZW1TZXJ2aWNlLmdldFZhbCgnYXBwTmFtZScpO1xuICAgIHRoaXMuZGV2aWNlVHlwZSA9IHRoaXMuc3lzdGVtU2VydmljZS5kZXZpY2VUeXBlO1xuICAgIHRoaXMuc2Vzc2lvblN0b3JhZ2UgPSBuZXcgTlNlc3Npb25TdG9yYWdlU2VydmljZSgpO1xuICAgIHRoaXMubG9naW5TdWJzY3JpYmUgPSB0aGlzLnB1YlN1YlNlcnZpY2UuJHN1YignZmlyZWJhc2VSZWdpc3RlcicsICgpID0+IHtcbiAgICAgIHRoaXMuZW5hYmxlTm90aWZpY2F0aW9uKCk7XG4gICAgfSlcbiAgfVxuXG4gIG5nT25Jbml0KCkge1xuICB9XG5cblxuICBlbmFibGVOb3RpZmljYXRpb24oKSB7XG4gICAgbGV0IHB1c2hUeXBlID0gdGhpcy5nZXRQdXNoVHlwZSh0aGlzLnN5c3RlbVNlcnZpY2UuZ2V0VmFsKCdwdXNoVHlwZScpKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdkZXZpY2VyZWFkeScsIGV2ZW50ID0+IHtcbiAgICAgIGlmICh0aGlzLmlzTm90aWZpY2F0aW9uRW5hYmxlZCkge1xuICAgICAgICBpZiAodGhpcy5kZXZpY2VUeXBlICYmIHRoaXMuZGV2aWNlVHlwZSAhPSAnYnJvd3NlcicpIHtcbiAgICAgICAgICB0aGlzLmRldmljZVR5cGUgPSB0aGlzLnN5c3RlbVNlcnZpY2UuZGV2aWNlVHlwZTtcbiAgICAgICAgICB0aGlzLmNoZWNrUGVybWlzc2lvbihwdXNoVHlwZSkudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgaWYgKHJlcykge1xuICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemVOb3RpZmljYXRpb25zKHB1c2hUeXBlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuICAgIGlmICh0aGlzLmlzTm90aWZpY2F0aW9uRW5hYmxlZCAmJiBwdXNoVHlwZSAhPT0gJ0FQTlMnKSB7XG4gICAgICBpZiAodGhpcy5kZXZpY2VUeXBlICYmIHRoaXMuZGV2aWNlVHlwZSA9PSAnYnJvd3NlcicgJiYgd2luZG93WydOb3RpZmljYXRpb24nXSkge1xuICAgICAgICB0aGlzLmluaXRpYWxpc2VXZWJQdXNoKCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaW5pdGlhbGlzZVdlYlB1c2goKSB7XG4gICAgY29uc3QgX190aGlzID0gdGhpcztcbiAgICBjb25zdCBtZXNzYWdpbmcgPSBmaXJlYmFzZS5tZXNzYWdpbmcoKTtcblxuICAgIG1lc3NhZ2luZy5yZXF1ZXN0UGVybWlzc2lvbigpXG4gICAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBtZXNzYWdpbmcuZ2V0VG9rZW4oKTtcbiAgICAgIH0pXG4gICAgICAudGhlbihmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgaWYgKHRva2VuKSB7XG4gICAgICAgICAgX190aGlzLnNlbmRSZWdEZXRhaWxzKHRva2VuKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIF9fdGhpcy5iSHR0cExvYWRlci5hbGVydEVycm9yKGVycik7XG4gICAgICB9KTtcblxuICAgIG1lc3NhZ2luZy5vbk1lc3NhZ2UoZnVuY3Rpb24gKHBheWxvYWQpIHtcbiAgICAgIGlmIChwYXlsb2FkWydub3RpZmljYXRpb24nXSkge1xuICAgICAgICBsZXQgbm90aWZpY2F0aW9uT2JqID0gcGF5bG9hZFsnbm90aWZpY2F0aW9uJ107XG4gICAgICAgIGxldCBvcHRpb25zID0ge1xuICAgICAgICAgIGJvZHk6IG5vdGlmaWNhdGlvbk9iai5ib2R5LFxuICAgICAgICAgIGljb246IG5vdGlmaWNhdGlvbk9iai5pY29uXG4gICAgICAgIH1cbiAgICAgICAgLy8gY3JlYXRpbmcgYSBuYXRpdmUgYnJvd3NlciBtZXNzYWdlXG4gICAgICAgIGxldCBub3RpZmljYXRpb25VSSA9IG5ldyBOb3RpZmljYXRpb24obm90aWZpY2F0aW9uT2JqLnRpdGxlLCBvcHRpb25zKTtcbiAgICAgICAgbm90aWZpY2F0aW9uVUkub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB3aW5kb3cuZm9jdXMoKTsgLy8gd2luZG93IGlzIGZvY3VzZWQgd2hlbiB0aGUgdXNlciBjbGlja3MgdGhlIG5vdGlmaWNhdGlvbiB1c2luZyB0aGlzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGNoZWNrUGVybWlzc2lvbihwdXNoVHlwZT8pIHtcbiAgICAvLyBBbmRyb2lkICYgaU9TIG9ubHlcbiAgICAvLyBDaGVja3Mgd2hldGhlciB0aGUgcHVzaCBub3RpZmljYXRpb24gcGVybWlzc2lvbiBoYXMgYmVlbiBncmFudGVkLlxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xuICAgICAgcHVzaFR5cGUgPSB0aGlzLmdldFB1c2hUeXBlKHB1c2hUeXBlKTtcbiAgICAgIGlmICgodGhpcy5kZXZpY2VUeXBlID09PSAnQW5kcm9pZCcgfHwgdGhpcy5kZXZpY2VUeXBlID09PSAnaU9TJykgJiYgKHB1c2hUeXBlID09PSAnRkNNJyApKSB7XG4gICAgICAgIFB1c2hOb3RpZmljYXRpb24uaGFzUGVybWlzc2lvbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGRhdGEuaXNFbmFibGVkKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuZGV2aWNlVHlwZSA9PT0gJ2lPUycgJiYgcHVzaFR5cGUgPT09ICdBUE5TJykge1xuICAgICAgICAgQVBOU1B1c2hOb3RpZmljYXRpb24uaGFzUGVybWlzc2lvbihmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgIHJldHVybiByZXNvbHZlKGRhdGEuaXNFbmFibGVkKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gcmVzb2x2ZSh0cnVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIGluaXRpYWxpemVOb3RpZmljYXRpb25zKHB1c2hUeXBlPykge1xuICAgIC8vcHVzaFR5cGUgPSBwdXNoVHlwZSA/IHB1c2hUeXBlIDogJ0ZDTSc7XG4gICAgcHVzaFR5cGUgPSB0aGlzLmdldFB1c2hUeXBlKHB1c2hUeXBlKTtcblxuICAgIGxldCBwdXNoO1xuICAgIC8vIERlZmF1bHQgaWYgZm9yIEZDTVxuICAgIGlmIChwdXNoVHlwZSA9PT0gJ0ZDTScpIHtcbiAgICAgIHB1c2ggPSB3aW5kb3dbJ1B1c2hOb3RpZmljYXRpb24nXS5pbml0KHtcbiAgICAgICAgYW5kcm9pZDoge1xuICAgICAgICAgIHNlbmRlcklEOiB0aGlzLmZpcmViYXNlU2VuZGVySWRcbiAgICAgICAgfSxcbiAgICAgICAgaW9zOiB7XG4gICAgICAgICAgYWxlcnQ6IFwidHJ1ZVwiLFxuICAgICAgICAgIGJhZGdlOiBcInRydWVcIixcbiAgICAgICAgICBzb3VuZDogXCJ0cnVlXCIsXG4gICAgICAgICAgc2VuZGVySUQ6IHRoaXMuZmlyZWJhc2VTZW5kZXJJZFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIE5ldyBBUE5TIHBsdWdpbiBpbml0XG4gICAgZWxzZSBpZiAocHVzaFR5cGUgPT09ICdBUE5TJykge1xuICAgICAgcHVzaCA9IHdpbmRvd1snQVBOU1B1c2hOb3RpZmljYXRpb24nXS5pbml0KHtcbiAgICAgICAgaW9zOiB7XG4gICAgICAgICAgYWxlcnQ6IFwidHJ1ZVwiLFxuICAgICAgICAgIGJhZGdlOiBcInRydWVcIixcbiAgICAgICAgICBzb3VuZDogXCJ0cnVlXCJcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIHB1c2gub24oJ3JlZ2lzdHJhdGlvbicsIChkYXRhKSA9PiB7XG4gICAgICAvLyBkYXRhLnJlZ2lzdHJhdGlvbklkXG4gICAgICB0aGlzLnNlbmRSZWdEZXRhaWxzKGRhdGEucmVnaXN0cmF0aW9uSWQpO1xuICAgIH0pO1xuXG4gICAgLy8gVG9EbyBDaHJpc3R5IGdldCBjYWxsIGJhY2sgZnVuY3Rpb24gZnJvbSBhcHAgdXNlciB0byBjaGFuZ2Ugd2hhdCBoYXBwZW5zIG9uY2UgYSBub3RpZmljYXRpb24gYXJyaXZlc1xuICAgIHB1c2gub24oJ25vdGlmaWNhdGlvbicsIChkYXRhKSA9PiB7XG4gICAgICB3aW5kb3dbJ2NvcmRvdmEnXS5wbHVnaW5zLm5vdGlmaWNhdGlvbi5sb2NhbC5zY2hlZHVsZSh7XG4gICAgICAgIHRpdGxlOiBkYXRhLnRpdGxlLFxuICAgICAgICB0ZXh0OiBkYXRhLm1lc3NhZ2UsXG4gICAgICAgIHNvdW5kOiBkYXRhLnNvdW5kLFxuICAgICAgICBhdDogbmV3IERhdGUoKS5nZXRUaW1lKClcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcHVzaC5vbignZXJyb3InLCAoZSkgPT4ge1xuICAgICAgLy8gZS5tZXNzYWdlXG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH0pO1xuICB9XG5cbiAgc2VuZFJlZ0RldGFpbHMocmVnaXN0cmF0aW9uSWQpIHtcbiAgICB0aGlzLmxvY2FsU3RvcmFnZVNlcnZpY2Uuc2V0VmFsdWUoJ3JlZ2lzdHJhdGlvbklkJywgcmVnaXN0cmF0aW9uSWQpO1xuICAgIHZhciB1cmwgPSB0aGlzLnN5c3RlbVNlcnZpY2UuZ2V0VGVuYW50VXJsKCkgKyAnbm90aWZpY2F0aW9uLycgKyB0aGlzLnN5c3RlbVNlcnZpY2UuZ2V0VmFsKCdhcHBOYW1lJykgKyAnL3JlZ2lzdGVyJztcbiAgICBsZXQgcHVzaFR5cGUgPSB0aGlzLmdldFB1c2hUeXBlKHRoaXMuc3lzdGVtU2VydmljZS5nZXRWYWwoJ3B1c2hUeXBlJykpO1xuICAgIHRoaXMuaHR0cC5wb3N0KHVybCwge1xuICAgICAgJ2tleSc6IHRoaXMuc2Vzc2lvblN0b3JhZ2UuZ2V0VmFsdWUoJ3VzZXJPYmonKVsndXNlcktleSddLFxuICAgICAgJ3V1aWQnOiB0aGlzLmxvY2FsU3RvcmFnZVNlcnZpY2UuZ2V0VmFsdWUoJ3V1aWQnKSwgXG4gICAgICAnZmJyZWdpZCc6IHJlZ2lzdHJhdGlvbklkLFxuICAgICAgJ3B1c2hUeXBlJzogcHVzaFR5cGVcbiAgICB9KS5zdWJzY3JpYmUocmVzdWx0ID0+IHtcbiAgICAgIC8vIHRoaXMucHViU3ViU2VydmljZS4kcHViKCdGQlJlZ0NvbXAnKTtcbiAgICB9LCBlcnJvciA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnJvcik7XG4gICAgfSlcbiAgfVxuXG4gIGdldFB1c2hUeXBlIChjdXJyUHVzaFR5cGUpIHtcbiAgICBsZXQgaXNWYWxpZFB1c2ggPSB0eXBlb2YgY3VyclB1c2hUeXBlICE9PSAndW5kZWZpbmVkJyAmJiB0aGlzLnBvc3NpYmxlUHVzaFR5cGVzLmluY2x1ZGVzKGN1cnJQdXNoVHlwZS50b1VwcGVyQ2FzZSgpKTtcbiAgICBsZXQgcHVzaFR5cGUgPSBpc1ZhbGlkUHVzaCA/IGN1cnJQdXNoVHlwZS50b1VwcGVyQ2FzZSgpIDogJ0ZDTSc7XG4gICAgcmV0dXJuIHB1c2hUeXBlO1xuICB9XG5cbiAgbmdPbkRlc3Ryb3koKSB7XG4gICAgdGhpcy5sb2dpblN1YnNjcmliZS51blN1YnNjcmliZSgpO1xuICB9XG4gIFxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSwgRXZlbnRFbWl0dGVyLCBPdXRwdXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IEh0dHBDbGllbnQgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG5pbXBvcnQgeyBOU3lzdGVtU2VydmljZSB9IGZyb20gJy4vbi1zeXN0ZW0uc2VydmljZSc7XG5pbXBvcnQgeyBOVG9rZW5TZXJ2aWNlIH0gZnJvbSAnLi9uLXRva2VuLnNlcnZpY2UnO1xuaW1wb3J0IHsgTlB1YlN1YlNlcnZpY2UgfSBmcm9tICcuL24tcHViU3ViLnNlcnZpY2UnO1xuaW1wb3J0IHsgTlNlc3Npb25TdG9yYWdlU2VydmljZSB9IGZyb20gJy4vbi1zZXNzaW9uU3RvcmFnZS5zZXJ2aWNlJztcbmltcG9ydCB7IE5Mb2NhbFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnLi9uLWxvY2FsU3RvcmFnZS5zZXJ2aWNlJztcbmltcG9ydCB7IE5Ob3RpZmljYXRpb25TZXJ2aWNlIH0gZnJvbSAnLi9uLW5vdGlmaWNhdGlvbi5zZXJ2aWNlJztcbmltcG9ydCAncnhqcy9hZGQvb3BlcmF0b3IvbWFwJztcbmltcG9ydCB7IE9ic2VydmFibGUgfSBmcm9tIFwicnhqcy9PYnNlcnZhYmxlXCI7XG5cblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIE5Mb2dpblNlcnZpY2Uge1xuICBsb2dpblVybDtcbiAgYXBwUHJvcGVydGllcztcbiAgc3lzdGVtU2VydmljZTtcbiAgblNlc3Npb25TdG9yYWdlO1xuICB1dWlkO1xuICBkZXRhaWxzOiBhbnk7XG5cbiAgQE91dHB1dCgpIGxvZ2luQ29tcGxldGVkID0gbmV3IEV2ZW50RW1pdHRlcigpO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQsIHByaXZhdGUgcHViU3ViU2VydmljZTogTlB1YlN1YlNlcnZpY2UsIHByaXZhdGUgbm90aWZpY2F0aW9uU2VydmljZTogTk5vdGlmaWNhdGlvblNlcnZpY2UsXG4gICAgcHJpdmF0ZSBuTG9jYWxTdG9yYWdlU2VydmljZTogTkxvY2FsU3RvcmFnZVNlcnZpY2UsIHByaXZhdGUgblRva2VuU2VydmljZTogTlRva2VuU2VydmljZSkge1xuICAgIHRoaXMuc3lzdGVtU2VydmljZSA9IE5TeXN0ZW1TZXJ2aWNlLmdldEluc3RhbmNlKCk7XG4gICAgLy8gdGhpcy5uVG9rZW5TZXJ2aWNlID0gbmV3IE5Ub2tlblNlcnZpY2UoKTtcbiAgICB0aGlzLm5TZXNzaW9uU3RvcmFnZSA9IG5ldyBOU2Vzc2lvblN0b3JhZ2VTZXJ2aWNlKCk7XG4gICAgLy8gdGhpcy5uTG9jYWxTdG9yYWdlU2VydmljZSA9IG5ldyBOTG9jYWxTdG9yYWdlU2VydmljZSgpO1xuICB9XG5cblxuICBsb2dpbih1c2VyTmFtZSwgcGFzc3dvcmQsIGlzUmVtZW1iZXI/KSB7XG4gICAgdGhpcy5hcHBQcm9wZXJ0aWVzID0gdGhpcy5zeXN0ZW1TZXJ2aWNlLmdldFZhbCgncHJvcGVydGllcycpO1xuICAgIHRoaXMubG9naW5VcmwgPSB0aGlzLnN5c3RlbVNlcnZpY2UuZ2V0QXV0aFVybCgpICsgdGhpcy5hcHBQcm9wZXJ0aWVzLmFwcE5hbWU7XG4gICAgdGhpcy51dWlkID0gdGhpcy5uTG9jYWxTdG9yYWdlU2VydmljZS5nZXRWYWx1ZSgndXVpZCcpO1xuICAgIGlmICghdGhpcy51dWlkKSB7XG4gICAgICB0aGlzLnV1aWQgPSB0aGlzLm5Mb2NhbFN0b3JhZ2VTZXJ2aWNlLmNoZWNrRGV2aWNlSWQoKTtcbiAgICB9XG4gICAgdGhpcy5kZXRhaWxzID0ge1xuICAgICAgdXNlcm5hbWU6IHVzZXJOYW1lLFxuICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgIH07XG4gICAgdGhpcy5kZXRhaWxzLnBsYXRmb3JtRGV0YWlscyA9IHRoaXMuc3lzdGVtU2VydmljZS5nZXRQbGF0Zm9ybURldGFpbHModGhpcy5zeXN0ZW1TZXJ2aWNlLmNoZWNrRGV2aWNlKCkpO1xuICAgIHRoaXMuZGV0YWlscy5wbGF0Zm9ybURldGFpbHNbJ3V1aWQnXSA9IHRoaXMudXVpZDtcbiAgICByZXR1cm4gdGhpcy5odHRwLnBvc3QodGhpcy5sb2dpblVybCwgSlNPTi5zdHJpbmdpZnkodGhpcy5kZXRhaWxzKSkubWFwKHJlc3VsdCA9PiB7XG4gICAgICBjb25zdCB0b2tlbnNPYmogPSByZXN1bHQ7XG4gICAgICBpZiAodG9rZW5zT2JqKSB7XG4gICAgICAgIHRoaXMublRva2VuU2VydmljZS51cGRhdGVUb2tlbnModG9rZW5zT2JqLCBpc1JlbWVtYmVyKTtcbiAgICAgIH1cbiAgICAgIC8vIFRPRE8gY2hyaXMgYXJyYXkgb2Ygc3VwcG9ydGVkIHB1c2hlcyBjdXJyZW50bHkgb25seSBzdXBwb3J0IEFQTlMgYW5kIEZpcmViYXNlXG4gICAgICBpZiAoKHRoaXMuc3lzdGVtU2VydmljZS5nZXRWYWwoJ2ZpcmViYXNlU2VuZGVySWQnKSAhPSAnRklSRUJBU0VfU0VOREVSX0lEJyAmJiB0aGlzLnN5c3RlbVNlcnZpY2UuZ2V0VmFsKCdmaXJlYmFzZUF1dGhLZXknKSAhPSAnRklSRUJBU0VfQVVUSF9LRVknKSBcbiAgICAgICAgICAgfHwgKHRoaXMuc3lzdGVtU2VydmljZS5nZXRWYWwoJ3B1c2hUeXBlJykgPT09ICdBUE5TJyAmJiB0aGlzLnN5c3RlbVNlcnZpY2UuaXNJT1MoKSkpIHtcbiAgICAgICAgdGhpcy5wdWJTdWJTZXJ2aWNlLiRwdWIoJ2ZpcmViYXNlUmVnaXN0ZXInKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucHViU3ViU2VydmljZS4kcHViKCdsb2dpbkNvbXBsZXRlJyk7XG4gICAgICByZXR1cm4gKHJlc3VsdCk7XG4gICAgfSwgZXJyb3IgPT4ge1xuICAgICAgcmV0dXJuIChlcnJvcik7XG4gICAgfSk7XG4gIH1cblxuICBpc0xvZ2dlZEluKCkge1xuICAgIHJldHVybiB0aGlzLm5Mb2NhbFN0b3JhZ2VTZXJ2aWNlLmluaXRTdG9yYWdlKCkudGhlbihyZXN1bHQgPT4ge1xuICAgICAgaWYgKHRoaXMublNlc3Npb25TdG9yYWdlLmdldFZhbHVlKCdhY2Nlc3NUb2tlbicpICYmIHRoaXMublNlc3Npb25TdG9yYWdlLmdldFZhbHVlKCdyZWZyZXNoVG9rZW4nKSAmJlxuICAgICAgICB0aGlzLm5TZXNzaW9uU3RvcmFnZS5nZXRWYWx1ZSgnYWNjZXNzVG9rZW4nKSAhPSAnbnVsbCcgJiYgdGhpcy5uU2Vzc2lvblN0b3JhZ2UuZ2V0VmFsdWUoJ3JlZnJlc2hUb2tlbicpICE9ICdudWxsJykge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSk7XG5cbiAgfVxufVxuIiwiaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgUm91dGVyIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IENhbkFjdGl2YXRlIH0gZnJvbSAnQGFuZ3VsYXIvcm91dGVyJztcbmltcG9ydCB7IE5Mb2dpblNlcnZpY2UgfSBmcm9tICcuL24tbG9naW4uc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBOQXV0aEd1YXJkU2VydmljZSBpbXBsZW1lbnRzIENhbkFjdGl2YXRlIHtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG5Mb2dpblNlcnZpY2U6IE5Mb2dpblNlcnZpY2UsIHByaXZhdGUgcm91dGVyOiBSb3V0ZXIpIHsgfVxuXG4gIGNhbkFjdGl2YXRlKCkge1xuICAgIHJldHVybiB0aGlzLm5Mb2dpblNlcnZpY2UuaXNMb2dnZWRJbigpLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIGlmIChyZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJvdXRlci5uYXZpZ2F0ZShbJ3VuYXV0aG9yaXplZCddKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH0pXG5cbiAgfVxuXG59XG4iLCJpbXBvcnQgeyBIdHRwQ2xpZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOU3lzdGVtU2VydmljZSB9IGZyb20gJy4vbi1zeXN0ZW0uc2VydmljZSc7XG5cbkBJbmplY3RhYmxlKClcbmV4cG9ydCBjbGFzcyBORGF0YU1vZGVsU2VydmljZSB7XG4gIHByaXZhdGUgc3lzdGVtU2VydmljZTogTlN5c3RlbVNlcnZpY2U7XG4gIHByaXZhdGUgZG1Vcmw6IHN0cmluZztcbiAgcHJpdmF0ZSBpbnZhbGlkRGF0YU1vZGVsTmFtZTogc3RyaW5nID0gJ0ludmFsaWQgZGF0YSBtb2RlbCBuYW1lLic7XG4gIHByaXZhdGUgaW52YWxpZERhdGFNb2RlbElkOiBzdHJpbmcgPSAnSW52YWxpZCBkYXRhIG1vZGVsIGlkLic7XG4gIHByaXZhdGUgaW52YWxpZERhdGFNb2RlbE9iajogc3RyaW5nID0gJ0ludmFsaWQgZGF0YSBtb2RlbCBvYmplY3QuJztcbiAgcHJpdmF0ZSBkbURzO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGh0dHA6IEh0dHBDbGllbnQpIHtcbiAgICB0aGlzLnN5c3RlbVNlcnZpY2UgPSBOU3lzdGVtU2VydmljZS5nZXRJbnN0YW5jZSgpO1xuICB9XG5cbiAgLy8gR0VUIC97dGVuYW50TmFtZX0vZGF0YW1vZGVsL3tkYXRhc291cmNlfS97YXBwTmFtZX0ve2RhdGFNb2RlbE5hbWV9XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gZGF0YU1vZGVsTmFtZVxuICAgKiBAcGFyYW0gZmlsdGVyIFRoZSBmaWx0ZXIgcXVlcnkgcGFyYW1ldGVyIGFsbG93cyB0byBzcGVjaWZ5IGNvbmRpdGlvbnMgb24gdGhlIGRvY3VtZW50cyB0byByZXR1cm4uXG4gICAqIFRoZSBmaWx0ZXIgcXBhcmFtIHZhbHVlIGlzIGFueSBtb25nb2RiIHF1ZXJ5w6LCgMKmIERlZmF1bHRzIHRvIHt9XG4gICAqIEBwYXJhbSBrZXlzIFByb2plY3Rpb25zIHRvIGJlIGFwcGxpdGVkIG9uIG1vbmdvIGRiLlxuICAgKiBAcGFyYW0gc29ydCBzb3J0IHRvIGJlIGFwcGxpZWQgb24gdGhlIHF1ZXJ5IHJlc3VsdHMuIERlZmF1bHRzIHRvIHt9XG4gICAqIEBwYXJhbSBwYWdlbnVtYmVyIFBhZ2UgbnVtYmVyIGZvciBwYWdpbmF0ZWQgcXVlcmllcy4gRGVmYXVsdHMgdG8gMVxuICAgKiBAcGFyYW0gcGFnZXNpemUgU2l6ZSBvZiBlYWNoIHBhZ2UgdG8gYmUgcmV0dXJuZWQuIERlZmF1bHRzIHRvIDEwMC5cbiAgICovXG4gIGdldChkYXRhTW9kZWxOYW1lLCBmaWx0ZXI/LCBrZXlzPywgc29ydD8sIHBhZ2VudW1iZXI/LCBwYWdlc2l6ZT8pOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGlmIChkYXRhTW9kZWxOYW1lKSB7XG4gICAgICAvLyBsZXQgbW9kZWxOYW1lVXJsID0gYCR7dGhpcy5nZXREYXRhU291cmNlVVJMKGRhdGFNb2RlbE5hbWUpfSR7ZGF0YU1vZGVsTmFtZX1gO1xuICAgICAgbGV0IG1vZGVsTmFtZVVybCA9IHRoaXMuZ2V0RGF0YVNvdXJjZVVSTChkYXRhTW9kZWxOYW1lKSArIGRhdGFNb2RlbE5hbWU7XG4gICAgICBpZiAodGhpcy5jaGVja0lmVmFsaWQoZmlsdGVyKSB8fCB0aGlzLmNoZWNrSWZWYWxpZChrZXlzKSB8fCB0aGlzLmNoZWNrSWZWYWxpZChzb3J0KSB8fFxuICAgICAgICB0aGlzLmNoZWNrSWZWYWxpZChwYWdlbnVtYmVyKSB8fCB0aGlzLmNoZWNrSWZWYWxpZChwYWdlc2l6ZSkpIHtcbiAgICAgICAgbGV0IHF1ZXJ5U3RyaW5nID0gYCR7dGhpcy50b1F1ZXJ5U3RyaW5nKHtcbiAgICAgICAgICAnZmlsdGVyJzogZmlsdGVyLFxuICAgICAgICAgICdrZXlzJzoga2V5cyxcbiAgICAgICAgICAnc29ydCc6IHNvcnQsXG4gICAgICAgICAgJ3BhZ2VudW1iZXInOiBwYWdlbnVtYmVyLFxuICAgICAgICAgICdwYWdlc2l6ZSc6IHBhZ2VzaXplXG4gICAgICAgIH0pfWA7XG4gICAgICAgIGlmIChxdWVyeVN0cmluZyA9PT0gJycpIHtcbiAgICAgICAgICBxdWVyeVN0cmluZyArPSAnP2ZpbHRlcj17fSc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcXVlcnlTdHJpbmcgPSAnPycuY29uY2F0KHF1ZXJ5U3RyaW5nKTtcbiAgICAgICAgfVxuICAgICAgICBtb2RlbE5hbWVVcmwgKz0gcXVlcnlTdHJpbmc7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5odHRwLmdldChtb2RlbE5hbWVVcmwpLm1hcCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgcmV0dXJuIE9ic2VydmFibGUudGhyb3coZXJyb3IpO1xuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPYnNlcnZhYmxlLnRocm93KG5ldyBFcnJvcihgQ291bGQgbm90IGdldCAke2RhdGFNb2RlbE5hbWV9LiAke3RoaXMuaW52YWxpZERhdGFNb2RlbE5hbWV9YCkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFBVVCAve3RlbmFudE5hbWV9L2RhdGFtb2RlbC97ZGF0YXNvdXJjZX0ve2FwcE5hbWV9L3tkYXRhTW9kZWxOYW1lfVxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGRhdGFNb2RlbE5hbWUgRGF0YSBtb2RlbCBuYW1lIG9mIHRoZSBhcHBcbiAgICogQHBhcmFtIGRhdGFNb2RlbE9iaiBEYXRhIE1vZGVsIG9iamVjdCB3aGljaCBpcyB0byBiZSBpbnNlcnRlZFxuICAgKi9cbiAgcHV0KGRhdGFNb2RlbE5hbWUsIGRhdGFNb2RlbE9iaik6IE9ic2VydmFibGU8YW55PiB7XG4gICAgaWYgKGRhdGFNb2RlbE5hbWUpIHtcbiAgICAgIGlmIChkYXRhTW9kZWxPYmopIHtcbiAgICAgICAgLy8gY29uc3QgbW9kZWxOYW1lVXJsID0gYCR7dGhpcy5nZXREYXRhU291cmNlVVJMKGRhdGFNb2RlbE5hbWUpfSR7ZGF0YU1vZGVsTmFtZX1gO1xuICAgICAgICBjb25zdCBtb2RlbE5hbWVVcmwgPSB0aGlzLmdldERhdGFTb3VyY2VVUkwoZGF0YU1vZGVsTmFtZSkgKyBkYXRhTW9kZWxOYW1lO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwLnB1dChtb2RlbE5hbWVVcmwsIGRhdGFNb2RlbE9iaikubWFwKCh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS50aHJvdyhlcnJvcik7XG4gICAgICAgIH0pXG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS50aHJvdyhuZXcgRXJyb3IoYENvdWxkIG5vdCBwdXQgJHtkYXRhTW9kZWxPYmp9IGluICR7ZGF0YU1vZGVsTmFtZX0uICR7dGhpcy5pbnZhbGlkRGF0YU1vZGVsT2JqfWApKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE9ic2VydmFibGUudGhyb3cobmV3IEVycm9yKGBDb3VsZCBub3QgcHV0ICR7ZGF0YU1vZGVsT2JqfSBpbiAke2RhdGFNb2RlbE5hbWV9LiAke3RoaXMuaW52YWxpZERhdGFNb2RlbE5hbWV9YCkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIERFTEVURSAve3RlbmFudE5hbWV9L2RhdGFtb2RlbC97ZGF0YXNvdXJjZX0ve2FwcE5hbWV9L3tkYXRhTW9kZWxOYW1lfVxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGRhdGFNb2RlbE5hbWVcbiAgICogQHBhcmFtIGZpbHRlclxuICAgKi9cbiAgZGVsZXRlKGRhdGFNb2RlbE5hbWUsIGZpbHRlcik6IE9ic2VydmFibGU8YW55PiB7XG4gICAgbGV0IG1vZGVsTmFtZVVybDtcbiAgICBpZiAoZGF0YU1vZGVsTmFtZSkge1xuICAgICAgLy8gbW9kZWxOYW1lVXJsID0gYCR7dGhpcy5nZXREYXRhU291cmNlVVJMKGRhdGFNb2RlbE5hbWUpfSR7ZGF0YU1vZGVsTmFtZX1gO1xuICAgICAgbW9kZWxOYW1lVXJsID0gdGhpcy5nZXREYXRhU291cmNlVVJMKGRhdGFNb2RlbE5hbWUpICsgZGF0YU1vZGVsTmFtZTtcblxuICAgICAgaWYgKHRoaXMuY2hlY2tJZlZhbGlkKGZpbHRlcikgJiYgZmlsdGVyICE9ICcnKSB7XG4gICAgICAgIG1vZGVsTmFtZVVybCArPSBgP2ZpbHRlcj0ke2ZpbHRlcn1gO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbW9kZWxOYW1lVXJsICs9ICc/ZmlsdGVyPXt9JztcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmh0dHAuZGVsZXRlKG1vZGVsTmFtZVVybCkubWFwKCh2YWx1ZSwgaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS50aHJvdyhlcnJvcik7XG4gICAgICB9KVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gT2JzZXJ2YWJsZS50aHJvdyhuZXcgRXJyb3IoYENvdWxkIG5vdCBkZWxldGUgJHtkYXRhTW9kZWxOYW1lfS4gJHt0aGlzLmludmFsaWREYXRhTW9kZWxOYW1lfWApKTtcbiAgICB9XG4gIH1cblxuICAvLyBQQVRDSCAve3RlbmFudE5hbWV9L2RhdGFtb2RlbC97ZGF0YXNvdXJjZX0ve2FwcE5hbWV9L3tkYXRhTW9kZWxOYW1lfVxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGRhdGFNb2RlbE5hbWUgRGF0YSBtb2RlbCBuYW1lIHdoaWNoIGlzIHRvIGJlIHVwZGF0ZWRcbiAgICogQHBhcmFtIGRhdGFNb2RlbE9iaiBOZXcgZGF0YSBtb2RlbCBvYmplY3RcbiAgICovXG4gIHVwZGF0ZShkYXRhTW9kZWxOYW1lLCB1cGRhdGVPYmplY3QpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGlmIChkYXRhTW9kZWxOYW1lICYmIHVwZGF0ZU9iamVjdCkge1xuICAgICAgLy8gY29uc3QgbW9kZWxOYW1lVXJsID0gYCR7dGhpcy5nZXREYXRhU291cmNlVVJMKGRhdGFNb2RlbE5hbWUpfSR7ZGF0YU1vZGVsTmFtZX1gO1xuICAgICAgY29uc3QgbW9kZWxOYW1lVXJsID0gdGhpcy5nZXREYXRhU291cmNlVVJMKGRhdGFNb2RlbE5hbWUpICsgZGF0YU1vZGVsTmFtZTtcbiAgICAgIHJldHVybiB0aGlzLmh0dHAucGF0Y2gobW9kZWxOYW1lVXJsLCB1cGRhdGVPYmplY3QpLm1hcCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH0pLmNhdGNoKGVycm9yID0+IHtcbiAgICAgICAgcmV0dXJuIE9ic2VydmFibGUudGhyb3coZXJyb3IpO1xuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIE9ic2VydmFibGUudGhyb3cobmV3IEVycm9yKGBDb3VsZCBub3QgdXBkYXRlICR7ZGF0YU1vZGVsTmFtZX0uICR7dGhpcy5pbnZhbGlkRGF0YU1vZGVsTmFtZX1gKSk7XG4gICAgfVxuICB9XG5cbiAgLy8gR0VUIC97dGVuYW50TmFtZX0vZGF0YW1vZGVsL3tkYXRhc291cmNlfS97YXBwTmFtZX0ve2RhdGFNb2RlbE5hbWV9L3tkYXRhTW9kZWxJZH1cbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSBkYXRhTW9kZWxOYW1lIERhdGEgbW9kZWwgbmFtZSB3aGljaCBpcyB0byBiZSB1cGRhdGVkXG4gICAqIEBwYXJhbSBkYXRhTW9kZWxJZCBEYXRhIG1vZGVsIGlkIHdoaWNoIGlzIHRvIGJlIHVwZGF0ZWRcbiAgICovXG4gIGdldEJ5SWQoZGF0YU1vZGVsTmFtZSwgZGF0YU1vZGVsSWQpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIGlmIChkYXRhTW9kZWxOYW1lKSB7XG4gICAgICBpZiAoZGF0YU1vZGVsSWQpIHtcbiAgICAgICAgLy8gY29uc3QgbW9kZWxOYW1lVXJsID0gYCR7dGhpcy5nZXREYXRhU291cmNlVVJMKGRhdGFNb2RlbE5hbWUpfSR7ZGF0YU1vZGVsTmFtZX0vJHtkYXRhTW9kZWxJZH1gO1xuICAgICAgICBjb25zdCBtb2RlbE5hbWVVcmwgPSB0aGlzLmdldERhdGFTb3VyY2VVUkwoZGF0YU1vZGVsTmFtZSkgKyBkYXRhTW9kZWxOYW1lICsgXCIvXCIgKyBkYXRhTW9kZWxJZDtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5nZXQobW9kZWxOYW1lVXJsKS5tYXAoKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlLnRocm93KGVycm9yKTtcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIE9ic2VydmFibGUudGhyb3cobmV3IEVycm9yKGBDb3VsZCBub3QgZ2V0ICR7ZGF0YU1vZGVsTmFtZX0gYnkgaWQgJHtkYXRhTW9kZWxJZH0uICR7dGhpcy5pbnZhbGlkRGF0YU1vZGVsSWR9YCkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBPYnNlcnZhYmxlLnRocm93KG5ldyBFcnJvcihgQ291bGQgbm90IGdldCAke2RhdGFNb2RlbE5hbWV9IGJ5IGlkICR7ZGF0YU1vZGVsSWR9LiAke3RoaXMuaW52YWxpZERhdGFNb2RlbE5hbWV9YCkpO1xuICAgIH1cbiAgfVxuXG4gIC8vIERFTEVURSAve3RlbmFudE5hbWV9L2RhdGFtb2RlbC97ZGF0YXNvdXJjZX0ve2FwcE5hbWV9L3tkYXRhTW9kZWxOYW1lfS97ZGF0YU1vZGVsSWR9XG4gIC8qKlxuICAgKlxuICAgKiBAcGFyYW0gZGF0YU1vZGVsTmFtZSBEYXRhIG1vZGVsIG5hbWUgd2hpY2ggaXMgdG8gYmUgZGVsZXRlZFxuICAgKiBAcGFyYW0gZGF0YU1vZGVsSWQgRGF0YSBtb2RlbCBpZCB3aGljaCBpcyB0byBiZSBkZWxldGVkXG4gICAqL1xuICBkZWxldGVCeUlkKGRhdGFNb2RlbE5hbWUsIGRhdGFNb2RlbElkKSB7XG4gICAgaWYgKGRhdGFNb2RlbE5hbWUpIHtcbiAgICAgIGlmIChkYXRhTW9kZWxJZCkge1xuICAgICAgICAvLyBjb25zdCBtb2RlbE5hbWVVcmwgPSBgJHt0aGlzLmdldERhdGFTb3VyY2VVUkwoZGF0YU1vZGVsTmFtZSl9JHtkYXRhTW9kZWxOYW1lfS8ke2RhdGFNb2RlbElkfWA7XG4gICAgICAgIGNvbnN0IG1vZGVsTmFtZVVybCA9IHRoaXMuZ2V0RGF0YVNvdXJjZVVSTChkYXRhTW9kZWxOYW1lKSArIGRhdGFNb2RlbE5hbWUgKyBcIi9cIiArIGRhdGFNb2RlbElkO1xuICAgICAgICByZXR1cm4gdGhpcy5odHRwLmRlbGV0ZShtb2RlbE5hbWVVcmwpLm1hcCgodmFsdWUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7XG4gICAgICAgICAgcmV0dXJuIE9ic2VydmFibGUudGhyb3coZXJyb3IpO1xuICAgICAgICB9KVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgT2JzZXJ2YWJsZS50aHJvdyhuZXcgRXJyb3IoYENvdWxkIG5vdCBnZXQgJHtkYXRhTW9kZWxOYW1lfSBieSBpZCAke2RhdGFNb2RlbElkfS4gJHt0aGlzLmludmFsaWREYXRhTW9kZWxJZH1gKSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBPYnNlcnZhYmxlLnRocm93KG5ldyBFcnJvcihgQ291bGQgbm90IGRlbGV0ZSAke2RhdGFNb2RlbE5hbWV9IGJ5IGlkICR7ZGF0YU1vZGVsSWR9LiAke3RoaXMuaW52YWxpZERhdGFNb2RlbE5hbWV9YCkpO1xuICAgIH1cbiAgfVxuXG4gIC8vUEFUQ0ggL3t0ZW5hbnROYW1lfS9kYXRhbW9kZWwve2RhdGFzb3VyY2V9L3thcHBOYW1lfS97ZGF0YU1vZGVsTmFtZX0ve2RhdGFNb2RlbElkfVxuICAvKipcbiAgICpcbiAgICogQHBhcmFtIGRhdGFNb2RlbE5hbWUgRGF0YSBtb2RlbCBuYW1lIHdoaWNoIGlzIHRvIGJlIHVwZGF0ZVxuICAgKiBAcGFyYW0gZGF0YU1vZGVsSWQgRGF0YSBtb2RlbCBpZCB3aGljaCBpcyB0byBiZSB1cGRhdGVkXG4gICAqIEBwYXJhbSBkYXRhTW9kZWxPYmogRGF0YSBNb2RlbCBvYmplY3Qgd2hpY2ggaXMgdG8gYmUgaW5zZXJ0ZWRcbiAgICovXG4gIHVwZGF0ZUJ5SWQoZGF0YU1vZGVsTmFtZSwgZGF0YU1vZGVsSWQsIGRhdGFNb2RlbE9iaikge1xuICAgIGlmIChkYXRhTW9kZWxOYW1lKSB7XG4gICAgICBpZiAoZGF0YU1vZGVsSWQpIHtcbiAgICAgICAgLy8gY29uc3QgbW9kZWxOYW1lVXJsID0gYCR7dGhpcy5nZXREYXRhU291cmNlVVJMKGRhdGFNb2RlbE5hbWUpfSR7ZGF0YU1vZGVsTmFtZX0vJHtkYXRhTW9kZWxJZH1gO1xuICAgICAgICBjb25zdCBtb2RlbE5hbWVVcmwgPSB0aGlzLmdldERhdGFTb3VyY2VVUkwoZGF0YU1vZGVsTmFtZSkgKyBkYXRhTW9kZWxOYW1lICsgXCIvXCIgKyBkYXRhTW9kZWxJZDtcbiAgICAgICAgdmFyIGRtT2JqID0gT2JqZWN0LmFzc2lnbih7fSwgZGF0YU1vZGVsT2JqKTtcbiAgICAgICAgZGVsZXRlIGRtT2JqWydfaWQnXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHR0cC5wYXRjaChtb2RlbE5hbWVVcmwsIGRtT2JqKS5tYXAoKHZhbHVlLCBpbmRleCkgPT4ge1xuICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4ge1xuICAgICAgICAgIHJldHVybiBPYnNlcnZhYmxlLnRocm93KGVycm9yKTtcbiAgICAgICAgfSlcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIE9ic2VydmFibGUudGhyb3cobmV3IEVycm9yKGBDb3VsZCBub3QgZ2V0ICR7ZGF0YU1vZGVsTmFtZX0gYnkgaWQgJHtkYXRhTW9kZWxJZH0uICR7dGhpcy5pbnZhbGlkRGF0YU1vZGVsSWR9YCkpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gT2JzZXJ2YWJsZS50aHJvdyhuZXcgRXJyb3IoYENvdWxkIG5vdCBkZWxldGUgJHtkYXRhTW9kZWxOYW1lfSBieSBpZCAke2RhdGFNb2RlbElkfS4gJHt0aGlzLmludmFsaWREYXRhTW9kZWxOYW1lfWApKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHRvUXVlcnlTdHJpbmcob2JqKSB7XG4gICAgY29uc3QgcGFydHMgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGkgaW4gb2JqKSB7XG4gICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGkpICYmIHRoaXMuY2hlY2tJZlZhbGlkKG9ialtpXSkpIHtcbiAgICAgICAgcGFydHMucHVzaCgoaSkgKyAnPScgKyBKU09OLnN0cmluZ2lmeShvYmpbaV0pKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzLmpvaW4oJyYnKTtcbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tJZlZhbGlkKHZhbHVlOiBhbnkpIHtcbiAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCB8fCB2YWx1ZSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZ2V0RGF0YVNvdXJjZVVSTChkYXRhTW9kZWxOYW1lKSB7XG4gICAgaWYgKCF0aGlzLmRtRHMpIHtcbiAgICAgIHRoaXMuZG1EcyA9IHdpbmRvd1snbmV1dHJpbm9zJ11bJ2RhdGFTb3VyY2UnXTtcbiAgICB9XG4gICAgY29uc3QgZHNEbSA9IHRoaXMuZG1Ec1tkYXRhTW9kZWxOYW1lXTtcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gdGhpcy5zeXN0ZW1TZXJ2aWNlLnByb3BlcnRpZXM7XG4gICAgaWYgKGRzRG0pIHtcbiAgICAgIHJldHVybiBwcm9wZXJ0aWVzLmJhc2VVcmwgKyBwcm9wZXJ0aWVzLnRlbmFudE5hbWUgKyAnL2RhdGFtb2RlbC8nICsgZHNEbSArICcvJyArIHByb3BlcnRpZXMuYXBwTmFtZSArICcvJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuc3lzdGVtU2VydmljZS5nZXREYXRhTW9kZWxVcmwoKTtcbiAgICB9XG4gIH1cblxuXG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlLCBJbmplY3RvciB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHtcbiAgSHR0cEV2ZW50LFxuICBIdHRwSW50ZXJjZXB0b3IsXG4gIEh0dHBIYW5kbGVyLFxuICBIdHRwUmVxdWVzdCxcbiAgSHR0cEhlYWRlcnMsXG4gIEh0dHBSZXNwb25zZSxcbiAgSHR0cEVycm9yUmVzcG9uc2UsXG4gIEh0dHBDbGllbnRcbn0gZnJvbSAnQGFuZ3VsYXIvY29tbW9uL2h0dHAnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgQmVoYXZpb3JTdWJqZWN0IH0gZnJvbSAncnhqcy9SeCc7XG5pbXBvcnQgeyBOSFRUUExvYWRlclNlcnZpY2UgfSBmcm9tICcuL24tSFRUUExvYWRlci5zZXJ2aWNlJztcbmltcG9ydCB7IE5TeXN0ZW1TZXJ2aWNlIH0gZnJvbSAnLi9uLXN5c3RlbS5zZXJ2aWNlJztcbmltcG9ydCB7IE5TZXNzaW9uU3RvcmFnZVNlcnZpY2UgfSBmcm9tICcuL24tc2Vzc2lvblN0b3JhZ2Uuc2VydmljZSc7XG5pbXBvcnQgeyBOTG9jYWxTdG9yYWdlU2VydmljZSB9IGZyb20gJy4vbi1sb2NhbFN0b3JhZ2Uuc2VydmljZSc7XG5pbXBvcnQgeyBOVG9rZW5TZXJ2aWNlIH0gZnJvbSAnLi9uLXRva2VuLnNlcnZpY2UnO1xuaW1wb3J0IHsgTlB1YlN1YlNlcnZpY2UgfSBmcm9tICcuL24tcHViU3ViLnNlcnZpY2UnO1xuXG5ASW5qZWN0YWJsZSgpXG5leHBvcnQgY2xhc3MgTkh0dHBTZXJ2aWNlIHtcbiAgdGltZW91dCA9IDkwMDAwO1xuICBzeXN0ZW1TZXJ2aWNlO1xuICBuU2Vzc2lvblN0b3JhZ2U7XG4gIGFwcFByb3BlcnRpZXM7XG4gIGlzUmVmcmVzaGluZ1Rva2VuID0gZmFsc2U7XG4gIG5QdWJTdWJTZXJ2aWNlO1xuICB0b2tlblN1YmplY3Q6IEJlaGF2aW9yU3ViamVjdDxzdHJpbmc+ID0gbmV3IEJlaGF2aW9yU3ViamVjdDxzdHJpbmc+KG51bGwpO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgbkhUVFBMb2FkZXI6IE5IVFRQTG9hZGVyU2VydmljZSwgcHJpdmF0ZSBpbmo6IEluamVjdG9yLFxuICAgIHByaXZhdGUgbkxvY2FsU3RvcmFnZVNlcnZpY2U6IE5Mb2NhbFN0b3JhZ2VTZXJ2aWNlLCBwcml2YXRlIG5Ub2tlblNlcnZpY2U6IE5Ub2tlblNlcnZpY2UpIHtcbiAgICB0aGlzLnN5c3RlbVNlcnZpY2UgPSBOU3lzdGVtU2VydmljZS5nZXRJbnN0YW5jZSgpO1xuICAgIHRoaXMublNlc3Npb25TdG9yYWdlID0gbmV3IE5TZXNzaW9uU3RvcmFnZVNlcnZpY2UoKTtcbiAgICB0aGlzLmFwcFByb3BlcnRpZXMgPSB0aGlzLnN5c3RlbVNlcnZpY2UuZ2V0VmFsKCdwcm9wZXJ0aWVzJyk7XG4gICAgdGhpcy5uUHViU3ViU2VydmljZSA9IG5ldyBOUHViU3ViU2VydmljZSgpO1xuICB9XG5cbiAgaW50ZXJjZXB0KHJlcTogSHR0cFJlcXVlc3Q8YW55PiwgbmV4dDogSHR0cEhhbmRsZXIpOiBPYnNlcnZhYmxlPEh0dHBFdmVudDxhbnk+PiB7XG4gICAgdGhpcy5yZXF1ZXN0SW50ZXJjZXB0b3IoKTtcblxuICAgIC8vIFBhc3Mgb24gdGhlIGNsb25lZCByZXF1ZXN0IGluc3RlYWQgb2YgdGhlIG9yaWdpbmFsIHJlcXVlc3QuXG4gICAgcmV0dXJuIG5leHQuaGFuZGxlKHRoaXMucmVxdWVzdE9wdGlvbnMocmVxKSlcbiAgICAgIC50aW1lb3V0KHRoaXMudGltZW91dClcbiAgICAgIC5jYXRjaChlcnJvciA9PiB0aGlzLm9uQ2F0Y2goZXJyb3IsIHJlcSwgbmV4dCkpXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIHRoaXMub25GaW5hbGx5KCk7XG4gICAgICB9KTtcbiAgfTtcblxuICB1cGRhdGVUb2tlbihlcnJvcjogSHR0cEVycm9yUmVzcG9uc2UsIHJlcTogSHR0cFJlcXVlc3Q8YW55PiwgbmV4dDogSHR0cEhhbmRsZXIpOiBhbnkge1xuICAgIGlmICh0aGlzLmFwcFByb3BlcnRpZXMuYXBwQXV0aGVudGljYXRpb25TdHJhdGVneSA9PT0gJ2FjdGl2ZURpcmVjdG9yeScgfHxcbiAgICAgIHRoaXMuYXBwUHJvcGVydGllcy5hcHBBdXRoZW50aWNhdGlvblN0cmF0ZWd5ID09PSAnbG9jYWxBdXRoJykge1xuICAgICAgaWYgKCF0aGlzLmlzUmVmcmVzaGluZ1Rva2VuKSB7XG4gICAgICAgIHRoaXMuaXNSZWZyZXNoaW5nVG9rZW4gPSB0cnVlO1xuXG4gICAgICAgIC8vIFJlc2V0IGhlcmUgc28gdGhhdCB0aGUgZm9sbG93aW5nIHJlcXVlc3RzIHdhaXQgdW50aWwgdGhlIHRva2VuXG4gICAgICAgIC8vIGNvbWVzIGJhY2sgZnJvbSB0aGUgcmVmcmVzaFRva2VuIGNhbGwuXG4gICAgICAgIHRoaXMudG9rZW5TdWJqZWN0Lm5leHQobnVsbCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMucmVmcmVzaFRva2VuKClcbiAgICAgICAgICAuc3dpdGNoTWFwKCh0b2tlbnNPYmo6IE9iamVjdCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRva2Vuc09iaikge1xuICAgICAgICAgICAgICB0aGlzLm5Ub2tlblNlcnZpY2UudXBkYXRlVG9rZW5zKHRva2Vuc09iaik7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld1Rva2VuID0gdG9rZW5zT2JqWydhY2Nlc3NUb2tlbiddO1xuICAgICAgICAgICAgICB0aGlzLnRva2VuU3ViamVjdC5uZXh0KG5ld1Rva2VuKTtcbiAgICAgICAgICAgICAgcmV0dXJuIG5leHQuaGFuZGxlKHRoaXMucmVxdWVzdE9wdGlvbnMocmVxKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gT2JzZXJ2YWJsZS50aHJvdyhuZXcgRXJyb3IoJ0NhblxcJ3QgcmVmcmVzaCB0aGUgdG9rZW4nKSk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuY2F0Y2goZXJyID0+IHRoaXMub25DYXRjaEVycm9yKGVycikpXG4gICAgICAgICAgLmZpbmFsbHkoKCkgPT4gdGhpcy5pc1JlZnJlc2hpbmdUb2tlbiA9IGZhbHNlKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudG9rZW5TdWJqZWN0XG4gICAgICAgICAgLmZpbHRlcih0b2tlbiA9PiB0b2tlbiAhPSBudWxsKVxuICAgICAgICAgIC50YWtlKDEpXG4gICAgICAgICAgLnN3aXRjaE1hcCh0b2tlbiA9PiBuZXh0LmhhbmRsZSh0aGlzLnJlcXVlc3RPcHRpb25zKHJlcSkpKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMub25DYXRjaEVycm9yKGVycm9yKTtcbiAgICB9XG4gIH1cblxuICByZWZyZXNoVG9rZW4oKSB7XG4gICAgY29uc3QgaHR0cCA9IHRoaXMuaW5qLmdldChIdHRwQ2xpZW50KTtcbiAgICBjb25zdCBhcHBQcm9wZXJ0aWVzID0gdGhpcy5zeXN0ZW1TZXJ2aWNlLmdldFZhbCgncHJvcGVydGllcycpO1xuICAgIGNvbnN0IHJlZnJlc2hVcmwgPSB0aGlzLnN5c3RlbVNlcnZpY2UuZ2V0QXV0aFVybCgpICsgYXBwUHJvcGVydGllcy5hcHBOYW1lICsgJy9yZWZyZXNoJztcbiAgICBjb25zdCBib2R5ID0ge1xuICAgICAgJ3BsYXRmb3JtRGV0YWlscyc6IHRoaXMuc3lzdGVtU2VydmljZS5nZXRQbGF0Zm9ybURldGFpbHModGhpcy5zeXN0ZW1TZXJ2aWNlLmNoZWNrRGV2aWNlKCkpLFxuICAgICAgJ3VzZXJLZXknOiB0aGlzLm5TZXNzaW9uU3RvcmFnZS5nZXRWYWx1ZSgndXNlck9iaicpWyd1c2VyS2V5J10sXG4gICAgICAncmVmcmVzaFRva2VuJzogdGhpcy5uU2Vzc2lvblN0b3JhZ2UuZ2V0VmFsdWUoJ3JlZnJlc2hUb2tlbicpXG4gICAgfTtcbiAgICBib2R5LnBsYXRmb3JtRGV0YWlsc1sndXVpZCddID0gdGhpcy5uTG9jYWxTdG9yYWdlU2VydmljZS5nZXRWYWx1ZSgndXVpZCcpO1xuICAgIHJldHVybiBodHRwLnBvc3QocmVmcmVzaFVybCwgYm9keSk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBSZXF1ZXN0IG9wdGlvbnMuXG4gICAqIEBwYXJhbSBvcHRpb25zXG4gICAqIEByZXR1cm5zIEh0dHBSZXF1ZXN0XG4gICAqL1xuICBwcml2YXRlIHJlcXVlc3RPcHRpb25zKHJlcT86IEh0dHBSZXF1ZXN0PGFueT4pIHtcbiAgICBsZXQgaGVhZGVycyA9IHJlcS5oZWFkZXJzO1xuICAgIGlmIChyZXEuaGVhZGVycyA9PSBudWxsKSB7XG4gICAgICBoZWFkZXJzID0gbmV3IEh0dHBIZWFkZXJzKCk7XG4gICAgfVxuICAgIHJlcSA9IHJlcS5jbG9uZSh7XG4gICAgICB1cmw6IHRoaXMuZ2V0RnVsbFVybChyZXEudXJsKSxcbiAgICAgIGhlYWRlcnM6IGhlYWRlcnNcbiAgICB9KTtcbiAgICBjb25zdCBiYXNlVXJsID0gTlN5c3RlbVNlcnZpY2UuZ2V0SW5zdGFuY2UoKS5nZXRWYWwoJ2Jhc2VVcmwnKTtcbiAgICBjb25zdCBpc0FydCA9IChiYXNlVXJsICE9PSAnJyAmJiByZXEudXJsLmluY2x1ZGVzKGJhc2VVcmwpKTtcbiAgICByZXR1cm4gIGlzQXJ0ID8gdGhpcy5hZGREZWZhdWx0SGVhZGVycyhyZXEpIDogcmVxO1xuICB9XG5cblxuICAvKipcbiAgKiBEZWZhdWx0IG9wdGlvbnMuXG4gICogQHBhcmFtIG9wdGlvbnNcbiAgKiBAcmV0dXJucyBIdHRwSGVhZGVkcnNcbiAgKi9cbiAgcHJpdmF0ZSBhZGREZWZhdWx0SGVhZGVycyhyZXE6IGFueSkge1xuICAgIC8qKlxuICAgICAqIFRPRE86IEFkZCBhbGwgZGVmYXVsdCBIZWFkZXJzIG92ZXIgaGVyZVxuICAgICAqL1xuICAgIGlmICghcmVxLmhlYWRlcnMuaGFzKCdBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW4nKSkge1xuICAgICAgcmVxLmhlYWRlcnMgPSByZXEuaGVhZGVycy5zZXQoJ0FjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpbicsICcqJyk7XG4gICAgfVxuXG4gICAgaWYgKCFyZXEuaGVhZGVycy5oYXMoJ0NvbnRlbnQtVHlwZScpKSB7XG4gICAgICByZXEuaGVhZGVycyA9IHJlcS5oZWFkZXJzLnNldCgnQ29udGVudC1UeXBlJywgJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICB9IGVsc2UgaWYgKHJlcS5oZWFkZXJzLmhhcygnQ29udGVudC1UeXBlJykgJiYgKHJlcS5oZWFkZXJzLmdldCgnQ29udGVudC1UeXBlJykgPT09ICduby1jb250ZW50JykpIHtcbiAgICAgIHJlcS5oZWFkZXJzID0gcmVxLmhlYWRlcnMuZGVsZXRlKCdDb250ZW50LVR5cGUnKTtcbiAgICB9XG5cbiAgICBpZiAoIXJlcS5oZWFkZXJzLmhhcygnQWNjZXB0JykpIHtcbiAgICAgIHJlcS5oZWFkZXJzID0gcmVxLmhlYWRlcnMuc2V0KCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgIH1cblxuICAgIGlmICghcmVxLmhlYWRlcnMuaGFzKCdBdXRob3JpemF0aW9uJykpIHtcbiAgICAgIHRoaXMuYXBwUHJvcGVydGllcyA9IHRoaXMuc3lzdGVtU2VydmljZS5nZXRWYWwoJ3Byb3BlcnRpZXMnKTtcbiAgICAgIGlmICh0aGlzLmFwcFByb3BlcnRpZXMgJiYgdGhpcy5hcHBQcm9wZXJ0aWVzLmFwcEF1dGhlbnRpY2F0aW9uU3RyYXRlZ3kgPT09ICdiYXNpY0F1dGgnKSB7XG4gICAgICAgIGxldCB1c2VybmFtZSwgcGFzc3dvcmQ7XG4gICAgICAgIGlmICh0aGlzLmFwcFByb3BlcnRpZXMuYmFzaWNBdXRoVXNlciAmJiB0aGlzLmFwcFByb3BlcnRpZXMuYmFzaWNBdXRoUGFzc3dvcmQpIHtcbiAgICAgICAgICB1c2VybmFtZSA9IHRoaXMuYXBwUHJvcGVydGllcy5iYXNpY0F1dGhVc2VyO1xuICAgICAgICAgIHBhc3N3b3JkID0gdGhpcy5hcHBQcm9wZXJ0aWVzLmJhc2ljQXV0aFBhc3N3b3JkO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHVzZXJuYW1lID0gXCJiaGl2ZS1hcnQtcHJveHl1c2VyXCI7XG4gICAgICAgICAgcGFzc3dvcmQgPSBcInBhc3N3b3JkXCI7XG4gICAgICAgICAgY29uc29sZS53YXJuKFwiQXV0aGVudGljYXRpb24gc3RyYXRlZ3k6IEJhc2ljIEF1dGguIGJhc2ljQXV0aFVzZXIgYW5kIGJhc2ljQXV0aFBhc3N3b3JkIGFyZSBub3QgY29uZmlndXJlZCBpbiBlbnZpcm9ubWVudC4gU2V0dGluZyBkZWZhdWx0IHZhbHVlcy5cIik7XG4gICAgICAgIH1cbiAgICAgICAgcmVxLmhlYWRlcnMgPSByZXEuaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCAnQmFzaWMgJyArIGJ0b2EodXNlcm5hbWUgKyBcIjpcIiArIHBhc3N3b3JkKSk7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuYXBwUHJvcGVydGllcyAmJiAodGhpcy5hcHBQcm9wZXJ0aWVzLmFwcEF1dGhlbnRpY2F0aW9uU3RyYXRlZ3kgPT09ICdhY3RpdmVEaXJlY3RvcnknIHx8XG4gICAgICAgIHRoaXMuYXBwUHJvcGVydGllcy5hcHBBdXRoZW50aWNhdGlvblN0cmF0ZWd5ID09PSAnbG9jYWxBdXRoJykpIHtcbiAgICAgICAgaWYgKHRoaXMublNlc3Npb25TdG9yYWdlLmdldFZhbHVlKCdhY2Nlc3NUb2tlbicpKSB7XG4gICAgICAgICAgcmVxLmhlYWRlcnMgPSByZXEuaGVhZGVycy5zZXQoJ0F1dGhvcml6YXRpb24nLCAnQmVhcmVyICcgKyB0aGlzLm5TZXNzaW9uU3RvcmFnZS5nZXRWYWx1ZSgnYWNjZXNzVG9rZW4nKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBBUEkgdXJsLlxuICAgKiBAcGFyYW0gdXJsXG4gICAqIEByZXR1cm5zIHN0cmluZ1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRGdWxsVXJsKHVybDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyByZXR1cm4gZnVsbCBVUkwgdG8gQVBJIGhlcmVcbiAgICByZXR1cm4gdXJsO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcXVlc3QgaW50ZXJjZXB0b3IuXG4gICAqL1xuICBwcml2YXRlIHJlcXVlc3RJbnRlcmNlcHRvcigpOiB2b2lkIHtcbiAgICB0aGlzLm5IVFRQTG9hZGVyLmlzSFRUUFJlcXVlc3RJblByb2dyZXNzKHRydWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc3BvbnNlIGludGVyY2VwdG9yLlxuICAgKi9cbiAgcHJpdmF0ZSByZXNwb25zZUludGVyY2VwdG9yKCk6IHZvaWQge1xuICAgIHRoaXMubkhUVFBMb2FkZXIuaXNIVFRQUmVxdWVzdEluUHJvZ3Jlc3MoZmFsc2UpO1xuICB9XG5cbiAgLyoqXG4gICAgKiBFcnJvciBoYW5kbGVyLlxuICAgICogQHBhcmFtIGVycm9yXG4gICAgKiBAcGFyYW0gY2F1Z2h0XG4gICAgKiBAcmV0dXJucyBFcnJvck9ic2VydmFibGVcbiAgICAqL1xuICBwcml2YXRlIG9uQ2F0Y2goZXJyb3I6IEh0dHBFcnJvclJlc3BvbnNlLCByZXE6IEh0dHBSZXF1ZXN0PGFueT4sIG5leHQ6IEh0dHBIYW5kbGVyKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBIdHRwRXJyb3JSZXNwb25zZSkge1xuICAgICAgaWYgKCg8SHR0cEVycm9yUmVzcG9uc2U+ZXJyb3IpLnN0YXR1cyA9PT0gNDAzICYmICg8SHR0cEVycm9yUmVzcG9uc2U+ZXJyb3IpLmVycm9yLm1lc3NhZ2UgPT09ICdqd3QgZXhwaXJlZCcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlVG9rZW4oZXJyb3IsIHJlcSwgbmV4dCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdGhpcy5vblN1YnNjcmliZUVycm9yKGVycm9yKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMub25TdWJzY3JpYmVFcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIG9uU3Vic2NyaWJlRXJyb3JcbiAgICogQHBhcmFtIGVycm9yXG4gICAqL1xuICBwcml2YXRlIG9uU3Vic2NyaWJlRXJyb3IoZXJyOiBIdHRwRXJyb3JSZXNwb25zZSk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgdGhpcy5uSFRUUExvYWRlci5hbGVydEVycm9yKGVycik7XG4gICAgcmV0dXJuIHRoaXMub25DYXRjaEVycm9yKGVycik7XG4gIH1cbiAgLyoqXG4gICAqIG9uRmluYWxseVxuICAgKi9cbiAgcHJpdmF0ZSBvbkZpbmFsbHkoKTogdm9pZCB7XG4gICAgdGhpcy5yZXNwb25zZUludGVyY2VwdG9yKCk7XG4gIH1cblxuICBwcml2YXRlIG9uQ2F0Y2hFcnJvcihlcnJvcjogSHR0cEVycm9yUmVzcG9uc2UpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgIHJldHVybiBPYnNlcnZhYmxlLnRocm93KGVycm9yKTtcbiAgfVxuXG59XG4iLCJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG4vLyBpbXBvcnQgeyBNYXRTbmFja0JhciB9IGZyb20gJ0Bhbmd1bGFyL21hdGVyaWFsJztcbmltcG9ydCB7IFN1YmplY3QgfSBmcm9tICdyeGpzL1N1YmplY3QnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSB9IGZyb20gJ3J4anMvT2JzZXJ2YWJsZSc7XG5pbXBvcnQgeyBOU3lzdGVtU2VydmljZSB9IGZyb20gJy4vbi1zeXN0ZW0uc2VydmljZSc7XG5pbXBvcnQgeyBOUHViU3ViU2VydmljZSB9IGZyb20gJy4vbi1wdWJTdWIuc2VydmljZSc7XG5cblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIE5TbmFja2JhclNlcnZpY2Uge1xuICBzbmFja0Jhckxpc3RuZXI7XG4gIHByaXZhdGUgc25hY2tTZXJ2aWNlID0gbmV3IFN1YmplY3Q8YW55PigpO1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIG5QdWJTdWJTZXJ2aWNlOiBOUHViU3ViU2VydmljZSkge1xuICAgIGlmIChOU3lzdGVtU2VydmljZS5nZXRJbnN0YW5jZSgpLmdldFZhbCgndXNlRGVmYXVsdEV4Y2VwdGlvblVJJykpIHtcbiAgICAgIHRoaXMuc25hY2tCYXJMaXN0bmVyID0gdGhpcy5uUHViU3ViU2VydmljZS4kc3ViKCdvcGVuU25hY2tCYXInLCAobXNnKSA9PiB7XG4gICAgICAgIHRoaXMub3BlblNuYWNrQmFyKG1zZyk7XG4gICAgICB9KVxuICAgIH1cbiAgfVxuXG4gIGdldCgpIHtcbiAgICByZXR1cm4gdGhpcy5zbmFja1NlcnZpY2UuYXNPYnNlcnZhYmxlKCk7XG4gIH1cblxuXG5cbiAgYWRkKGRhdGE6IHtcbiAgICBtc2c6IHN0cmluZywgdGltZW91dD86IG51bWJlciwgYmFja2dyb3VuZD86IHN0cmluZywgY29sb3I/OiBzdHJpbmcsIGN1c3RvbUNsYXNzPzogYW55LFxuICAgIGFjdGlvbj86IHsgdGV4dDogc3RyaW5nLCBvbkNsaWNrPzogRnVuY3Rpb24sIGNvbG9yPzogc3RyaW5nIH0sIG9uQWRkPzogRnVuY3Rpb24sIG9uUmVtb3ZlPzogRnVuY3Rpb25cbiAgfSkge1xuICAgIHRoaXMuc25hY2tTZXJ2aWNlLm5leHQoe1xuICAgICAgYWN0aW9uOiAnYWRkJyxcbiAgICAgIGRhdGE6IGRhdGFcbiAgICB9KTtcbiAgfVxuXG4gIHJlbW92ZShpZDogc3RyaW5nKSB7XG4gICAgdGhpcy5zbmFja1NlcnZpY2UubmV4dCh7IGFjdGlvbjogJ3JlbW92ZScsIGlkOiBpZCB9KTtcbiAgfVxuXG4gIGNsZWFyKCkge1xuICAgIHRoaXMuc25hY2tTZXJ2aWNlLm5leHQoeyBhY3Rpb246ICdjbGVhcicgfSk7XG4gIH1cblxuICBvcGVuU25hY2tCYXIobWVzc2FnZSwgdGltZW91dD8sICkge1xuICAgIHRoaXMuYWRkKHtcbiAgICAgIG1zZzogbWVzc2FnZSxcbiAgICAgIHRpbWVvdXQ6IHRpbWVvdXQgfHwgNTAwMCxcbiAgICAgIGFjdGlvbjoge1xuICAgICAgICB0ZXh0OiAnQ2xvc2UnLFxuICAgICAgICBvbkNsaWNrOiAoc25hY2spID0+IHtcbiAgICAgICAgIFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIG9uQWRkOiAoc25hY2spID0+IHtcbiAgICAgIH0sXG4gICAgICBvblJlbW92ZTogKHNuYWNrKSA9PiB7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxufVxuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBJbnB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICduLXNuYWNrJyxcbiAgdGVtcGxhdGU6IGBcbiAgICAgPGRpdiBjbGFzcz1cInNuYWNrXCIgW25nU3R5bGVdPVwie2JhY2tncm91bmQ6IGJhY2tncm91bmQgPyBiYWNrZ3JvdW5kIDogJyMzMjMyMzInICwgY29sb3I6IGNvbG9yID8gY29sb3IgOiAnI2ZmZid9XCIgW25nQ2xhc3NdPVwiIFsnc25hY2tiYXItbGF5b3V0JywgJ2N1c3RvbUNsYXNzJyBdXCI+XG4gICAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxuICAgICAgIDwvZGl2PiBcbiAgYCxcbiAgc3R5bGVzOiBbYC5zbmFjay1hY3Rpb257Y3Vyc29yOnBvaW50ZXI7Y29sb3I6IzIxOTZmMztmb250LXdlaWdodDo3MDB9LmNvbnRhaW5lcntkaXNwbGF5OmZsZXg7ZmxleC1kaXJlY3Rpb246cm93O2ZsZXgtd3JhcDp3cmFwfS5jaGlsZHt3aWR0aDo2MCU7ZmxleDoxIDA7bWFyZ2luLXJpZ2h0Oi41ZW19LnNuYWNrYmFycy5ib3R0b20tY2VudGVye2FsaWduLWl0ZW1zOm1pZGRsZTtsZWZ0OjUwJTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwwKTt0cmFuc2Zvcm06dHJhbnNsYXRlKC01MCUsMCk7Ym90dG9tOjFweDthbGlnbi1pdGVtczpjZW50ZXJ9LnNuYWNrYmFyc3twb3NpdGlvbjpmaXhlZDt6LWluZGV4Ojk5OTk5O21heC13aWR0aDoxMDAlO3dvcmQtd3JhcDpicmVhay13b3JkO2Rpc3BsYXk6aW5saW5lO2ZvbnQtZmFtaWx5OlJvYm90bztsZXR0ZXItc3BhY2luZzoxcHh9LnNuYWNre3BhZGRpbmc6MWVtO2JvcmRlci1yYWRpdXM6LjNlbTttYXgtaGVpZ2h0OjUwdmg7b3ZlcmZsb3c6YXV0b31gXVxufSlcbmV4cG9ydCBjbGFzcyBTbmFja0NvbXBvbmVudCB7XG4gIEBJbnB1dCgpIGJhY2tncm91bmQ7XG4gIEBJbnB1dCgpIGNvbG9yO1xuICBASW5wdXQoKSBjdXN0b21DbGFzcztcbn1cbiIsImltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBOU25hY2tiYXJTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vbi1zbmFja2Jhci5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbi1zbmFja2JhcicsXG4gIHRlbXBsYXRlOiBgXG4gICAgICA8ZGl2IGNsYXNzPVwic25hY2tiYXJzXCIgW25nQ2xhc3NdPVwicG9zaXRpb24gfHwgJ2JvdHRvbS1jZW50ZXInXCI+XG4gICAgICAgICAgPG4tc25hY2sgICAqbmdGb3I9XCJsZXQgc25hY2tiYXIgb2Ygc25hY2tzXCIgW2JhY2tncm91bmRdPVwic25hY2tiYXIuYmFja2dyb3VuZCB8fCBiYWNrZ3JvdW5kXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIFtjdXN0b21DbGFzc109XCJzbmFja2Jhci5jdXN0b21DbGFzcyB8fCBjdXN0b21DbGFzc1wiXG4gICAgICAgICAgICAgICAgICAgICAgICBbY29sb3JdPVwic25hY2tiYXIuY29sb3IgfHwgY29sb3IgfHwgY2FsY1RleHRDb2xvcihzbmFja2Jhci5iYWNrZ3JvdW5kIHx8IGJhY2tncm91bmQpXCI+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXJcIj5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNuYWNrLXRleHQgY2hpbGRcIiA+XG4gICAgICAgICAgICAgICAgICB7e3NuYWNrYmFyLm1zZ319XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2ICpuZ0lmPVwic25hY2tiYXIuYWN0aW9uLnRleHRcIiBjbGFzcz1cInNuYWNrLWFjdGlvblwiIChjbGljayk9XCJzbmFja2Jhci5hY3Rpb24ub25DbGljaygpXCJcbiAgICAgICAgICAgICAgICAgICBbbmdTdHlsZV09XCJ7Y29sb3I6IHNuYWNrYmFyLmFjdGlvbi5jb2xvciB8fCBhY2NlbnR9XCI+XG4gICAgICAgICAgICAgICAgICB7e3NuYWNrYmFyLmFjdGlvbi50ZXh0fX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvbi1zbmFjaz5cbiAgICAgIDwvZGl2PlxuICBgLFxuICBzdHlsZXM6IFtgLnNuYWNrLWFjdGlvbntjdXJzb3I6cG9pbnRlcjtjb2xvcjojMjE5NmYzO2ZvbnQtd2VpZ2h0OjcwMH0uY29udGFpbmVye2Rpc3BsYXk6ZmxleDtmbGV4LWRpcmVjdGlvbjpyb3c7ZmxleC13cmFwOndyYXB9LmNoaWxke3dpZHRoOjYwJTtmbGV4OjEgMDttYXJnaW4tcmlnaHQ6LjVlbX0uc25hY2tiYXJzLmJvdHRvbS1jZW50ZXJ7YWxpZ24taXRlbXM6bWlkZGxlO2xlZnQ6NTAlOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLDApO3RyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwwKTtib3R0b206MXB4O2FsaWduLWl0ZW1zOmNlbnRlcn0uc25hY2tiYXJze3Bvc2l0aW9uOmZpeGVkO3otaW5kZXg6OTk5OTk7bWF4LXdpZHRoOjEwMCU7d29yZC13cmFwOmJyZWFrLXdvcmQ7ZGlzcGxheTppbmxpbmU7Zm9udC1mYW1pbHk6Um9ib3RvO2xldHRlci1zcGFjaW5nOjFweH0uc25hY2t7cGFkZGluZzoxZW07Ym9yZGVyLXJhZGl1czouM2VtO21heC1oZWlnaHQ6NTB2aDtvdmVyZmxvdzphdXRvfWBdXG59KVxuZXhwb3J0IGNsYXNzIFNuYWNrYmFyQ29tcG9uZW50IHtcbiAgQElucHV0KCkgcG9zaXRpb246ICd0b3AtbGVmdCcgfCAndG9wLWNlbnRlcicgfCAndG9wLXJpZ2h0JyB8ICdib3R0b20tbGVmdCcgfCAnYm90dG9tLWNlbnRlcicgfCAnYm90dG9tLXJpZ2h0JztcbiAgQElucHV0KCkgbWF4OiBudW1iZXIgPSAxO1xuICBASW5wdXQoKSBiYWNrZ3JvdW5kOiBzdHJpbmc7XG4gIEBJbnB1dCgpIGFjY2VudDogc3RyaW5nO1xuICBASW5wdXQoKSBjb2xvcjogc3RyaW5nO1xuICBASW5wdXQoKSBjdXN0b21DbGFzczogYW55O1xuICBASW5wdXQoKSB0aW1lb3V0OiBudW1iZXI7XG5cbiAgQE91dHB1dCgpIHB1YmxpYyBvbkFkZDogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgpIHB1YmxpYyBvblJlbW92ZTogRXZlbnRFbWl0dGVyPGFueT4gPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcbiAgQE91dHB1dCgpIHB1YmxpYyBvbkNsZWFyOiBFdmVudEVtaXR0ZXI8Ym9vbGVhbj4gPSBuZXcgRXZlbnRFbWl0dGVyPGJvb2xlYW4+KCk7XG5cbiAgc25hY2tzOiBBcnJheTx7XG4gICAgaWQ6IHN0cmluZywgbXNnOiBzdHJpbmcsIHRpbWVvdXQ/OiBudW1iZXIsIGNvbG9yPzogc3RyaW5nLCBiYWNrZ3JvdW5kPzogc3RyaW5nLCBjdXN0b21DbGFzcz86IGFueSwgYWN0aW9uPzoge1xuICAgICAgdGV4dDogc3RyaW5nLCBvbkNsaWNrPzogRnVuY3Rpb24sIGNvbG9yPzogc3RyaW5nXG4gICAgfSwgb25BZGQ/OiBGdW5jdGlvbiwgb25SZW1vdmU/OiBGdW5jdGlvbiwgdGltZW91dE9iaj86IGFueVxuICB9PiA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgc25hY2tiYXJTZXJ2aWNlOiBOU25hY2tiYXJTZXJ2aWNlKSB7XG4gICAgdGhpcy5zbmFja2JhclNlcnZpY2UuZ2V0KClcbiAgICAgIC5zdWJzY3JpYmUoc25hY2sgPT4ge1xuICAgICAgICBpZiAoc25hY2suYWN0aW9uID09PSAnYWRkJykge1xuICAgICAgICAgIHRoaXMuYWRkKHNuYWNrLmRhdGEpO1xuICAgICAgICB9IGVsc2UgaWYgKHNuYWNrLmFjdGlvbiA9PT0gJ3JlbW92ZScpIHtcbiAgICAgICAgICB0aGlzLnJlbW92ZShzbmFjay5pZCk7XG4gICAgICAgIH0gZWxzZSBpZiAoc25hY2suYWN0aW9uID09PSAnY2xlYXInKSB7XG4gICAgICAgICAgdGhpcy5jbGVhcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgfVxuXG4gIGFkZChzbmFjaykge1xuICAgIGxldCB0aW1lb3V0O1xuICAgIGNvbnN0IGlkID0gdGhpcy51dWlkKCk7XG5cbiAgICBpZiAodGhpcy5tYXggJiYgdGhpcy5tYXggPiAwICYmIHRoaXMuc25hY2tzLmxlbmd0aCA9PT0gdGhpcy5tYXgpIHtcbiAgICAgIHRoaXMucmVtb3ZlKHRoaXMuc25hY2tzWzBdLmlkKTtcbiAgICB9XG5cbiAgICBpZiAoc25hY2sudGltZW91dCB8fCB0aGlzLnRpbWVvdXQpIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5yZW1vdmUoaWQpO1xuICAgICAgfSwgc25hY2sudGltZW91dCB8fCB0aGlzLnRpbWVvdXQpXG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IE9iamVjdC5hc3NpZ24oeyBpZDogaWQsIHRpbWVvdXRPYmo6IHRpbWVvdXQgfSwgc25hY2spO1xuXG4gICAgaWYgKHNuYWNrLmFjdGlvbikge1xuICAgICAgY29uc3QgdGhhdCA9IHRoaXM7XG4gICAgICBjb25zdCBmY24gPSBzbmFjay5hY3Rpb24ub25DbGljayB8fCBuZXcgRnVuY3Rpb24oKTtcbiAgICAgIHNuYWNrLmFjdGlvbi5vbkNsaWNrID0gKCkgPT4ge1xuICAgICAgICBmY24oZGF0YSk7XG4gICAgICAgIHRoYXQucmVtb3ZlKGlkKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgaWYgKHNuYWNrLm9uQWRkKSB7XG4gICAgICBzbmFjay5vbkFkZChkYXRhKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5vbkFkZCkge1xuICAgICAgdGhpcy5vbkFkZC5lbWl0KGRhdGEpO1xuICAgIH1cblxuICAgIHRoaXMuc25hY2tzLnB1c2goZGF0YSk7XG4gIH1cblxuICByZW1vdmUoaWQpIHtcbiAgICBjb25zdCBzbmFjayA9IHRoaXMuc25hY2tzLmZpbmQob2JqID0+IG9iai5pZCA9PT0gaWQpO1xuXG4gICAgaWYgKHNuYWNrKSB7XG4gICAgICBpZiAoc25hY2sub25SZW1vdmUpIHtcbiAgICAgICAgc25hY2sub25SZW1vdmUoc25hY2spO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5vblJlbW92ZSkge1xuICAgICAgICB0aGlzLm9uUmVtb3ZlLmVtaXQoc25hY2spO1xuICAgICAgfVxuXG4gICAgICBpZiAoc25hY2sudGltZW91dE9iaikge1xuICAgICAgICBjbGVhclRpbWVvdXQoc25hY2sudGltZW91dE9iaik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5zbmFja3MgPSB0aGlzLnNuYWNrcy5maWx0ZXIob2JqID0+IG9iai5pZCAhPT0gaWQpO1xuICB9XG5cbiAgY2xlYXIoKSB7XG4gICAgLy8gdGhpcy5zbmFja3MuZm9yRWFjaChzbmFjayA9PiB7XG4gICAgLy8gICB0aGlzLnJlbW92ZShzbmFjay5pZCk7XG4gICAgLy8gfSk7XG5cbiAgICB0aGlzLnNuYWNrcyA9IFtdO1xuXG4gICAgaWYgKHRoaXMub25DbGVhcikge1xuICAgICAgdGhpcy5vbkNsZWFyLmVtaXQodHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgdXVpZCgpIHtcbiAgICAvLyB0c2xpbnQ6ZGlzYWJsZTpuby1iaXR3aXNlXG4gICAgcmV0dXJuICd4eHh4eHh4eC14eHh4LTR4eHgteXh4eC14eHh4eHh4eHh4eHgnLnJlcGxhY2UoL1t4eV0vZywgZnVuY3Rpb24gKGMpIHtcbiAgICAgIGNvbnN0IHIgPSBNYXRoLnJhbmRvbSgpICogMTYgfCAwLCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzIHwgMHg4KTtcbiAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbiAgICAvLyB0c2xpbnQ6ZW5hYmxlOm5vLWJpdHdpc2VcbiAgfVxuXG4gIGNhbGNUZXh0Q29sb3IoYmFja2dyb3VuZCkge1xuICAgIGlmICghYmFja2dyb3VuZCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGV4VG9SZ2IoaGV4KSB7XG4gICAgICBjb25zdCBzaG9ydGhhbmRSZWdleCA9IC9eIz8oW2EtZlxcZF0pKFthLWZcXGRdKShbYS1mXFxkXSkkL2k7XG4gICAgICBoZXggPSBoZXgucmVwbGFjZShzaG9ydGhhbmRSZWdleCwgKG0sIHIsIGcsIGIpID0+IHtcbiAgICAgICAgcmV0dXJuIHIgKyByICsgZyArIGcgKyBiICsgYjtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcbiAgICAgIHJldHVybiByZXN1bHQgPyB7XG4gICAgICAgIHI6IHBhcnNlSW50KHJlc3VsdFsxXSwgMTYpLFxuICAgICAgICBnOiBwYXJzZUludChyZXN1bHRbMl0sIDE2KSxcbiAgICAgICAgYjogcGFyc2VJbnQocmVzdWx0WzNdLCAxNilcbiAgICAgIH0gOiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHJnYiA9IGhleFRvUmdiKGJhY2tncm91bmQpO1xuICAgIGlmICghcmdiKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xvciA9IFtyZ2IuciAvIDI1NSwgcmdiLmcgLyAyNTUsIHJnYi5iIC8gMjU1XTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY29sb3IubGVuZ3RoOyArK2kpIHtcbiAgICAgIGlmIChjb2xvcltpXSA8PSAwLjAzOTI4KSB7XG4gICAgICAgIGNvbG9yW2ldID0gY29sb3JbaV0gLyAxMi45MjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbG9yW2ldID0gTWF0aC5wb3coKGNvbG9yW2ldICsgMC4wNTUpIC8gMS4wNTUsIDIuNCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgbCA9IDAuMjEyNiAqIGNvbG9yWzBdICsgMC43MTUyICogY29sb3JbMV0gKyAwLjA3MjIgKiBjb2xvclsyXTtcblxuICAgIGlmIChsID4gMC4xNzkpIHtcbiAgICAgIHJldHVybiAnIzAwMCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnI2ZmZic7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBOZ01vZHVsZSwgTW9kdWxlV2l0aFByb3ZpZGVycywgQVBQX0lOSVRJQUxJWkVSIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBDb21tb25Nb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24nO1xuLy8gaW1wb3J0IHsgQnJvd3Nlck1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL3BsYXRmb3JtLWJyb3dzZXInO1xuXG5pbXBvcnQgeyBIVFRQX0lOVEVSQ0VQVE9SUyB9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbi8vIGltcG9ydCB7IEJyb3dzZXJBbmltYXRpb25zTW9kdWxlIH0gZnJvbSAnQGFuZ3VsYXIvcGxhdGZvcm0tYnJvd3Nlci9hbmltYXRpb25zJztcbi8vIGltcG9ydCB7IE1hdFNuYWNrQmFyIH0gZnJvbSBcIkBhbmd1bGFyL21hdGVyaWFsXCI7XG5pbXBvcnQgeyBOQXV0aEd1YXJkU2VydmljZSB9IGZyb20gJy4vbi1hdXRoR2F1cmQuc2VydmljZSdcbmltcG9ydCB7IE5EYXRhTW9kZWxTZXJ2aWNlIH0gZnJvbSAnLi9uLWRhdGFNb2RlbC5zZXJ2aWNlJztcbi8vIGltcG9ydCB7IE5EYXRhU291cmNlU2VydmljZSB9IGZyb20gJy4vbi1kYXRhU291cmNlLnNlcnZpY2UnO1xuaW1wb3J0IHsgTkh0dHBTZXJ2aWNlIH0gZnJvbSAnLi9uLUhUVFAuc2VydmljZSc7XG5pbXBvcnQgeyBOSFRUUExvYWRlclNlcnZpY2UgfSBmcm9tICcuL24tSFRUUExvYWRlci5zZXJ2aWNlJztcbmltcG9ydCB7IE5Mb2NhbFN0b3JhZ2VTZXJ2aWNlIH0gZnJvbSAnLi9uLWxvY2FsU3RvcmFnZS5zZXJ2aWNlJztcbmltcG9ydCB7IE5Mb2dpblNlcnZpY2UgfSBmcm9tICcuL24tbG9naW4uc2VydmljZSc7XG5pbXBvcnQgeyBOTG9nb3V0U2VydmljZSB9IGZyb20gJy4vbi1sb2dvdXQuc2VydmljZSc7XG5pbXBvcnQgeyBOTm90aWZpY2F0aW9uU2VydmljZSB9IGZyb20gJy4vbi1ub3RpZmljYXRpb24uc2VydmljZSc7XG5pbXBvcnQgeyBOU25hY2tiYXJTZXJ2aWNlIH0gZnJvbSAnLi9uLXNuYWNrYmFyLnNlcnZpY2UnO1xuaW1wb3J0IHsgTlN5c3RlbVNlcnZpY2UgfSBmcm9tICcuL24tc3lzdGVtLnNlcnZpY2UnO1xuaW1wb3J0IHsgTlB1YlN1YlNlcnZpY2UgfSBmcm9tICcuL24tcHViU3ViLnNlcnZpY2UnO1xuaW1wb3J0IHsgTlNlc3Npb25TdG9yYWdlU2VydmljZSB9IGZyb20gJy4vbi1zZXNzaW9uU3RvcmFnZS5zZXJ2aWNlJ1xuaW1wb3J0IHsgTlRva2VuU2VydmljZSB9IGZyb20gJy4vbi10b2tlbi5zZXJ2aWNlJztcbmltcG9ydCB7IEh0dHBDbGllbnRNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9jb21tb24vaHR0cCc7XG4vLyBpbXBvcnQgeyBSb3V0ZXJNb2R1bGUgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgUm91dGVyTW9kdWxlLCBSb3V0ZXMgfSBmcm9tICdAYW5ndWxhci9yb3V0ZXInO1xuaW1wb3J0IHsgSHR0cE1vZHVsZSB9IGZyb20gJ0Bhbmd1bGFyL2h0dHAnO1xuaW1wb3J0IHsgTmdGb3JhZ2VNb2R1bGUgfSBmcm9tICduZ2ZvcmFnZSc7XG5cbmltcG9ydCB7IFNuYWNrQ29tcG9uZW50IH0gZnJvbSAnLi9zbmFja2Jhci9zbmFjay9zbmFjay5jb21wb25lbnQnO1xuaW1wb3J0IHsgU25hY2tiYXJDb21wb25lbnQgfSBmcm9tICcuL3NuYWNrYmFyL3NuYWNrYmFyL3NuYWNrYmFyLmNvbXBvbmVudCc7XG4vLyBpbXBvcnQge1NhZmVIdG1sUGlwZX0gZnJvbSAnLi9zbmFja2Jhci9waXBlL3NhZmUtaHRtbC5waXBlJztcblxuXG4vLyBleHBvcnQgZnVuY3Rpb24gdXBkYXRlRW52UHJvcGVydGllcyhlbnYpIHtcbi8vICAgY29uc29sZS5sb2coZW52KTtcbi8vICAgTlN5c3RlbVNlcnZpY2UuZ2V0SW5zdGFuY2UoKS5lbnZpcm9ubWVudHMgPSBlbnY7XG4vLyB9XG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydHVwU2VydmljZUZhY3Rvcnkoc3RhcnR1cFNlcnZpY2U6IE5Mb2NhbFN0b3JhZ2VTZXJ2aWNlKSB7XG4gIGNvbnN0IHJlcyA9ICgpID0+IHtcbiAgICAvLyBjb25zb2xlLmxvZygnbW9kdWxlIGJlZm9yZSBpbml0c3RvcmFnZSBjYWxsJyk7XG4gICAgcmV0dXJuIHN0YXJ0dXBTZXJ2aWNlLmluaXRTdG9yYWdlKCk7XG5cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG5cbkBOZ01vZHVsZSh7XG4gIGltcG9ydHM6IFtcbiAgICBDb21tb25Nb2R1bGUsXG4gICAgSHR0cENsaWVudE1vZHVsZSxcbiAgICBSb3V0ZXJNb2R1bGUsXG4gICAgSHR0cE1vZHVsZSxcbiAgICBOZ0ZvcmFnZU1vZHVsZS5mb3JSb290KClcbiAgICAvLyBCcm93c2VyTW9kdWxlXG4gIF0sXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IEhUVFBfSU5URVJDRVBUT1JTLFxuICAgICAgdXNlQ2xhc3M6IE5IdHRwU2VydmljZSxcbiAgICAgIG11bHRpOiB0cnVlXG4gICAgfSxcbiAgICB7XG4gICAgICAvLyBQcm92aWRlciBmb3IgQVBQX0lOSVRJQUxJWkVSXG4gICAgICBwcm92aWRlOiBBUFBfSU5JVElBTElaRVIsXG4gICAgICB1c2VGYWN0b3J5OiBzdGFydHVwU2VydmljZUZhY3RvcnksXG4gICAgICBkZXBzOiBbTkxvY2FsU3RvcmFnZVNlcnZpY2VdLFxuICAgICAgbXVsdGk6IHRydWVcbiAgICB9LFxuICAgIE5BdXRoR3VhcmRTZXJ2aWNlLFxuICAgIE5EYXRhTW9kZWxTZXJ2aWNlLFxuICAgIC8vIE5EYXRhU291cmNlU2VydmljZSxcbiAgICBOSHR0cFNlcnZpY2UsXG4gICAgTkhUVFBMb2FkZXJTZXJ2aWNlLFxuICAgIE5Mb2NhbFN0b3JhZ2VTZXJ2aWNlLFxuICAgIE5Mb2dpblNlcnZpY2UsXG4gICAgTkxvZ291dFNlcnZpY2UsXG4gICAgTk5vdGlmaWNhdGlvblNlcnZpY2UsXG4gICAgTlNuYWNrYmFyU2VydmljZSxcbiAgICBOUHViU3ViU2VydmljZSxcbiAgICAvLyAgICAgTlN5c3RlbVNlcnZpY2UsXG4gICAgTlNlc3Npb25TdG9yYWdlU2VydmljZSxcbiAgICBOVG9rZW5TZXJ2aWNlXG4gIF0sXG4gIGRlY2xhcmF0aW9uczogW1xuICAgIFNuYWNrQ29tcG9uZW50LFxuICAgIFNuYWNrYmFyQ29tcG9uZW50XG4gIF0sXG4gIGV4cG9ydHM6IFtcbiAgICBTbmFja0NvbXBvbmVudCxcbiAgICBTbmFja2JhckNvbXBvbmVudFxuICBdXG5cbn0pXG5leHBvcnQgY2xhc3MgTmV1dHJpbm9zU2VlZFNlcnZpY2VzTW9kdWxlIHtcblxufVxuIl0sIm5hbWVzIjpbInBsYXRmb3JtLm9zIiwicGxhdGZvcm0ubmFtZSIsInBsYXRmb3JtLnZlcnNpb24iLCJJbmplY3RhYmxlIiwiTmdGb3JhZ2VDb25maWciLCJOZ0ZvcmFnZSIsIk5nRm9yYWdlQ2FjaGUiLCJTdWJqZWN0IiwiaHR0cCIsImZpcmViYXNlLm1lc3NhZ2luZyIsIkh0dHBDbGllbnQiLCJFdmVudEVtaXR0ZXIiLCJPdXRwdXQiLCJyb3V0ZXIiLCJSb3V0ZXIiLCJPYnNlcnZhYmxlIiwiQmVoYXZpb3JTdWJqZWN0IiwiSHR0cEhlYWRlcnMiLCJIdHRwRXJyb3JSZXNwb25zZSIsIkluamVjdG9yIiwiQ29tcG9uZW50IiwiSW5wdXQiLCJOZ01vZHVsZSIsIkNvbW1vbk1vZHVsZSIsIkh0dHBDbGllbnRNb2R1bGUiLCJSb3V0ZXJNb2R1bGUiLCJIdHRwTW9kdWxlIiwiTmdGb3JhZ2VNb2R1bGUiLCJIVFRQX0lOVEVSQ0VQVE9SUyIsIkFQUF9JTklUSUFMSVpFUiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUlBLFFBR0E7O1lBZ0JJLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDOzs7OztRQVJqQywwQkFBVzs7O1lBQWxCO2dCQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFO29C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