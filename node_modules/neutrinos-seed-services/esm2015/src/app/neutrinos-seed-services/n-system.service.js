/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import * as platform from 'platform';
export class NSystemService {
    /**
     * @return {?}
     */
    static getInstance() {
        if (!this.instance) {
            this.instance = new NSystemService();
        }
        return this.instance;
    }
    constructor() {
        this._deviceType = this.checkDevice();
    }
    /**
     * Returna 'mobile' or 'browser' based on the platform
     * @return {?}
     */
    checkDevice() {
        if (window['device'] && (window['device']['platform'] != 'browser' || window['device']['platform'] != 'Browser')) {
            return 'mobile';
        }
        else if (window['device'] && (window['device']['platform'] == 'browser' || window['device']['platform'] == 'Browser')) {
            return 'cordova_browser';
        }
        else {
            return 'browser';
        }
    }
    /**
     * @return {?}
     */
    get deviceType() {
        return this._deviceType;
    }
    /**
     * @param {?} key
     * @return {?}
     */
    getVal(key) {
        if (!NSystemService.envProperties) {
            NSystemService.envProperties = window['neutrinos']['environments'];
            this.properties = NSystemService.envProperties.properties;
        }
        if (key == 'properties') {
            if (NSystemService.envProperties) {
                return NSystemService.envProperties.properties;
            }
            else {
                return undefined;
            }
        }
        else {
            if (NSystemService.envProperties && NSystemService.envProperties.properties) {
                return NSystemService.envProperties.properties[key];
            }
            else {
                return undefined;
            }
        }
    }
    /**
     * @return {?}
     */
    isAndroid() {
        if (window['device'] && window['device']['platform'] == 'Android') {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     * @return {?}
     */
    isIOS() {
        if (window['device'] && window['device']['platform'] == 'iOS') {
            return true;
        }
        else {
            return false;
        }
    }
    /**
     * @return {?}
     */
    getAndroidVersion() {
        if (this.isAndroid()) {
            return window['device']['version'];
        }
        else {
            return '';
        }
    }
    /**
     * @return {?}
     */
    getAuthUrl() {
        // this.properties = this.getVal('properties');
        return this.properties.baseUrl + this.properties.tenantName + '/auth/';
    }
    /**
     * @return {?}
     */
    getTenantUrl() {
        return this.properties.baseUrl + this.properties.tenantName + '/';
    }
    /**
     * @return {?}
     */
    getAppUrl() {
        return this.properties.baseUrl + this.properties.tenantName + '/proxy/' + this.properties.appName + '/';
    }
    /**
     * @return {?}
     */
    getProxyUrl() {
        return this.properties.baseUrl + this.properties.tenantName + '/proxy/';
    }
    /**
     * @return {?}
     */
    getDataModelUrl() {
        return this.properties.baseUrl + this.properties.tenantName + '/datamodel/' + this.properties.appDataSource + '/' + this.properties.appName + '/';
    }
    /**
     * @return {?}
     */
    getFileIOUrl() {
        return this.properties.baseUrl + this.properties.tenantName + '/fileio/' +
            this.properties.appDataSource + '/' + this.properties.appName + '/';
    }
    /**
     * @param {?} type
     * @return {?}
     */
    getPlatformDetails(type) {
        const /** @type {?} */ pDetails = {
            platform: platform.os.family,
            platformVersion: platform.os.version,
        };
        if (type === 'browser') {
            return Object.assign(pDetails, {
                type: 'browser',
                browser: platform.name,
                browserVersion: platform.version,
            });
        }
        else if (type === 'mobile' || type === 'cordova_browser') {
            return Object.assign(pDetails, {
                type: 'mobile',
                model: window['device'].model,
                manufacturer: window['device'].manufacturer,
                isVirtual: window['device'].isVirtual
            });
        }
    }
}
function NSystemService_tsickle_Closure_declarations() {
    /** @type {?} */
    NSystemService.instance;
    /** @type {?} */
    NSystemService.envProperties;
    /** @type {?} */
    NSystemService.prototype._deviceType;
    /** @type {?} */
    NSystemService.prototype.uuid;
    /** @type {?} */
    NSystemService.prototype.properties;
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibi1zeXN0ZW0uc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL25ldXRyaW5vcy1zZWVkLXNlcnZpY2VzLyIsInNvdXJjZXMiOlsic3JjL2FwcC9uZXV0cmlub3Mtc2VlZC1zZXJ2aWNlcy9uLXN5c3RlbS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFJQSxPQUFPLEtBQUssUUFBUSxNQUFNLFVBQVUsQ0FBQztBQUdyQyxNQUFNOzs7O0lBUUosTUFBTSxDQUFDLFdBQVc7UUFDaEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQztZQUNuQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksY0FBYyxFQUFFLENBQUM7U0FDdEM7UUFDRCxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQztLQUN0Qjs7UUFHQyxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQzs7Ozs7O0lBb0J4QyxXQUFXO1FBQ1QsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLFNBQVMsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2pILE1BQU0sQ0FBQyxRQUFRLENBQUM7U0FDakI7UUFBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxJQUFJLFNBQVMsSUFBSSxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksU0FBUyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3hILE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQztTQUMxQjtRQUFDLElBQUksQ0FBQyxDQUFDO1lBQ04sTUFB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QUMzQyxTQUFTLEVBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLFNBQVM7YUFDdEMsQ0FBQyxDQUFDO1NBQ0o7O0NBRUoiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBpbXBvcnQgeyBlbnZpcm9ubWVudCB9IGZyb20gJy4uLy4uL2Vudmlyb25tZW50cy9lbnZpcm9ubWVudCc7XG5pbXBvcnQgeyBOVXRpbGl0eSB9IGZyb20gJy4vbi11dGlsLnNlcnZpY2UnO1xuaW1wb3J0IHsgTkxvY2FsU3RvcmFnZVNlcnZpY2UgfSBmcm9tICcuL24tbG9jYWxTdG9yYWdlLnNlcnZpY2UnO1xuaW1wb3J0IHsgSW5qZWN0YWJsZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0ICogYXMgcGxhdGZvcm0gZnJvbSAncGxhdGZvcm0nO1xuXG4vLyBAZHluYW1pY1xuZXhwb3J0IGNsYXNzIE5TeXN0ZW1TZXJ2aWNlIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IE5TeXN0ZW1TZXJ2aWNlO1xuXG4gIHByaXZhdGUgX2RldmljZVR5cGU6IHN0cmluZztcbiAgLy8gcHJpdmF0ZSBfZGV2aWNlVVVJRDtcbiAgdXVpZDtcbiAgcHJvcGVydGllcztcbiAgc3RhdGljIGVudlByb3BlcnRpZXM7XG4gIHN0YXRpYyBnZXRJbnN0YW5jZSgpIHtcbiAgICBpZiAoIXRoaXMuaW5zdGFuY2UpIHtcbiAgICAgIHRoaXMuaW5zdGFuY2UgPSBuZXcgTlN5c3RlbVNlcnZpY2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuaW5zdGFuY2U7XG4gIH1cblxuICBwcml2YXRlIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuX2RldmljZVR5cGUgPSB0aGlzLmNoZWNrRGV2aWNlKCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0ZXIgYW5kIGdldHRlciBmb3IgdGhlIGVudmlyb25tZW50c1xuICAgKi9cblxuICAvLyBzZXQgZW52aXJvbm1lbnRzKHByb3BlcnRpZXMpIHtcbiAgLy8gICBjb25zb2xlLmxvZyhwcm9wZXJ0aWVzKTtcbiAgLy8gICBOU3lzdGVtU2VydmljZS5lbnZQcm9wZXJ0aWVzID0gcHJvcGVydGllcztcbiAgLy8gICB0aGlzLnByb3BlcnRpZXMgPSB0aGlzLmdldFZhbCgncHJvcGVydGllcycpO1xuICAvLyB9XG5cbiAgLy8gZ2V0IGVudmlyb25tZW50cygpIHtcbiAgLy8gICByZXR1cm4gTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcztcbiAgLy8gfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5hICdtb2JpbGUnIG9yICdicm93c2VyJyBiYXNlZCBvbiB0aGUgcGxhdGZvcm1cbiAgICovXG4gIGNoZWNrRGV2aWNlKCk6IHN0cmluZyB7XG4gICAgaWYgKHdpbmRvd1snZGV2aWNlJ10gJiYgKHdpbmRvd1snZGV2aWNlJ11bJ3BsYXRmb3JtJ10gIT0gJ2Jyb3dzZXInIHx8IHdpbmRvd1snZGV2aWNlJ11bJ3BsYXRmb3JtJ10gIT0gJ0Jyb3dzZXInKSkge1xuICAgICAgcmV0dXJuICdtb2JpbGUnO1xuICAgIH0gZWxzZSBpZiAod2luZG93WydkZXZpY2UnXSAmJiAod2luZG93WydkZXZpY2UnXVsncGxhdGZvcm0nXSA9PSAnYnJvd3NlcicgfHwgd2luZG93WydkZXZpY2UnXVsncGxhdGZvcm0nXSA9PSAnQnJvd3NlcicpKSB7XG4gICAgICByZXR1cm4gJ2NvcmRvdmFfYnJvd3Nlcic7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAnYnJvd3Nlcic7XG4gICAgfVxuICB9XG5cblxuICBwdWJsaWMgZ2V0IGRldmljZVR5cGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RldmljZVR5cGU7XG4gIH1cblxuXG5cbiAgcHVibGljIGdldFZhbChrZXkpIHtcbiAgICBpZiAoIU5TeXN0ZW1TZXJ2aWNlLmVudlByb3BlcnRpZXMpIHtcbiAgICAgIE5TeXN0ZW1TZXJ2aWNlLmVudlByb3BlcnRpZXMgPSB3aW5kb3dbJ25ldXRyaW5vcyddWydlbnZpcm9ubWVudHMnXTtcbiAgICAgIHRoaXMucHJvcGVydGllcyA9IE5TeXN0ZW1TZXJ2aWNlLmVudlByb3BlcnRpZXMucHJvcGVydGllcztcbiAgICB9XG5cbiAgICBpZiAoa2V5ID09ICdwcm9wZXJ0aWVzJykge1xuICAgICAgaWYgKE5TeXN0ZW1TZXJ2aWNlLmVudlByb3BlcnRpZXMpIHtcbiAgICAgICAgcmV0dXJuIE5TeXN0ZW1TZXJ2aWNlLmVudlByb3BlcnRpZXMucHJvcGVydGllcztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChOU3lzdGVtU2VydmljZS5lbnZQcm9wZXJ0aWVzICYmIE5TeXN0ZW1TZXJ2aWNlLmVudlByb3BlcnRpZXMucHJvcGVydGllcykge1xuICAgICAgICByZXR1cm4gTlN5c3RlbVNlcnZpY2UuZW52UHJvcGVydGllcy5wcm9wZXJ0aWVzW2tleV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgfVxuXG4gIH1cblxuICBwdWJsaWMgaXNBbmRyb2lkKCkge1xuICAgIGlmICh3aW5kb3dbJ2RldmljZSddICYmIHdpbmRvd1snZGV2aWNlJ11bJ3BsYXRmb3JtJ10gPT0gJ0FuZHJvaWQnKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBpc0lPUygpIHtcbiAgICBpZiAod2luZG93WydkZXZpY2UnXSAmJiB3aW5kb3dbJ2RldmljZSddWydwbGF0Zm9ybSddID09ICdpT1MnKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRBbmRyb2lkVmVyc2lvbigpIHtcbiAgICBpZiAodGhpcy5pc0FuZHJvaWQoKSkge1xuICAgICAgcmV0dXJuIHdpbmRvd1snZGV2aWNlJ11bJ3ZlcnNpb24nXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBnZXRBdXRoVXJsKCkge1xuICAgIC8vIHRoaXMucHJvcGVydGllcyA9IHRoaXMuZ2V0VmFsKCdwcm9wZXJ0aWVzJyk7XG4gICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5iYXNlVXJsICsgdGhpcy5wcm9wZXJ0aWVzLnRlbmFudE5hbWUgKyAnL2F1dGgvJztcbiAgfVxuICBwdWJsaWMgZ2V0VGVuYW50VXJsKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuYmFzZVVybCArIHRoaXMucHJvcGVydGllcy50ZW5hbnROYW1lICsgJy8nO1xuICB9XG5cbiAgcHVibGljIGdldEFwcFVybCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmJhc2VVcmwgKyB0aGlzLnByb3BlcnRpZXMudGVuYW50TmFtZSArICcvcHJveHkvJyArIHRoaXMucHJvcGVydGllcy5hcHBOYW1lICsgJy8nO1xuICB9XG5cbiAgcHVibGljIGdldFByb3h5VXJsKCkge1xuICAgIHJldHVybiB0aGlzLnByb3BlcnRpZXMuYmFzZVVybCArIHRoaXMucHJvcGVydGllcy50ZW5hbnROYW1lICsgJy9wcm94eS8nO1xuICB9XG5cbiAgcHVibGljIGdldERhdGFNb2RlbFVybCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmJhc2VVcmwgKyB0aGlzLnByb3BlcnRpZXMudGVuYW50TmFtZSArICcvZGF0YW1vZGVsLycgKyB0aGlzLnByb3BlcnRpZXMuYXBwRGF0YVNvdXJjZSArICcvJyArIHRoaXMucHJvcGVydGllcy5hcHBOYW1lICsgJy8nO1xuICB9XG5cbiAgcHVibGljIGdldEZpbGVJT1VybCgpIHtcbiAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmJhc2VVcmwgKyB0aGlzLnByb3BlcnRpZXMudGVuYW50TmFtZSArICcvZmlsZWlvLycgK1xuICAgICAgdGhpcy5wcm9wZXJ0aWVzLmFwcERhdGFTb3VyY2UgKyAnLycgKyB0aGlzLnByb3BlcnRpZXMuYXBwTmFtZSArICcvJztcbiAgfVxuXG4gIHB1YmxpYyBnZXRQbGF0Zm9ybURldGFpbHModHlwZSkge1xuICAgIGNvbnN0IHBEZXRhaWxzID0ge1xuICAgICAgcGxhdGZvcm06IHBsYXRmb3JtLm9zLmZhbWlseSxcbiAgICAgIHBsYXRmb3JtVmVyc2lvbjogcGxhdGZvcm0ub3MudmVyc2lvbixcbiAgICB9O1xuICAgIGlmICh0eXBlID09PSAnYnJvd3NlcicpIHtcbiAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHBEZXRhaWxzLCB7XG4gICAgICAgIHR5cGU6ICdicm93c2VyJyxcbiAgICAgICAgYnJvd3NlcjogcGxhdGZvcm0ubmFtZSxcbiAgICAgICAgYnJvd3NlclZlcnNpb246IHBsYXRmb3JtLnZlcnNpb24sXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdtb2JpbGUnIHx8IHR5cGUgPT09ICdjb3Jkb3ZhX2Jyb3dzZXInKSB7XG4gICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihwRGV0YWlscywge1xuICAgICAgICB0eXBlOiAnbW9iaWxlJyxcbiAgICAgICAgbW9kZWw6IHdpbmRvd1snZGV2aWNlJ10ubW9kZWwsXG4gICAgICAgIG1hbnVmYWN0dXJlcjogd2luZG93WydkZXZpY2UnXS5tYW51ZmFjdHVyZXIsXG4gICAgICAgIGlzVmlydHVhbDogd2luZG93WydkZXZpY2UnXS5pc1ZpcnR1YWxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuIl19